<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Áp dụng watch để theo dõi MySQL Query - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="alternate" type="application/atom+xml" href="https://ddtrungit.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://ddtrungit.github.io/feed.json"><link rel="shortcut icon" href="https://ddtrungit.github.io/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="shortcut icon" href="https://ddtrungit.github.io/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="stylesheet" href="https://ddtrungit.github.io/assets/css/style.css?v=4becd99c93342dd7c117b97188f052e6"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ddtrungit.github.io/ap-dung-watch-de-theo-doi-mysql-query/index.html"},"headline":"Áp dụng watch để theo dõi MySQL Query","datePublished":"2021-01-28T04:20","dateModified":"2022-06-13T14:28","image":{"@type":"ImageObject","url":"https://ddtrungit.github.io/media/posts/94/676029069_1280x720.jpg","height":720,"width":1280},"description":"Hôm nay trong Room chat Telegram của nhóm có 1 bạn bị tình trạng process MySQL chiếm 100% nhưng chưa&hellip;","author":{"@type":"Person","name":"Duong Dinh Trung","url":"https://ddtrungit.github.io/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"https://ddtrungit.github.io/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="https://ddtrungit.github.io/index.html" class="logo"><img src="https://ddtrungit.github.io/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ddtrungit.github.io/index.html" target="_self">Home</a></li><li><a href="https://ddtrungit.github.io/lien-he/index.html" target="_self">Contact</a></li><li><a href="https://ddtrungit.github.io/gioi-thieu/index.html" target="_self">About</a></li><li><a href="https://ddtrungit.github.io/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="https://ddtrungit.github.io/tags/aws/index.html" target="_self">AWS</a></li><li><a href="https://ddtrungit.github.io/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="https://ddtrungit.github.io/tags/linux/index.html" target="_self">Linux</a></li><li><a href="https://ddtrungit.github.io/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="https://ddtrungit.github.io/tags/tip/index.html" target="_self">TIP</a></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><h1 class="post__title">Áp dụng watch để theo dõi MySQL Query</h1><div class="post__meta"><div class="post__author">By <a href="https://ddtrungit.github.io/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div></div></header><figure class="post__featured-image"><img src="https://ddtrungit.github.io/media/posts/94/676029069_1280x720.jpg" srcset="https://ddtrungit.github.io/media/posts/94/responsive/676029069_1280x720-xs.jpg 300w, https://ddtrungit.github.io/media/posts/94/responsive/676029069_1280x720-sm.jpg 480w, https://ddtrungit.github.io/media/posts/94/responsive/676029069_1280x720-md.jpg 768w, https://ddtrungit.github.io/media/posts/94/responsive/676029069_1280x720-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="720" width="1280" alt=""></figure><div class="post__inner"><div class="post__entry"><p></p><p>Hôm nay trong Room chat Telegram của nhóm có 1 bạn bị tình trạng process MySQL chiếm 100% nhưng chưa biết phân tích từ đâu. Mình có chỉ bạn ấy vào mysql console chạy lệnh <strong><em>“show full processlist”</em></strong> để xác định xem MySQL đang xử lý những query nào, tuy nhiên do lượng truy cập ít nên thao tác ko đủ nhanh để bắt được query. Vậy bây giờ phải làm sao?</p><p></p><p></p><p>1. Chạy lệnh của MySQL mà không cần vào console: Bạn có thể chạy bằng cách sử dụng <strong><em>“mysql -e COMMAND”</em></strong>, trong trường hợp này:</p><p></p><p></p><pre class="wp-block-code"><code>$ mysql -e "show full processlist"</code></pre><p></p><p></p><p>2. Kết hợp lệnh watch để lặp lại lệnh tự động mỗi 1s (TIP #13): Mở terminal mới chạy lệnh</p><p></p><p></p><pre class="wp-block-code"><code>$ watch -n 1 'mysql -e "show full processlist"'</code></pre><p></p><p></p><p>3. Có thể mở browser hoặc dùng curl để request liên tục vào site mình và quan sát kết quả</p><p></p><p></p><figure class="wp-block-image"><figure class="wp-image-254"><img loading="lazy" src="https://ddtrungit.github.io/media/posts/94/tip_14_2-1024x136.jpeg" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/94/responsive/tip_14_2-1024x136-xs.jpeg 300w, https://ddtrungit.github.io/media/posts/94/responsive/tip_14_2-1024x136-sm.jpeg 480w, https://ddtrungit.github.io/media/posts/94/responsive/tip_14_2-1024x136-md.jpeg 768w" alt=""></figure></figure><p></p></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div></footer></div></article></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="https://ddtrungit.github.io/install-mysql-cluster-4-node/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/97/Cluster-2Bsimple-2Bsetup.png" srcset="https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-xs.png 300w, https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-sm.png 480w, https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-md.png 768w, https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="551" width="860" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/linux/index.html">Linux</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/install-mysql-cluster-4-node/index.html" class="invert">Install mysql cluster 4 node</a></h3></header><p class="c-card__text">172.16.2.89 MysqlNode_01 172.16.2.90 ManagementNode 172.16.2.91 DataNode_02 172.16.2.93 DataNode_01 Cấu hình 1 Management node # wget https://dev.mysql.com/get/Downloads/MySQL-Cluster-8.0/mysql-cluster-community-8.0.24-1.el7.x86_64.rpm-bundle.tar # tar -xvf mysql-cluster-community-8.0.24-1.el7.x86_64.rpm-bundle.tar&hellip;</p></div></article><article class="c-card"><a href="https://ddtrungit.github.io/xac-dinh-ip-va-ung-dung-ngon-nhieu-bang-thong-nhat/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/96/676029069_1280x720.jpg" srcset="https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-xs.jpg 300w, https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-sm.jpg 480w, https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-md.jpg 768w, https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="720" width="1280" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/tip/index.html">Tip</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/xac-dinh-ip-va-ung-dung-ngon-nhieu-bang-thong-nhat/index.html" class="invert">Xác định IP và ứng dụng ngốn nhiều băng thông nhất</a></h3></header><p class="c-card__text">Muốn xác định IP hoặc ứng dụng ngốn nhiều băng thông nhất, sử dụng lệnh $ nethogs Khi nethogs đang&hellip;</p></div></article><article class="c-card"><a href="https://ddtrungit.github.io/watch-thuc-thi-lai-va-theo-doi-output-cua-lenh-lien-tuc/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/95/676029069_1280x720.jpg" srcset="https://ddtrungit.github.io/media/posts/95/responsive/676029069_1280x720-xs.jpg 300w, https://ddtrungit.github.io/media/posts/95/responsive/676029069_1280x720-sm.jpg 480w, https://ddtrungit.github.io/media/posts/95/responsive/676029069_1280x720-md.jpg 768w, https://ddtrungit.github.io/media/posts/95/responsive/676029069_1280x720-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="720" width="1280" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/tip/index.html">Tip</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/watch-thuc-thi-lai-va-theo-doi-output-cua-lenh-lien-tuc/index.html" class="invert">watch – Thực thi lại và theo dõi output của lệnh liên tục</a></h3></header><p class="c-card__text">Lệnh watch sẽ thực thi lặp lại lệnh liên tục và cho phép ta theo dõi output + error. Lệnh&hellip;</p></div></article><article class="c-card"><a href="https://ddtrungit.github.io/multitail-theo-doi-nhieu-file-log-cung-luc/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/92/676029069_1280x720.jpg" srcset="https://ddtrungit.github.io/media/posts/92/responsive/676029069_1280x720-xs.jpg 300w, https://ddtrungit.github.io/media/posts/92/responsive/676029069_1280x720-sm.jpg 480w, https://ddtrungit.github.io/media/posts/92/responsive/676029069_1280x720-md.jpg 768w, https://ddtrungit.github.io/media/posts/92/responsive/676029069_1280x720-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="720" width="1280" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/linux/index.html">Linux</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/multitail-theo-doi-nhieu-file-log-cung-luc/index.html" class="invert">multitail – theo dõi nhiều file log cùng lúc</a></h3></header><p class="c-card__text">Khi xử lý sự cố, ta thường có nhu cầu theo dõi nhiều log file realtime cùng lúc. Bình thường&hellip;</p></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="https://ddtrungit.github.io/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://ddtrungit.github.io/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>