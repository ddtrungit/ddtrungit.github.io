<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Creat user admin MongoDB - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#D73A42" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#D73A42"><meta name="apple-mobile-web-app-status-bar-style" content="#D73A42"><link rel="alternate" type="application/atom+xml" href="http://blog.dtrungit.ga/feed.xml"><link rel="alternate" type="application/json" href="http://blog.dtrungit.ga/feed.json"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="stylesheet" href="http://blog.dtrungit.ga/assets/css/style.css?v=57332019283b097fa755d17b0d684374"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.dtrungit.ga/creat-user-admin-mongodb/index.html"},"headline":"Creat user admin MongoDB","datePublished":"2021-05-20T06:07","dateModified":"2022-06-13T14:25","image":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/posts/106/images.png","height":162,"width":311},"description":"https://www.howtoforge.com/tutorial/how-to-install-and-configure-mongodb-on-centos-7/ #sudo mongo &gt; use admin db.createUser( { user: 'admin', pwd: 'admin123', roles: [ { role: 'userAdminAnyDatabase', db: 'admin' }&hellip;","author":{"@type":"Person","name":"Duong Dinh Trung","url":"http://blog.dtrungit.ga/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="http://blog.dtrungit.ga/index.html" class="logo"><img src="http://blog.dtrungit.ga/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="http://blog.dtrungit.ga/index.html" target="_self">Home</a></li><li><a href="http://blog.dtrungit.ga/lien-he/index.html" target="_self">Contact</a></li><li><a href="http://blog.dtrungit.ga/gioi-thieu/index.html" target="_self">About</a></li><li><a href="http://blog.dtrungit.ga/tags/aws/index.html" target="_self">AWS</a></li><li class="has-submenu"><a href="http://blog.dtrungit.ga/tags/linux/index.html" target="_self" aria-haspopup="true">Linux</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="http://blog.dtrungit.ga/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="http://blog.dtrungit.ga/tags/k8s/index.html" target="_self">Kubernetes</a></li><li><a href="http://blog.dtrungit.ga/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="http://blog.dtrungit.ga/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="http://blog.dtrungit.ga/tags/tip/index.html" target="_self">TIP</a></li></ul></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><h1 class="post__title">Creat user admin MongoDB</h1><div class="post__meta"><div class="post__author">By <a href="http://blog.dtrungit.ga/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div><div class="post__comments"><a href="http://blog.dtrungit.ga/creat-user-admin-mongodb/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></div></header><figure class="post__featured-image"><img src="http://blog.dtrungit.ga/media/posts/106/images.png" srcset="http://blog.dtrungit.ga/media/posts/106/responsive/images-xs.png 300w, http://blog.dtrungit.ga/media/posts/106/responsive/images-sm.png 480w, http://blog.dtrungit.ga/media/posts/106/responsive/images-md.png 768w, http://blog.dtrungit.ga/media/posts/106/responsive/images-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="162" width="311" alt=""></figure><div class="post__inner"><div class="post__entry"><div style="direction: ltr; border-width: 100%;"><div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 6.6451in;"><div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 6.6451in;"><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"><a href="https://www.howtoforge.com/tutorial/how-to-install-and-configure-mongodb-on-centos-7/">https://www.howtoforge.com/tutorial/how-to-install-and-configure-mongodb-on-centos-7/</a></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">#sudo mongo</p><p style="margin: 0in; margin-left: .375in;"><span style="font-family: Calibri; font-size: 11.0pt;">&gt; </span><span style="font-style: italic; font-family: 'Courier New'; font-size: 12.0pt; background: #F9F9F9;">use admin</span></p><p style="margin: 0in; margin-left: .375in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">db.createUser(</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">  {</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">    user: "admin",</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">    pwd: "admin123",</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">  }</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">)</span></p><p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">&gt; show users</span></p><p style="margin-top: 0pt; margin-bottom: 7pt; font-family: Tahoma; font-size: 15.75pt; color: #314d7c;"><span style="font-weight: bold; background: white;">Step 5 - Enable User Authentication in MongoDB</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">In this step, we will enable authentication for users to prevent that another user without sufficient privileges is able to see the data on the database.</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">On our CentOS 7 server, MongoDB is running under systemd with an init script in the '/etc/init.d/' dirctory. We will edit that script to force the mongodb service to run with the '--auth' option.</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Go to the '/etc/init.d/' directory and edit the "mongod" file:</span></p><p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">sudo vi /usr/lib/systemd/system/mongod.servicevim mongod</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">On line 15 you will find the "OPTION" variable, there we will add the "mongod" option.</span></p><p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: whitesmoke;">OPTIONS=" --auth -f $CONFIGFILE"</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Save the file.</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Reload the systemd service and restart MongoDB.</span></p><p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">$sudo systemctl daemon-reload</span></p><p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">$sudo systemctl restart mongod</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Next, we have to test the configuration by logging into the mongo shell and switch to the admin database, then try to see the admin users.</span></p><p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">$mongo</span></p><p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">&gt;use admin</span></p><p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">&gt;show users</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">You will see an error about the unauthorized execution of the command in the database admin. Now we need to use the command 'db.auth()' for the authentication.</span></p><p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">db.auth('admin', 'admin123')</span></p><p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Now you can see the users with their roles and the privileges.</span></p><p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"> </p></div></div></div></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div><nav class="post__nav"><div class="post__nav__prev"><a class="post__nav__link" href="http://blog.dtrungit.ga/install-mongodb-community-edition-on-amazon-linux/index.html" rel="prev">Previous Post<h3 class="h6">Install MongoDB Community Edition on Amazon Linux</h3></a></div><div class="post__nav__next"><a class="post__nav__link" href="http://blog.dtrungit.ga/install-and-configure-redis-on-amazon-linux-2/index.html" rel="prev">Next Post<h3 class="h6">Install and Configure Redis on AMAZON LINUX 2</h3></a></div></nav></footer></div></article><div class="comments-area post__inner" id="comments"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div class="fb-comments" data-href="http://blog.dtrungit.ga/creat-user-admin-mongodb/" data-width="100%" data-colorscheme="light" data-lazy="true" data-order-by="reverse_time" data-numposts="5"></div><noscript>Please enable JS to use the comments form.</noscript></div></div><div id="fb-root"></div><script type="text/javascript" async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v12.0">nonce="n4mWU9e7"</script></div></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-huong-dan-cai-dat-kubernetes-voi-kubeadmin/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/128/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/128/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/128/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/128/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/128/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-huong-dan-cai-dat-kubernetes-voi-kubeadmin/index.html" class="invert">[Kubernetes] Hướng dẫn cài đặt Kubernetes với Kubeadmin</a></h3></header><p class="c-card__text">Phần 1. Chuẩn bị Quy hoạch Mô hình Phần 2. Chuẩn bị môi trường Bước 1: Đặt hostname cho từng&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-huong-dan-cai-dat-kubernetes-voi-kubeadmin/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><a href="http://blog.dtrungit.ga/install-mongodb-community-edition-on-amazon-linux/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/105/images.png" srcset="http://blog.dtrungit.ga/media/posts/105/responsive/images-xs.png 300w, http://blog.dtrungit.ga/media/posts/105/responsive/images-sm.png 480w, http://blog.dtrungit.ga/media/posts/105/responsive/images-md.png 768w, http://blog.dtrungit.ga/media/posts/105/responsive/images-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="162" width="311" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/linux/index.html">Linux</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/install-mongodb-community-edition-on-amazon-linux/index.html" class="invert">Install MongoDB Community Edition on Amazon Linux</a></h3></header><p class="c-card__text">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-amazon/ Configure the package management system (yum). Create a /etc/yum.repos.d/mongodb-org-4.4.repo file so that you can install MongoDB directly using yum: [mongodb-org-4.4] name=MongoDB Repository&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/install-mongodb-community-edition-on-amazon-linux/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><a href="http://blog.dtrungit.ga/linux-25-php-security-best-practices-for-sys-admins/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/69/1_kn9bfTW1lcX5gIItjtqw3A.png" srcset="http://blog.dtrungit.ga/media/posts/69/responsive/1_kn9bfTW1lcX5gIItjtqw3A-xs.png 300w, http://blog.dtrungit.ga/media/posts/69/responsive/1_kn9bfTW1lcX5gIItjtqw3A-sm.png 480w, http://blog.dtrungit.ga/media/posts/69/responsive/1_kn9bfTW1lcX5gIItjtqw3A-md.png 768w, http://blog.dtrungit.ga/media/posts/69/responsive/1_kn9bfTW1lcX5gIItjtqw3A-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="350" width="750" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/tip/index.html">Tip</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/linux-25-php-security-best-practices-for-sys-admins/index.html" class="invert">Linux 25 PHP Security Best Practices For Sys Admins</a></h3></header><p class="c-card__text">PHP is an open-source server-side scripting language, and it is a widely used. The Apache/Nginx/Lighttpd web server provides access to&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/linux-25-php-security-best-practices-for-sys-admins/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="http://blog.dtrungit.ga/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>