<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>[Kubernetes] Phần 7: Khái niệm Services - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#D73A42" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#D73A42"><meta name="apple-mobile-web-app-status-bar-style" content="#D73A42"><link rel="alternate" type="application/atom+xml" href="http://blog.dtrungit.ga/feed.xml"><link rel="alternate" type="application/json" href="http://blog.dtrungit.ga/feed.json"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="stylesheet" href="http://blog.dtrungit.ga/assets/css/style.css?v=57332019283b097fa755d17b0d684374"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.dtrungit.ga/kubernetes-phan-7-khai-niem-services/index.html"},"headline":"[Kubernetes] Phần 7: Khái niệm Services","datePublished":"2022-06-15T15:26","dateModified":"2022-06-15T15:26","image":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/posts/122/k8s.png","height":458,"width":816},"description":"1. Tổng quan Về mặt lý thuyết, ta có thể expose để người dùng kết nối trực tiếp tới Pod.","author":{"@type":"Person","name":"Duong Dinh Trung","url":"http://blog.dtrungit.ga/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="http://blog.dtrungit.ga/index.html" class="logo"><img src="http://blog.dtrungit.ga/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="http://blog.dtrungit.ga/index.html" target="_self">Home</a></li><li><a href="http://blog.dtrungit.ga/lien-he/index.html" target="_self">Contact</a></li><li><a href="http://blog.dtrungit.ga/gioi-thieu/index.html" target="_self">About</a></li><li><a href="http://blog.dtrungit.ga/tags/aws/index.html" target="_self">AWS</a></li><li class="has-submenu"><a href="http://blog.dtrungit.ga/tags/linux/index.html" target="_self" aria-haspopup="true">Linux</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="http://blog.dtrungit.ga/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="http://blog.dtrungit.ga/tags/k8s/index.html" target="_self">Kubernetes</a></li><li><a href="http://blog.dtrungit.ga/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="http://blog.dtrungit.ga/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="http://blog.dtrungit.ga/tags/tip/index.html" target="_self">TIP</a></li></ul></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><h1 class="post__title">[Kubernetes] Phần 7: Khái niệm Services</h1><div class="post__meta"><div class="post__author">By <a href="http://blog.dtrungit.ga/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div><div class="post__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-7-khai-niem-services/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></div></header><figure class="post__featured-image"><img src="http://blog.dtrungit.ga/media/posts/122/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/122/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/122/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/122/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/122/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="458" width="816" alt=""></figure><div class="post__inner"><div class="post__entry"><h2>1. Tổng quan</h2><p>Về mặt lý thuyết, ta có thể expose để người dùng kết nối trực tiếp tới Pod. Tuy nhiên, Pod trong k8s được tạo mới và tắt đi rất linh hoạt. Mỗi khi 1 pod được tạo mới, chúng sẽ được gắn một địa chỉ riêng. Đồng thời pod tạo K8s có thể được tăng giảm tùy thời điểm (Scale up và Slace down).</p><p>Vấn đề:</p><ul><li>Làm sao để expose được được Pod ra bên ngoài và làm sao người dùng có thể sử dụng dịch vụ?</li><li>Làm sao để để Pod chạy dịch vụ <code>frontend</code> có thể kết nối dịch vụ <code>backend</code> (vd: Pod chạy source code WordPress kết nối Pod chạy dịch vụ MariaDB)?</li></ul><p>Để giải quyết vấn đề trên, K8s sinh ra thành phần Service. Khi Service được sinh ra, nó sẽ được gắn 1 IP chỉ định (còn gọi là clusterIP), IP này sẽ không thay đổi khi cho đên khi Service bị xóa. Qua đó, ta sẽ sử dụng Service để expose service tại tập các Pod. Và Pod có thể nói chuyện trực tiếp với Service trong bài toán <code>Pod frontend service (WordPress)</code> cần kết nối với <code>Pod backend service (MariaDB)</code>.</p><p>Tóm tắt:</p><ul><li>Service có IP chỉ định, đại diện cho tập các Pod thuộc 1 Deployment</li><li>Service sẽ tự cân bẳng tải tới tập các Pod</li><li>Service có thể định nghĩa bằng file Json hoặc Yaml.</li></ul><figure class="wp-block-image size-large"><figure class="wp-image-500"><img loading="lazy" src="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-6-1024x528.png" data-is-external-image="true" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-6-1024x528.png 1024w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-6-300x155.png 300w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-6-768x396.png 768w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-6-816x421.png 816w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-6.png 1407w" alt="" width="1024" height="528" loading="lazy"></figure></figure><h2>2. Các loại Service</h2><ul><li>Có 3 kiểu services:<ul><li>ClusterIP:<ul><li>IP nội bộ K8s đại diện cho diện cho tập các Pod</li><li>Traffic tới sẽ được cân bằng tải tới tập các Pod thuộc deployment</li></ul></li><li>Node Port:<ul><li>Sử dụng để expose IP nội bộ bên trong Cluster ra bên ngoài</li><li>Mapping 1 cặp <code>IP + Port nội bộ</code> tới cặp 1 cặp <code>IP + Port Bên ngoài</code> để có thể truy cập từ internet vào dịch vụ bên trong Cluster</li><li>Traffic được cân bằng tải tới tập các Pod thuộc deployment</li></ul></li><li>LoadBalancer<ul><li>Gắn cho Deployment 1 IP Public</li><li>Có thể truy cập dịch vụ thông qua IP Public</li><li>Traffic được cân bằng tải tới tập các Pod bên trong Cluster</li></ul></li></ul></li></ul><figure class="wp-block-image size-large"><figure class="wp-image-501"><img loading="lazy" src="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-4-1024x554.png" data-is-external-image="true" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-4-1024x554.png 1024w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-4-300x162.png 300w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-4-768x416.png 768w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-4-816x442.png 816w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-4.png 1197w" alt="" width="1024" height="554" loading="lazy"></figure></figure><h2>3. Mô hình triển khai ứng dụng cơ bản</h2><figure class="wp-block-image size-large"><figure class="wp-image-502"><img loading="lazy" src="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-3-1024x566.png" data-is-external-image="true" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-3-1024x566.png 1024w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-3-300x166.png 300w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-3-768x425.png 768w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-3-816x451.png 816w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-3.png 1354w" alt="" width="1024" height="566" loading="lazy"></figure></figure><h2>4. Nguồn</h2><p><a href="https://collabnix.github.io/kubelabs/Slides_Services101/Services101.html">https://collabnix.github.io/kubelabs/Slides_Services101/Services101.html</a></p><p><a href="https://collabnix.github.io/kubelabs/Services101/#deploying--a-kubernetes-service">https://collabnix.github.io/kubelabs/Services101/#deploying–a-kubernetes-service</a></p></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div><nav class="post__nav"><div class="post__nav__prev"><a class="post__nav__link" href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html" rel="prev">Previous Post<h3 class="h6">[Kubernetes] Phần 6: Khái niệm Scheduling</h3></a></div><div class="post__nav__next"><a class="post__nav__link" href="http://blog.dtrungit.ga/kubernetes-phan-8-khai-niem-statefulset/index.html" rel="prev">Next Post<h3 class="h6">[Kubernetes] Phần 8: Khái niệm Statefulset</h3></a></div></nav></footer></div></article><div class="comments-area post__inner" id="comments"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div class="fb-comments" data-href="http://blog.dtrungit.ga/kubernetes-phan-7-khai-niem-services/" data-width="100%" data-colorscheme="light" data-lazy="true" data-order-by="reverse_time" data-numposts="5"></div><noscript>Please enable JS to use the comments form.</noscript></div></div><div id="fb-root"></div><script type="text/javascript" async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v12.0">nonce="n4mWU9e7"</script></div></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-phan-8-khai-niem-statefulset/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/123/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/123/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/123/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/123/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/123/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-8-khai-niem-statefulset/index.html" class="invert">[Kubernetes] Phần 8: Khái niệm Statefulset</a></h3></header><p class="c-card__text">1. Tổng quan Statefulset được sử dụng để quản trị một hoặc nhiều Pod. Vậy tại sao lại cần Statefulset khi đã&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-8-khai-niem-statefulset/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/121/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/121/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/121/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/121/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/121/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html" class="invert">[Kubernetes] Phần 6: Khái niệm Scheduling</a></h3></header><p class="c-card__text">Tổng quan Kubernetes Scheduler (kube-scheduler) là thành phần core trong k8s. Thành phần này sẽ tính toán để tìm node&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-5-khai-niem-deployment/index.html" class="invert">[Kubernetes] Phần 5: Khái niệm Deployment</a></h3></header><p class="c-card__text">Tổng quan Với ReplicateSet, ta chỉ có thể tăng giảm số lượng Pod, nhưng vấn để của RS là không&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-5-khai-niem-deployment/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-phan-4-khai-niem-replicateset/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/119/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/119/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/119/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/119/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/119/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-4-khai-niem-replicateset/index.html" class="invert">[Kubernetes] Phần 4: Khái niệm ReplicateSet</a></h3></header><p class="c-card__text">Tổng quan ReplicateSet được sử dụng để duy trì một tập replicate các Pod ổn định theo thời gian ReplicateSet&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-4-khai-niem-replicateset/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="http://blog.dtrungit.ga/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>