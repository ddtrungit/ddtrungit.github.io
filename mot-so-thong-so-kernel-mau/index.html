<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Một số thông số kernel mẫu - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="alternate" type="application/atom+xml" href="https://ddtrungit.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://ddtrungit.github.io/feed.json"><link rel="shortcut icon" href="https://ddtrungit.github.io/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="shortcut icon" href="https://ddtrungit.github.io/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="stylesheet" href="https://ddtrungit.github.io/assets/css/style.css?v=4becd99c93342dd7c117b97188f052e6"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ddtrungit.github.io/mot-so-thong-so-kernel-mau/index.html"},"headline":"Một số thông số kernel mẫu","datePublished":"2021-05-17T07:57","dateModified":"2022-06-13T14:26","image":{"@type":"ImageObject","url":"https://ddtrungit.github.io/media/posts/102/centos-la-gi.jpg","height":276,"width":540},"description":"Một số thông số kernel mẫu ####### Tested in CentOS7 ####### # Reference # https://klaver.it/linux/sysctl.conf # https://wiki.archlinux.org/index.php/Sysctl # https://www.kernel.org/doc/Documentation/sysctl/ #&hellip;","author":{"@type":"Person","name":"Duong Dinh Trung","url":"https://ddtrungit.github.io/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"https://ddtrungit.github.io/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="https://ddtrungit.github.io/index.html" class="logo"><img src="https://ddtrungit.github.io/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ddtrungit.github.io/index.html" target="_self">Home</a></li><li><a href="https://ddtrungit.github.io/lien-he/index.html" target="_self">Contact</a></li><li><a href="https://ddtrungit.github.io/gioi-thieu/index.html" target="_self">About</a></li><li><a href="https://ddtrungit.github.io/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="https://ddtrungit.github.io/tags/aws/index.html" target="_self">AWS</a></li><li><a href="https://ddtrungit.github.io/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="https://ddtrungit.github.io/tags/linux/index.html" target="_self">Linux</a></li><li><a href="https://ddtrungit.github.io/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="https://ddtrungit.github.io/tags/tip/index.html" target="_self">TIP</a></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><h1 class="post__title">Một số thông số kernel mẫu</h1><div class="post__meta"><div class="post__author">By <a href="https://ddtrungit.github.io/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div></div></header><figure class="post__featured-image"><img src="https://ddtrungit.github.io/media/posts/102/centos-la-gi.jpg" srcset="https://ddtrungit.github.io/media/posts/102/responsive/centos-la-gi-xs.jpg 300w, https://ddtrungit.github.io/media/posts/102/responsive/centos-la-gi-sm.jpg 480w, https://ddtrungit.github.io/media/posts/102/responsive/centos-la-gi-md.jpg 768w, https://ddtrungit.github.io/media/posts/102/responsive/centos-la-gi-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="276" width="540" alt=""></figure><div class="post__inner"><div class="post__entry"><div style="direction: ltr; border-width: 100%;"><div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 7.0784in;"><div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 7.0784in;"><p style="margin-top: 0pt; margin-bottom: 11pt; font-family: Tahoma; font-size: 27.0pt; color: #333333;"><span style="font-weight: bold; background: white;">Một số thông số kernel mẫu</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">#######        Tested in CentOS7 #######</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Reference # <a href="https://klaver.it/linux/sysctl.conf">https://klaver.it/linux/sysctl.conf</a> # <a href="https://wiki.archlinux.org/index.php/Sysctl">https://wiki.archlinux.org/index.php/Sysctl</a> # <a href="https://www.kernel.org/doc/Documentation/sysctl/">https://www.kernel.org/doc/Documentation/sysctl/</a> # <a href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt">https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt</a></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">#### Show all parameters of Linux kernel #### sysctl -a</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">#### Backup sysctl.conf before changing anything #### sysctl -a &gt; /etc/sysctl_backup.conf</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">#### Edit /etc/sysctl.conf to modify kernel parameters #### vi /etc/sysctl.conf</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">### Improving Network Performance ###</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Congestion control ## # Congestion control protocol can be changed between cubic and htcp (Hamilton TCP) # # Enable timestamps, this may cause overhead because it adds 10 bytes to each packets # # Enable window scaling (default = 1) net.ipv4.tcp_congestion_control = htcp net.ipv4.tcp_timestamps = 1 net.ipv4.tcp_window_scaling = 1 # Enable TCP SACK, which allow client to resend only lost packets, not all of them # # However, in some cases, TCP may consume more resources (CPU, RAM) and decrease network performance # net.ipv4.tcp_sack = 1</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Increase socket buffer ## # Increase Read Memory Buffer # # TCP Read Memory: Min - Default - Max # net.ipv4.tcp_rmem = 8192 87380 16777216 net.ipv4.udp_rmem_min = 16384 # Default read memory buffer of all receiving sockets (except TCP and UDP) net.core.rmem_default = 262144 net.core.rmem_max = 16777216</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Increase Write Memory Buffer # # TCP Write Memory: Min - Default - Max # net.ipv4.tcp_wmem = 8192 65536 16777216 net.ipv4.udp_wmem_min = 16384 # Default read memory buffer of all sending sockets (except TCP and UDP) net.core.wmem_default = 262144 net.core.wmem_max = 16777216</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Increase connection queue # net.core.somaxconn = 16384</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Improve packet processing queue, speed # net.core.netdev_max_backlog = 16384 net.core.dev_weight = 64</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Improve connection tracking ## # For high-loaded servers # net.nf_conntrack_max = 100000 #or net.netfilter.nf_conntrack_max = 100000</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Decrease connection timeout in netfilter table # net.netfilter.nf_conntrack_tcp_timeout_established = 600</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Improving Network Security ## # Prevent SYN Attack # net.ipv4.tcp_syncookies = 1 net.ipv4.tcp_max_syn_backlog = 4096 net.ipv4.tcp_syn_retries = 2 net.ipv4.tcp_synack_retries = 2</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Disable packet forwarding # net.ipv4.ip_forward = 0 net.ipv4.conf.all.forwarding = 0 net.ipv4.conf.default.forwarding = 0 net.ipv6.conf.all.forwarding = 0 net.ipv6.conf.default.forwarding = 0</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Disable IP source routing # net.ipv4.conf.all.accept_source_route = 0 net.ipv4.conf.default.accept_source_route = 0 net.ipv6.conf.all.accept_source_route = 0 net.ipv6.conf.default.accept_source_route = 0</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Block ICMP redirect packets to prevent MITM attacks # net.ipv4.conf.all.accept_redirects = 0 net.ipv4.conf.default.accept_redirects = 0 net.ipv4.conf.all.send_redirects = 0 net.ipv4.conf.default.send_redirects = 0</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Prevent IP spoofing ## # Enable reverse path filter to verify IPs # net.ipv4.conf.all.rp_filter = 1 net.ipv4.conf.default.rp_filter = 1 net.ipv4.conf.all.log_martians = 1 net.ipv4.conf.default.log_martians = 1</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Decrease TCP FIN timeout ## net.ipv4.tcp_fin_timeout = 7</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Decrease keep alive waiting time ## net.ipv4.tcp_keepalive_time = 300 net.ipv4.tcp_keepalive_probes = 5 net.ipv4.tcp_keepalive_intvl = 15</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Configure ICMP ## net.ipv4.icmp_echo_ignore_all = 0 # Avoid smurf attack # net.ipv4.icmp_echo_ignore_broadcasts = 1 net.ipv4.icmp_ignore_bogus_error_responses = 1</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Disable Proxy ARP # net.ipv4.conf.all.proxy_arp = 0</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Configure local port range (only if server had a lot outbound connections) # net.ipv4.ip_local_port_range = 16384 65535</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Protect against TIME WAIT ASSASSINATION followed up RFC 1337 # net.ipv4.tcp_rfc1337 = 1</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">### Filesystem Tuning ### ## Increase open file limit ## # For web/database/log servers which need a lot of open files # fs.file-max = 300000</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">### Memory Tuning ### ## Decrease swapping ## vm.swappiness = 10 vm.dirty_background_ratio = 5 vm.dirty_ratio = 10 vm.overcommit_memory = 0 vm.overcommit_ratio = 50</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## Kernel Hardening ## # Prevent buffer/stack/heap exploits # # In CentOS7/RHEL7 exec-shield has been enabled by default and removed from /proc # Use this option in CentOS 6 or other distro #kernel.exec-shield = 1 kernel.randomize_va_space = 2 # kernel.pid_max = 4194303</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;">## IPv6 ## # Disable IPv6 by default # net.ipv6.conf.all.autoconf=0 net.ipv6.conf.all.accept_ra=0 net.ipv6.conf.default.autoconf=0 net.ipv6.conf.default.accept_ra=0 ---------------------------------------</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: black;"># Reload changes # sysctl -p</p><p style="margin-top: 0pt; margin-bottom: 11pt; font-family: Calibri; font-size: 11.0pt;"><a href="https://raw.githubusercontent.com/hautph/gocit.vn/master/Tuning_Kernel.txt">https://raw.githubusercontent.com/hautph/gocit.vn/master/Tuning_Kernel.txt</a></p></div></div></div></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div></footer></div></article></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="https://ddtrungit.github.io/xac-dinh-ip-va-ung-dung-ngon-nhieu-bang-thong-nhat/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/96/676029069_1280x720.jpg" srcset="https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-xs.jpg 300w, https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-sm.jpg 480w, https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-md.jpg 768w, https://ddtrungit.github.io/media/posts/96/responsive/676029069_1280x720-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="720" width="1280" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/tip/index.html">Tip</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/xac-dinh-ip-va-ung-dung-ngon-nhieu-bang-thong-nhat/index.html" class="invert">Xác định IP và ứng dụng ngốn nhiều băng thông nhất</a></h3></header><p class="c-card__text">Muốn xác định IP hoặc ứng dụng ngốn nhiều băng thông nhất, sử dụng lệnh $ nethogs Khi nethogs đang&hellip;</p></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="https://ddtrungit.github.io/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://ddtrungit.github.io/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>