<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>TRUNG DUONG</title>
    <link href="https://ddtrungit.github.io/feed.xml" rel="self" />
    <link href="https://ddtrungit.github.io" />
    <updated>2022-06-13T15:31:41+07:00</updated>
    <author>
        <name>Duong Dinh Trung</name>
    </author>
    <id>https://ddtrungit.github.io</id>

    <entry>
        <title>Tải khóa học Hacker mũ trắng – Masters In Ethical Hacking</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/tai-khoa-hoc-hacker-mu-trang-masters-in-ethical-hacking/index.html"/>
        <id>https://ddtrungit.github.io/tai-khoa-hoc-hacker-mu-trang-masters-in-ethical-hacking/index.html</id>
            <category term="Tip"/>

        <updated>2022-06-13T15:31:41+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/114/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png" alt="" />
                    Masters In Ethical Hacking là khóa học Hacker mũ trắng được biên tập với lý thuyết và thực hành rất&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/114/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png" alt="" />
                <p><strong>Masters In Ethical Hacking là khóa học Hacker mũ trắng được biên tập với lý thuyết và thực hành rất dễ hiểu. Theo đánh giá của mình, đối với những bạn newbie chưa biết gì có thể tiếp cận với các bài thực hành làm Hacker tại đây rất dễ. Tuy là Video tiếng Anh, nhưng nhìn hình và các thao tác demo thì bạn cũng có thể làm theo được, chứ không nhất thiết là phải nghe rõ từng chữ.</strong></p>
<h2 id="ftoc-khoa-hoc-hacker-mu-trang-masters-in-ethical-hacking-co-gi-hay" class="ftwp-heading">khóa học Hacker mũ trắng – Masters In Ethical Hacking có gì hay</h2>
<figure class="aligncenter size-full wp-image-41427 entered lazyloaded"><a href="https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png" class="local-link"><img loading="lazy"  title="Tải khóa học Hacker mũ trắng - Masters In Ethical Hacking 16" src="https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png" data-is-external-image="true"  sizes="(max-width: 707px) 100vw, 707px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png 707w, https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2-300x177.png 300w" alt="khoa hoc Hacker mu trang - Masters In Ethical Hacking" width="707" height="417" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png 707w, https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2-300x177.png 300w" data-lazy-sizes="(max-width: 707px) 100vw, 707px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/khoa-hoc-Hacker-mu-trang-Masters-In-Ethical-Hacking-2.png" data-pin-no-hover="true" data-ll-status="loaded"></figure></a></p>
<div class="jnews_inline_related_post_wrapper left">
<div class="jnews_inline_related_post">
<div class="jeg_postblock_21 jeg_postblock jeg_module_hook jeg_pagination_nextprev jeg_col_2o3 jnews_module_41426_3_62a6e9e9707ff   " data-unique="jnews_module_41426_3_62a6e9e9707ff">
<div class="jeg_block_heading jeg_block_heading_7 jeg_subcat_right"> </div>
<div class="jeg_block_container">
<div class="jeg_posts jeg_load_more_flag">
<article class="jeg_post jeg_pl_sm format-standard">
<div class="jeg_postblock_content">
<div class="jeg_post_meta">
<div class="jeg_meta_date"><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);"> </span></div>
</div>
</div>
</article>
</div>
</div>
</div>
</div>
</div>
<p>Trong Masters In Ethical Hacking, sẽ hướng dẫn việc sử dụng hầu hết tất cả các công cụ hack. Điều này sẽ giúp bạn dễ dàng học hack và bạn có thể trở thành một hacker mũ trắng trong tương lai. Toàn bộ khóa học được thiết kế bởi đội ngũ chuyên gia. Với sự trợ giúp của khóa học này, bạn có thể học khóa học Ethical Hacking &amp; Cyber Security, chẳng hạn như SQL injection, Cryptography, System Hacking, &amp; BrupSuite, v.v.</p>
<div class="code-block code-block-15 ai-viewport-1 ai-viewport-2"> </div>
<p>Khóa học này bao gồm các khái niệm quan trọng về Đạo đức tấn công và An ninh mạng. Một số trong số chúng giống như:</p>
<div class="code-block code-block-1 ai-viewport-1 ai-viewport-2">
<div align="center">
<div id="passback_pc_article_mid1_728x90//300x250//336x280"></div>
</div>
</div>
<p>Nội dung của khóa học Hacker mũ trắng – Masters In Ethical Hacking gồm:</p>
<ul>
<li>Foot Printing – Truy theo dấu vết</li>
<li>IP Address</li>
<li>Virtual Lab Setting – Dựng Lab thực hành</li>
<li>Introduction To Proxy – Giới thiệu về Proxy</li>
<li>Scanning – Quét mạng</li>
<li>Enumeration – Liệt kê thông tin</li>
<li>System Hacking – Hack hệ thống</li>
<li>Virus, Trojan &amp; Backdoor – Mã độc</li>
<li>Sniffing &amp; Spoofing – Nghe lén</li>
<li>Social Engineering – Kỹ thuật xã hội</li>
<li>Dos &amp; DDos – Tấn công từ chối dịch vụ</li>
<li>Session Hijacking</li>
<li>Web Server &amp; Application Hacking – Hack Web và ứng dụng</li>
<li>Buffer Overflow</li>
<li>SQL Injection</li>
<li>Cryptography – Mật mã học</li>
<li>Mobile</li>
<li>Penetration testing – Kiểm tra xâm nhập</li>
<li>Bug Bounty</li>
</ul>
<h2 id="ftoc-download-khoa-hoc-hacker-mu-trang-masters-in-ethical-hacking" class="ftwp-heading">Download khóa học Hacker mũ trắng – Masters In Ethical Hacking</h2>
<p>Bạn có thể tải miễn phí hóa học tại đây:</p>
<p class="align-center"><a href="https://www.fshare.vn/file/MCLM4EFOW5PT" target="_blank" rel="noopener noreferrer">Download</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>How I Setup CI/CD Pipeline For Cloudflare Worker</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/how-i-setup-cicd-pipeline-for-cloudflare-worker/index.html"/>
        <id>https://ddtrungit.github.io/how-i-setup-cicd-pipeline-for-cloudflare-worker/index.html</id>
            <category term="Tip"/>

        <updated>2022-06-13T15:31:00+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/113/gitlab-cf.png" alt="" />
                    Today, most of my projects on GitHub are kept up to date with Renovate. With auto-merging enabled, I want to have&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/113/gitlab-cf.png" alt="" />
                <p>Today, most of my projects on GitHub are kept up to date with <a href="https://github.com/renovatebot/renovate">Renovate</a>. With auto-merging enabled, I want to have enough confidence that the automated dependencies update would not cause any regressions.</p>
<p>Testing Cloudflare Worker is a bit out of whack. Don’t get me wrong, I love Cloudflare Worker. However, the <a href="https://blog.cloudflare.com/unit-testing-workers-in-cloudflare-workers/">existing solution</a> out there feels a little bit unintuitive. On top of that, <a href="https://github.com/dollarshaveclub/cloudworker">dollarshaveclub/cloudworker</a> is no longer actively maintained, which is a bummer.</p>
<p><em>TL;DR: This post talks about how I set up a CI/CD pipeline for a Cloudflare Worker project using GitHub Action and <a href="https://k6.io/">Grafana k6</a>.</em></p>
<hr>
<h2><a name="overview" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#overview"></a>Overview</h2>
<p>Previously, <a href="https://jerrynsh.com/i-built-my-own-tiny-url/">I built a URL shortener clone</a> with Cloudflare Worker. Using this existing project (<a href="https://github.com/ngshiheng/atomic-url">GitHub</a> link), we shall look into setting up a CI/CD pipeline for it along with simple integration tests.</p>
<p>Our GitHub Action CI/CD pipeline is rather straightforward. The stages (jobs) are as follows:</p>
<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--RbfX-GYJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tlx6zq6yn5d4m4s8w80i.png" class="article-body-image-wrapper"><img loading="lazy" src="https://res.cloudinary.com/practicaldev/image/fetch/s--RbfX-GYJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/tlx6zq6yn5d4m4s8w80i.png" data-is-external-image="true"  alt="Example CI workflow on GitHub" width="880" height="152" loading="lazy"></a></p>
<p>Example CI workflow on GitHub</p>
<ol>
<li>Lint check or unit testing</li>
<li>Deploy to the Staging environment</li>
<li>Run the integration tests on our Staging environment</li>
<li>Run <a href="https://github.com/semantic-release/semantic-release">semantic release</a> and deploy to the Production environment</li>
</ol>
<h2><a name="wrangler-config" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#wrangler-config"></a>Wrangler Config</h2>
<p>To start, we’ll have to modify our <a href="https://github.com/ngshiheng/atomic-url/blob/v1.1.8/wrangler.toml">existing <code>wrangler.toml</code> file</a>. Remember, we need a Staging environment to deploy to run our integration test against it:</p>
<div class="highlight js-code-highlight">
<pre class="highlight toml"><code><span class="nn">[env.staging]</span>
<span class="py">name</span> <span class="p">=</span> <span class="s">"atomic-url-staging"</span>
<span class="py">workers_dev</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">kv_namespaces</span> <span class="p">=</span> <span class="p">[</span>
  <span class="err">{</span> <span class="py">binding</span> <span class="p">=</span> <span class="s">"URL_DB"</span><span class="p">,</span> <span class="py">id</span> <span class="p">=</span> <span class="s">"ca7936b380a840908c035a88d1e76584"</span> <span class="err">}</span><span class="p">,</span>
<span class="p">]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action"> </div>
</div>
</div>
<p>Here are the things to take note of:</p>
<ul>
<li><code>name</code> — Make sure that the <code>name</code> has to be unique and alphanumerical (<code>-</code> are allowed) for each environment. Let’s name our Staging environment <code>atomic-url-staging</code>.</li>
<li><code>worker_dev</code> — Our integration tests run on <code>&lt;NAME&gt;.&lt;SUBDOMAIN&gt;.workers.dev</code> endpoint. Hence, we need to deploy our Cloudflare Worker by setting <code>workers_dev = true</code> (<a href="https://developers.cloudflare.com/workers/platform/environments/#publishing-to-workersdev">reference</a>).</li>
<li><code>kv_namespaces</code> — Atomic URL uses KV as its database to store shortened URLs. Here, I chose to use a preview namespace KV as the test database. Why? Simply because it is the same development KV namespace that I use during local development (when running <code>wrangler dev</code>). Of course, you could just use a regular KV namespace. Just make sure that you’re not using Production KV <code>id</code>. <a href="https://developers.cloudflare.com/workers/wrangler/cli-wrangler/commands/#kv_namespaces">Read how to create a KV namespace</a>.</li>
</ul>
<p>Next, we’ll also need to create a Production environment to deploy to with our production KV namespace:</p>
<div class="highlight js-code-highlight">
<pre class="highlight toml"><code><span class="nn">[env.production]</span>
<span class="py">name</span> <span class="p">=</span> <span class="s">"atomic-url"</span>
<span class="py">route</span> <span class="p">=</span> <span class="s">"s.jerrynsh.com/*"</span>
<span class="py">workers_dev</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">kv_namespaces</span> <span class="p">=</span> <span class="p">[</span>
  <span class="err">{</span> <span class="py">binding</span> <span class="p">=</span> <span class="s">"URL_DB"</span><span class="p">,</span> <span class="py">id</span> <span class="p">=</span> <span class="s">"7da8f192d2c1443a8b2ca76b22a8069f"</span> <span class="err">}</span><span class="p">,</span>
<span class="p">]</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action"> </div>
</div>
</div>
<p>The Production environment section would be similar to before except — we’ll be setting <code>worker_dev = false</code> and <code>route</code> for production.</p>
<h3><a name="deployment" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#deployment"></a>Deployment</h3>
<p>To deploy manually from your local machine to their respective environment, run:</p>
<ul>
<li><code>wrangler publish -e staging</code></li>
<li><code>wrangler publish -e production</code></li>
</ul>
<p>Though, we’ll look into how to do this automatically via our CI/CD pipeline using GitHub Actions.</p>
<p>Before we move on, you may find the complete <code>wrangler.toml</code> configuration <a href="https://github.com/ngshiheng/atomic-url/blob/f1ff25a00c1430314b45dde855497b58831b8e3a/wrangler.toml">here</a>.</p>
<p>Oh, here’s a <a href="https://developers.cloudflare.com/workers/wrangler/configuration/#configure-wranglertoml">cheat sheet</a> to configure <code>wrangler.toml</code>. I highly recommend you make use of this!</p>
<h2><a name="grafana-k6" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#grafana-k6"></a>Grafana k6</h2>
<p>For integration testing, we’ll be using a tool known as k6. Generally, k6 is used as a tool for performance and load testing. Now, bear with me, we’re not going to integrate any load tests into our CI/CD pipeline; not today.</p>
<p>Here, we’ll be running <a href="https://k6.io/docs/test-types/smoke-testing/">smoke tests</a> for this project whenever new commits are pushed to our <code>main</code> branch. A smoke test is essentially a type of integration test that performs a sanity check on a system.</p>
<p>In this case, running a smoke test is sufficient enough for me to determine that our system is deployed without any regression and can run on minimal load.</p>
<h3><a name="what-to-test" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#what-to-test"></a>What to test</h3>
<p>Basically, here are a couple of things that we want to check as part of our smoke test for our URL shortener app in <a href="https://k6.io/docs/using-k6/tags-and-groups/#groups">groups</a>:</p>
<ul>
<li>The main page should load as expected with a 200 response status</li>
</ul>
<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">group</span><span class="p">(</span><span class="dl">"</span><span class="s2">visit main page</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">BASE_URL</span><span class="p">);</span>

    <span class="nx">check</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">is status 200</span><span class="dl">"</span><span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">verify homepage text</span><span class="dl">"</span><span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span>
            <span class="nx">r</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span>
                <span class="dl">"</span><span class="s2">A URL shortener POC built using Cloudflare Worker</span><span class="dl">"</span><span class="p">,</span>
            <span class="p">),</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action"> </div>
</div>
</div>
<ul>
<li>Our main POST API endpoint <code>/api/url</code> should create a short URL with the original URL</li>
</ul>
<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">group</span><span class="p">(</span><span class="dl">"</span><span class="s2">visit rest endpoint</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
        <span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}</span><span class="s2">/api/url`</span><span class="p">,</span>
        <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">originalUrl</span><span class="p">:</span> <span class="nx">DUMMY_ORIGINAL_URL</span> <span class="p">}),</span>
        <span class="p">{</span> <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">);</span>

    <span class="nx">check</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">is status 200</span><span class="dl">"</span><span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">verify createShortUrl</span><span class="dl">"</span><span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="p">{</span> <span class="nx">urlKey</span><span class="p">,</span> <span class="nx">shortUrl</span><span class="p">,</span> <span class="nx">originalUrl</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
            <span class="nx">shortenLink</span> <span class="o">=</span> <span class="nx">shortUrl</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">urlKey</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">&amp;&amp;</span> <span class="nx">originalUrl</span> <span class="o">===</span> <span class="nx">DUMMY_ORIGINAL_URL</span><span class="p">;</span>
        <span class="p">},</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action"> </div>
</div>
</div>
<ul>
<li>Make sure that when we visit the generated short URL, it redirects us to the original URL</li>
</ul>
<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">group</span><span class="p">(</span><span class="dl">"</span><span class="s2">visit shortUrl</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">shortenLink</span><span class="p">);</span>

    <span class="nx">check</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">is status 200</span><span class="dl">"</span><span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">verify original url</span><span class="dl">"</span><span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">url</span> <span class="o">===</span> <span class="nx">DUMMY_ORIGINAL_URL</span><span class="p">,</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action"> </div>
</div>
</div>
<p>Finally, we configure out <code>BASE_URL</code> to <a href="https://github.com/ngshiheng/atomic-url/blob/f1ff25a00c1430314b45dde855497b58831b8e3a/scripts/test.js#L15">point to our newly created Staging environment</a> in the previous section.</p>
<p>To test locally, simply run <code>k6 path/to/test.js</code>. That’s all! You may find the <a href="https://github.com/ngshiheng/atomic-url/blob/f1ff25a00c1430314b45dde855497b58831b8e3a/scripts/test.js">full test script here</a>.</p>
<p>In case you are thinking about running load tests, read <a href="https://k6.io/blog/monthly-visits-concurrent-users/">how to determine concurrent users</a> in your load test.</p>
<h2><a name="github-actions" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#github-actions"></a>GitHub Actions</h2>
<p>I’ll be glossing over this section as it is pretty straightforward. You may refer to the final <a href="https://github.com/ngshiheng/atomic-url/blob/f1ff25a00c1430314b45dde855497b58831b8e3a/.github/workflows/ci.yml">GitHub Actions workflow file here</a>.</p>
<p>Let’s piece together everything we have. Below are the GitHub Actions that we’ll need to use:</p>
<ul>
<li><a href="https://github.com/cloudflare/wrangler-action/tree/1.3.0">wrangler-action</a> — For deploying Cloudflare Worker using Wrangler CLI</li>
<li><a href="https://github.com/marketplace/actions/k6-load-test?version=v0.2.0">k6-action</a> — For running k6</li>
</ul>
<p>One thing to note about the workflow file — to make a job depend (need) on another job, we’ll make use of the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idneeds"><code>need syntax</code></a>.</p>
<h3><a name="actions-secrets" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#actions-secrets"></a>Actions Secrets</h3>
<p>This project requires 2 Actions secrets:</p>
<ol>
<li><code>CF_API_TOKEN</code> — To be used by Wrangler GitHub Action to automatically publish our Cloudflare Worker to its respective environment. You can <a href="https://dash.cloudflare.com/profile/api-tokens">create your API token</a> using the <code>Edit Cloudflare Workers</code> template.</li>
<li><code>NPM_TOKEN</code> — This project also uses <a href="https://github.com/semantic-release/npm">semantic-release</a> to automatically publish to <a href="https://www.npmjs.com/">NPM</a>. To enable this, you will need to create an <code>NPM_TOKEN</code> via <a href="https://docs.npmjs.com/getting-started/working_with_tokens#how-to-create-new-tokens">npm create token</a>.</li>
</ol>
<p>To add it to your GitHub repository secrets, check out <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository">this guide</a>.</p>
<p>If you had taken a look at the final workflow file, you may have noticed the syntax <code>${{ secrets.GITHUB_TOKEN }}</code> and wondered why I didn’t mention anything about adding <code>GITHUB_TOKEN</code> to our project Actions secrets. Turns out, it is <a href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication#about-the-github_token-secret">automatically created and added to all of your workflows</a>.</p>
<hr>
<h2><a name="closing-remark" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#closing-remark"></a>Closing Remark</h2>
<p>Understandably, serverless platforms are generally known to be hard to test and debug. However, that doesn’t mean that we should ignore it.</p>
<p>So, what’s next? Right on top of my head, we could do better. Here are a couple of improvements that we can make:</p>
<ol>
<li>Add a job/stage that automatically rolls back and reverts commit when the smoke tests fail</li>
<li>Create an individual testing environment upon PR creation so that we can run smoke tests on them</li>
<li>Probably overkill for this project — implementing <a href="https://octopus.com/docs/deployments/patterns/canary-deployments">canary deployment</a> sounds like a good challenge</li>
</ol>
<h2><a name="references" href="https://dev.to/jerrynsh/how-i-setup-cicd-pipeline-for-cloudflare-worker-2kha#references"></a>References</h2>
<p>If you’re looking into unit testing Cloudflare Workers, here are my recommendations:</p>
<ul>
<li><a href="https://findwork.dev/blog/testing-cloudflare-workers/">https://findwork.dev/blog/testing-cloudflare-workers/</a></li>
<li><a href="https://blog.cloudflare.com/unit-testing-workers-in-cloudflare-workers/">https://blog.cloudflare.com/unit-testing-workers-in-cloudflare-workers/</a></li>
<li><a href="https://blog.cloudflare.com/unit-testing-worker-functions/">https://blog.cloudflare.com/unit-testing-worker-functions/</a></li>
</ul>
<p>Here’s a decent video about setting up an ideal yet practical CI/CD pipeline:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=OPwU3UWCxhw">https://www.youtube.com/watch?v=OPwU3UWCxhw</a></li>
</ul>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/cach-dung-hack-tools-tren-trinh-duyet-de-hack-serverwebsite/index.html"/>
        <id>https://ddtrungit.github.io/cach-dung-hack-tools-tren-trinh-duyet-de-hack-serverwebsite/index.html</id>
            <category term="Tip"/>

        <updated>2022-06-13T15:30:19+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/112/1-26.jpg" alt="" />
                    Cài đặt tiện ích Hack-Tools trên FireFox và Chrome Quá trình cài đặt tiện ích Hack-Tools cực kỳ đơn giản.
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/112/1-26.jpg" alt="" />
                <h2 id="ftoc-cai-dat-tien-ich-hack-tools-tren-firefox-va-chrome" class="ftwp-heading">Cài đặt tiện ích Hack-Tools trên FireFox và Chrome</h2>
<p>Quá trình cài đặt tiện ích Hack-Tools cực kỳ đơn giản. Bạn chỉ cần <a href="https://anonyviet.com/tieptucdidentrangmoi/?url=https%3A%2F%2Faddons.mozilla.org%2Fen-US%2Ffirefox%2Faddon%2Fhacktools%2F" target="_blank" rel="noopener external nofollow" class="ext-link" onclick="this.target='_blank';">nhấp vào đây</a> nếu dùng Firefox hoặc <a href="https://anonyviet.com/tieptucdidentrangmoi/?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fhack-tools%2Fcmbndhnoonmghfofefkcccljbkdpamhi" target="_blank" rel="noopener external nofollow" class="ext-link" onclick="this.target='_blank';">nhấp vào đây</a> nếu dùng Chrome và nhấn Add to Firefox hoặc Chrome để cài đặt tiện ích này.</p>
<div class="code-block code-block-15 ai-viewport-1 ai-viewport-2"> </div>
<figure class="size-full wp-image-41688 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 56" src="https://anonyviet.com/wp-content/uploads/2022/05/1-26.jpg" data-is-external-image="true"  sizes="(max-width: 647px) 100vw, 647px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/1-26.jpg 647w, https://anonyviet.com/wp-content/uploads/2022/05/1-26-300x174.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 49" width="647" height="375" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/1-26.jpg 647w, https://anonyviet.com/wp-content/uploads/2022/05/1-26-300x174.jpg 300w" data-lazy-sizes="(max-width: 647px) 100vw, 647px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/1-26.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<div class="code-block code-block-1 ai-viewport-1 ai-viewport-2">
<div align="center">
<div id="passback_pc_article_mid1_728x90//300x250//336x280"></div>
</div>
</div>
<h2 id="ftoc-reverse-shell" class="ftwp-heading">Reverse Shell</h2>
<p>Bạn chỉ cần cung cấp cho Hack-Tools địa chỉ IP localhost và nó sẽ tự động tạo ra tất cả các shell đảo ngược cần thiết mà chúng ta có thể sử dụng cho <a href="https://anonyviet.com/red-team-va-blue-team-trong-an-ninh-mang-la-gi/" class="local-link">red team</a>, tìm lỗi, thử thách CTF.</p>
<figure class="size-full wp-image-41689 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 57" src="https://anonyviet.com/wp-content/uploads/2022/05/2-27.jpg" data-is-external-image="true"  sizes="(max-width: 586px) 100vw, 586px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/2-27.jpg 586w, https://anonyviet.com/wp-content/uploads/2022/05/2-27-300x226.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 50" width="586" height="442" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/2-27.jpg 586w, https://anonyviet.com/wp-content/uploads/2022/05/2-27-300x226.jpg 300w" data-lazy-sizes="(max-width: 586px) 100vw, 586px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/2-27.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<p>Nhưng nhiêu đó chưa phải là tất, vì nó có thể tạo ra nhiều lớp reverse shell mà mình không thể cho bạn xem cùng một lúc được.</p>
<figure class="size-full wp-image-41690 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 58" src="https://anonyviet.com/wp-content/uploads/2022/05/3-27.jpg" data-is-external-image="true"  sizes="(max-width: 572px) 100vw, 572px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/3-27.jpg 572w, https://anonyviet.com/wp-content/uploads/2022/05/3-27-300x240.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 51" width="572" height="457" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/3-27.jpg 572w, https://anonyviet.com/wp-content/uploads/2022/05/3-27-300x240.jpg 300w" data-lazy-sizes="(max-width: 572px) 100vw, 572px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/3-27.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<div class="code-block code-block-2 ai-viewport-1 ai-viewport-2">
<div align="center">
<div id="passback_pc_article_mid2_728x90//300x250//336x280"></div>
</div>
</div>
<h2 id="ftoc-php-reverse-shell" class="ftwp-heading"><strong>PHP Reverse Shell</strong></h2>
<p>Nếu ứng dụng web dễ bị tấn công bởi lỗ hổng <a href="https://anonyviet.com/cach-khai-thac-lo-hong-file-upload/" class="local-link">file upload</a> thì chúng ta có thể sử dụng “pentestmonkey reverse shell” và lấy phiên <a href="https://anonyviet.com/tieptucdidentrangmoi/?url=https%3A%2F%2Fviblo.asia%2Fp%2Fhieu-ro-ve-reverse-shells-LzD5ddE45jY" target="_blank" rel="noopener external nofollow" class="ext-link" onclick="this.target='_blank';">reverse shell</a> tương tác trên máy đích.</p>
<figure class="size-full wp-image-41691 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 59" src="https://anonyviet.com/wp-content/uploads/2022/05/4-26.jpg" data-is-external-image="true"  sizes="(max-width: 584px) 100vw, 584px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/4-26.jpg 584w, https://anonyviet.com/wp-content/uploads/2022/05/4-26-300x225.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 52" width="584" height="438" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/4-26.jpg 584w, https://anonyviet.com/wp-content/uploads/2022/05/4-26-300x225.jpg 300w" data-lazy-sizes="(max-width: 584px) 100vw, 584px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/4-26.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-remote-code-execution" class="ftwp-heading"><strong>Remote Code Execution</strong></h2>
<p>Tương tự như vậy, nếu chúng ta tìm thấy một lỗ hổng RCE trong một ứng dụng web thì chúng ta có thể sử dụng payload như vậy để lấy cmd shell của máy mục tiêu.</p>
<figure class="size-full wp-image-41692 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 60" src="https://anonyviet.com/wp-content/uploads/2022/05/5-23.jpg" data-is-external-image="true"  sizes="(max-width: 531px) 100vw, 531px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/5-23.jpg 531w, https://anonyviet.com/wp-content/uploads/2022/05/5-23-300x257.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 53" width="531" height="455" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/5-23.jpg 531w, https://anonyviet.com/wp-content/uploads/2022/05/5-23-300x257.jpg 300w" data-lazy-sizes="(max-width: 531px) 100vw, 531px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/5-23.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-tty-spawn-shell" class="ftwp-heading"><strong>TTY Spawn Shell</strong></h2>
<p>Thường thì chúng ta lấy shell của máy đích mà không có TTY, nhưng thông qua lệnh đã cho, chúng ta có thể lấy tty shell.</p>
<figure class="size-full wp-image-41693 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 61" src="https://anonyviet.com/wp-content/uploads/2022/05/6-23.jpg" data-is-external-image="true"  sizes="(max-width: 596px) 100vw, 596px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/6-23.jpg 596w, https://anonyviet.com/wp-content/uploads/2022/05/6-23-300x229.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 54" width="596" height="454" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/6-23.jpg 596w, https://anonyviet.com/wp-content/uploads/2022/05/6-23-300x229.jpg 300w" data-lazy-sizes="(max-width: 596px) 100vw, 596px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/6-23.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-lfi" class="ftwp-heading"><strong>LFI</strong></h2>
<p>Local File Inclusion là một lỗ hổng được tìm thấy trong các ứng dụng web. Nếu bạn là người mới bắt đầu hoặc không có nhiều thời gian, việc tìm lỗ hổng LFI trong ứng dụng web có thể hữu ích cho bạn.</p>
<div class="code-block code-block-6 ai-viewport-1 ai-viewport-2">
<div align="center">
<div id="passback_pc_article_mid1_728x90//300x250//336x280"></div>
</div>
</div>
<figure class="size-full wp-image-41694 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 62" src="https://anonyviet.com/wp-content/uploads/2022/05/8-17.jpg" data-is-external-image="true"  sizes="(max-width: 583px) 100vw, 583px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/8-17.jpg 583w, https://anonyviet.com/wp-content/uploads/2022/05/8-17-300x231.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 55" width="583" height="449" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/8-17.jpg 583w, https://anonyviet.com/wp-content/uploads/2022/05/8-17-300x231.jpg 300w" data-lazy-sizes="(max-width: 583px) 100vw, 583px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/8-17.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-xss" class="ftwp-heading"><strong>XSS</strong></h2>
<p>XSS là viết tắt của cross site scripting, là một loại lỗ hổng bảo mật. Tiện ích này cũng cung cấp cho bạn payload để khai thác lỗ hổng XSS.</p>
<figure class="size-full wp-image-41695 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 63" src="https://anonyviet.com/wp-content/uploads/2022/05/9-17.jpg" data-is-external-image="true"  sizes="(max-width: 587px) 100vw, 587px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/9-17.jpg 587w, https://anonyviet.com/wp-content/uploads/2022/05/9-17-300x232.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 56" width="587" height="453" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/9-17.jpg 587w, https://anonyviet.com/wp-content/uploads/2022/05/9-17-300x232.jpg 300w" data-lazy-sizes="(max-width: 587px) 100vw, 587px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/9-17.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-sql-injection" class="ftwp-heading"><strong>SQL Injection</strong></h2>
<p>SQL injection đứng đầu trong tất cả các lỗ hổng injection và tiện ích này cũng cung cấp cho chúng ta các payloads có thể khai thác lỗ hổng SQL injection.</p>
<figure class="size-full wp-image-41696 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 64" src="https://anonyviet.com/wp-content/uploads/2022/05/10-16.jpg" data-is-external-image="true"  sizes="(max-width: 592px) 100vw, 592px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/10-16.jpg 592w, https://anonyviet.com/wp-content/uploads/2022/05/10-16-300x229.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 57" width="592" height="452" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/10-16.jpg 592w, https://anonyviet.com/wp-content/uploads/2022/05/10-16-300x229.jpg 300w" data-lazy-sizes="(max-width: 592px) 100vw, 592px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/10-16.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-base64-encoder-and-decoder" class="ftwp-heading"><strong>Base64 Encoder and Decoder</strong></h2>
<p>Thường thì mình sử dụng ứng dụng hoặc trang web của bên thứ ba khác để mã hóa hoặc giải mã trong thử thách CTF, nhưng bạn thậm chí có thể làm như vậy thông qua tiện ích mở rộng này.</p>
<figure class="size-full wp-image-41697 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 65" src="https://anonyviet.com/wp-content/uploads/2022/05/11-15.jpg" data-is-external-image="true"  sizes="(max-width: 595px) 100vw, 595px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/11-15.jpg 595w, https://anonyviet.com/wp-content/uploads/2022/05/11-15-300x226.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 58" width="595" height="449" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/11-15.jpg 595w, https://anonyviet.com/wp-content/uploads/2022/05/11-15-300x226.jpg 300w" data-lazy-sizes="(max-width: 595px) 100vw, 595px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/11-15.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-hash-generators" class="ftwp-heading"><strong>Hash Generators</strong></h2>
<p>Bạn có thể sử dụng tính năng này để mã hoá văn bản của riêng mình bằng các kiểu mã hoá khác nhau như MD5.<figure class="size-full wp-image-41698 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 66" src="https://anonyviet.com/wp-content/uploads/2022/05/12-15.jpg" data-is-external-image="true"  sizes="(max-width: 553px) 100vw, 553px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/12-15.jpg 553w, https://anonyviet.com/wp-content/uploads/2022/05/12-15-300x238.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 59" width="553" height="438" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/12-15.jpg 553w, https://anonyviet.com/wp-content/uploads/2022/05/12-15-300x238.jpg 300w" data-lazy-sizes="(max-width: 553px) 100vw, 553px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/12-15.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<h2 id="ftoc-url-encoder-decoder" class="ftwp-heading"><strong>URL Encoder / Decoder</strong></h2>
<p>Tính năng này cho phép chúng ta mã hóa văn bản thuần túy ở dạng mã hóa URL và giải mã mã hóa URL thành văn bản thuần túy.</p>
<figure class="size-full wp-image-41699 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 67" src="https://anonyviet.com/wp-content/uploads/2022/05/13-11.jpg" data-is-external-image="true"  sizes="(max-width: 590px) 100vw, 590px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/13-11.jpg 590w, https://anonyviet.com/wp-content/uploads/2022/05/13-11-300x228.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 60" width="590" height="449" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/13-11.jpg 590w, https://anonyviet.com/wp-content/uploads/2022/05/13-11-300x228.jpg 300w" data-lazy-sizes="(max-width: 590px) 100vw, 590px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/13-11.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<div class="code-block code-block-3 ai-viewport-1 ai-viewport-2">
<div align="center">
<div id="passback_pc_article_below_728x90//300x250//336x280"></div>
</div>
</div>
<h2 id="ftoc-template-injections" class="ftwp-heading"><strong>Template Injections</strong></h2>
<p>Nếu bạn đã tìm thấy lỗ hổng template injection thì bạn có thể sử dụng tất cả các payload mà tiện ích cung cấp để tấn công lỗ hổng này.</p>
<figure class="size-full wp-image-41700 aligncenter entered lazyloaded"><img loading="lazy"  title="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 68" src="https://anonyviet.com/wp-content/uploads/2022/05/14-10.jpg" data-is-external-image="true"  sizes="(max-width: 582px) 100vw, 582px" srcset="https://anonyviet.com/wp-content/uploads/2022/05/14-10.jpg 582w, https://anonyviet.com/wp-content/uploads/2022/05/14-10-300x228.jpg 300w" alt="Cách dùng Hack-Tools trên trình duyệt để Hack Server/Website 61" width="582" height="442" data-lazy-srcset="https://anonyviet.com/wp-content/uploads/2022/05/14-10.jpg 582w, https://anonyviet.com/wp-content/uploads/2022/05/14-10-300x228.jpg 300w" data-lazy-sizes="(max-width: 582px) 100vw, 582px" data-lazy-src="https://anonyviet.com/wp-content/uploads/2022/05/14-10.jpg" data-pin-no-hover="true" data-ll-status="loaded"></figure>
<p>Có thể nói ngoài Hack Bar thì Hack-Tools là tiện ích được nhiều Hacker sử dụng nhất để khai thác lỗ hổng Website cũng như máy chủ có điểm yếu về bảo mật. Bạn có thể sử dụng để chơi CTF hoặc kiểm thử hệ thống của mình xem sao.</p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Hiểu rõ về quyền truy cập tệp trong linux</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/hieu-ro-ve-quyen-truy-cap-tep-trong-linux/index.html"/>
        <id>https://ddtrungit.github.io/hieu-ro-ve-quyen-truy-cap-tep-trong-linux/index.html</id>
            <category term="Tip"/>

        <updated>2022-06-13T15:29:39+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/111/setfacl.webp" alt="" />
                    Khi làm việc với điều hành Linux thi thoảng bạn nhận được message tựa tựa thế này 'Permission denied' và&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/111/setfacl.webp" alt="" />
                <p>Khi làm việc với điều hành Linux thi thoảng bạn nhận được message tựa tựa thế này 'Permission denied' và bạn thường sẽ lên mạng tìm cách sửa hoặc sẽ sử dụng kiểu như 'sudo chmod -R 777' hoặc 'chmod 777' để giải quyết, tuy nhiên bạn đã thực sự hiểu về những câu lên trên? Bài viết này sẽ giúp bạn hiểu rõ những câu lệnh đó. Để hiểu hơn về bài viết bạn nên nhớ lại hoặc tìm hiểu một số kiến thức như</p>
<ol>
<li>Chuyển số thập phân sang nhị phân hoặc ngược lại</li>
<li>Phép bù của một số nhị phân</li>
<li>Phép toán &amp; giữa hai số nhị phân</li>
</ol>
<h1 id="_1-gioi-thieu-quyen-truy-xuat-0">1. Giới thiệu quyền truy xuất</h1>
<p>Quyền là thuộc tính của tệp và thư mục. Nó cho biết từng đối tượng người dùng (chủ sở hữu - owner, người cùng nhóm - group, người dùng khác - other) có quyền gì (đọc - read, ghi - write, thực thi - execute) trên tệp và thư mục. Linux sử dụng 9 bit cho việc này, trong đó 3 bit đầu cho biết quyền đọc, ghi, thực thi của owner, 3 bit tiếp theo cho biết quyền của group, 3 bit cuối cho biết quyền của other. Ví dụ, 111110100 hay rwxrw-r-- cho biết owner có cả ba quyền, group có thể đọc và ghi nhưng không được thực thi, other chỉ được đọc. Trong các lệnh, 3 bit xác định quyền cho một đối tượng người dùng được biểu diễn bằng một số nguyên (có giá trị từ 0 đến 7), quyền được biểu diễn bằng ba số nguyên liên tiếp. Ví dụ, 764 là biểu diễn của rwxrw-r-- ở trên.</p>
<h1 id="_2-quyen-cho-tep-va-thu-muc-duoc-tao-moi-1">2. Quyền cho tệp và thư mục được tạo mới</h1>
<p>Với các tệp và thu mục được tạo mới, quyền được xác định dựa trên quyền cơ sở (base permission) và <code>user mask</code>.</p>
<p>Base permission được thiết lập sẵn, không thể thay đổi</p>
<ul>
<li>Đối với file thông thường giá trị BS là 666 (111 111 110) (rw-rw-rw-)</li>
<li>Đối với thư mục (file đặc biệt) giá trị BS là 777 (111 111 111) (rwxrwxrwx)</li>
</ul>
<p>User mask sẽ “che đi” một số bit trong Base Permission để tạo ra quyền truy cập chính thức cho file (tương tự như cơ chế của subnet mask). Cụ thể, quyền truy cập được tính bằng “Base permission” &amp; “biểu diễn bù 1 của user mask”. Ví dụ, Base Permission là 666 (tức 110110110 khi chuyển sang dạng nhị phân), nên nếu giá trị user mask là 022 (có dạng nhị phân là 000010010 =&gt; dạng bù 1 của nó thì chuyển 1-&gt;0, 0-&gt;1 nên ta được 111101101) thì quyền truy nhập chính thức của file sẽ là:</p>
<p><code>110 110 110 &amp; 111 101 101 = 110 100 100 = 644 (rw-r–r–)</code></p>
<p>Có thể tính nhanh quyền truy xuất tệp và thư mục theo các công thức sau:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">Permit of file = 666 - umask
Permit of directory = 777 - umask
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="Permit of file = 666 - umask
Permit of directory = 777 - umask
"></button></div>
<p>Giá trị user mask mặc định cho người dùng thông thường là <strong>002</strong></p>
<p>Với mask này thì quyền hạn truy cập mặc định cho thư mục là <strong>775</strong> và file là <strong>664</strong></p>
<p>Giá trị mask mặc định cho root là <strong>022</strong></p>
<p>Với mask này thì quyền hạn truy cập mặc định cho thư mục là <strong>755</strong> và file là <strong>644</strong></p>
<p>Sử dụng chương trình <strong>umask</strong> để thay đổi user mask. <strong>Các tệp và thư mục được tạo ra sau lệnh umask sẽ chịu tác động của giá trị mask mới.</strong></p>
<h1 id="_3-thay-doi-quyen-cua-tep-va-thu-muc-da-ton-tai-2">3. Thay đổi quyền của tệp và thư mục đã tồn tại</h1>
<p>Có thể sử dụng chương trình <strong>umask</strong> để thay đổi user mask, sau đó dùng chương trình touch để cập nhật quyền của tệp theo user mask mới . Dưới đây là một ví dụ minh họa việc giá trị user mask quyết định các quyền hạn trên file.txt như thế nào.</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">umask 077
touch test_file.txt
ls -l test_file.txt

&gt; -rw——- 1 uit uit 0 2020-02-01 11:10 test_file.txt
</code></pre>
<button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="umask 077
touch test_file.txt
ls -l test_file.txt

&gt; -rw——- 1 uit uit 0 2020-02-01 11:10 test_file.txt
"></button></div>
<p>Note: <em>Cơ chế làm việc của umask khiến chúng ta không thể tạo ra các file với quyền execute. Vì Base permission của file luôn là 666, tức các bit ứng với quyền execute đều bằng 0, nên bất kể giá trị mask bằng bao nhiêu thì quyền của file đều không có execute.</em></p>
<p>Cách khác để thay đổi quyền của tệp và thư mục đã tồn tại là sử dụng chmod. Sử dụng chmod có thể thêm quyền thực thi cho tệp và thư mục.</p>
<p><code>chmod [OPTION] MODE FILE</code></p>
<p>trong đó:</p>
<ul>
<li>
<p>OPTION hay được dùng nhất là -R hoặc --recursive (đệ quy) khi muốn áp dụng quyền cho tất cả tệp và các thư mục con.</p>
</li>
<li>
<p>MODE cho biết đối tượng người dùng nào (u: user sở hữu; g: group; o: other, a: all) được cấp/thu hồi/gán (+-=) quyền gì (rwxXst hoặc [0-7]+)</p>
</li>
<li>
<p>File là file hoặc folder bạn muốn thay đổi quyền</p>
</li>
</ul>
<p>Đến đây ta có thể hiểu tại sao ta lại cần sử dụng chmod khi có lỗi 'File deny permission', và tại sao lại là -R. Chúng ta cùng tìm hiểu thêm qua một vài ví dụ:</p>
<ul>
<li>
<p>Thêm quyền ghi tệp files1.txt cho người dùng hiện tại: <code>chmod u+w file1.txt</code></p>
</li>
<li>
<p>Thêm đủ các quyền cho tất cả các đối tượng người dùng: <code>chmod a+rwx file1.txt</code> hoặc <code>chmod +777 file1.txt</code></p>
</li>
<li>
<p>Thu cả ba quyền của người dùng khác: <code>chmod 770 file1.tx</code></p>
</li>
<li>
<p>Thu quyền thực thi của người dùng nhóm: <code>chmod g-x file1.txt</code></p>
</li>
</ul>
<h1 id="_4-thay-doi-chu-so-huu-cua-tep-va-thu-muc-3">4. Thay đổi chủ sở hữu của tệp và thư mục</h1>
<p>Người tạo ra tệp hay thư mục là chủ sở hữu (owner) mặc định của tệp hay thư mục. Quyền sở hữu của tệp hay thư mục còn thuộc owning group. Owner hoặc root có thể thay đổi chủ sở hữu của tệp và thư mục bằng dùng chương trình chown.</p>
<p><code>chown [OPTION] [OWNER][:[GROUP]] FILE</code></p>
<p>Ví dụ:</p>
<ul>
<li>
<p>Thay owner của /lab cho root: <code>chown root /lab</code></p>
</li>
<li>
<p>Thay owner của /lab cho root, đồng thời chuyển quyền sở hữu về nhóm staff: <code>chown root:staff /lab</code></p>
</li>
<li>
<p>Thay owner của /lab cùng các tệp và thư mục con cho root: <code>chown -hR root /lab</code></p>
</li>
</ul>
<h1 id="_5-suid-sgid-sticky-bit-4">5. SUID, SGID, Sticky bit</h1>
<p>Ngoài 9 bits cơ bản xác định các quyền rwx của owner, group và other, Linux sử dụng 3 bit khác để định nghĩa quyền trên tệp và thư mục. Các bit này lần lượt là SUID, SGID, Sticky. Trong các lệnh, một số nguyên nữa có giá trị từ 0 đến 7 được dùng để xác định ba quyền này. Ví dụ, trong lệnh</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">chmod 6750 file1.txt
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="chmod 6750 file1.txt
"></button></div>
<p>số 6 (nhị phân là 110) đầu tiên trong quyền xác định SUID, SGID được bật, sticky không được bật.</p>
<p>Ý nghĩa của ba bit SUID, SGID, Sticky được giải thích lần lượt như sau.</p>
<h2 id="_suid-set-owner-user-id-up-on-execution-5"><strong>SUID</strong> (<strong>S</strong>et owner <strong>U</strong>ser <strong>ID</strong> up on execution)</h2>
<p>Thông thường, khi một chương trình/tệp/lệnh chạy, nó sử dụng các quyền của người dùng hiện tại, hay người dùng chạy nó. Nếu SUID được đặt, chương trình sẽ sử dụng quyền của owner chứ không phải quyền của người dùng hiện tại. Ví dụ, owner của /etc/passwd, /etc/shadow là root. Người dùng thông thường không có quyền ghi các tệp này. Nếu các tệp này không được đặt quyền SUID, khi người dùng chạy lệnh passwd sẽ xuất hiện lỗi do không mở và ghi vào tệp /etc/shadow được. Ngược lại, khi các tệp này được đặt quyền SUID, người dùng thông thường cũng có thể chạy lệnh passwd.</p>
<p>Ví dụ</p>
<ul>
<li>Đặt quyền SUID của tệp cho người dùng hiện tại: <code>chmod u+s file1.txt</code> hoặc <code>chmod 4750 file1.txt</code></li>
<li>Bỏ quyền SUID trên tệp đối với người dùng hiện tại: <code>chmod u-s file1.txt</code></li>
<li>Để tìm các tệp có quyền SUID, chạy lệnh: <code>find / -perm +4000</code></li>
<li>Kiểm tra bit SUID được bật hay không bằng cách chạy: <code>ls -l files.txt</code></li>
</ul>
<p>Khi SUID được bật, bit x của owner được hiển thị là s nếu owner có quyền thực thi . Nếu owner không có quyền thực thi, bit x của owner được hiển thị là S. Ví dụ, -rwSrw-r-- có nghĩa là bit SUID đã được bật nhưng bit x của owner không được bật, -rwsrw-r-- có nghĩa là bit SUID đã được bật và bit x của owner được bật, rwxrw-r-- nghĩa là bit SUID không được bật và owner có quyền thực thi.</p>
<h2 id="_sgid-set-group-id-up-on-execution-6">SGID (Set Group ID up on execution)</h2>
<p>Tương tự SUID, nhưng thay owner là group. Nếu SGID được đặt, chương trình sẽ sử dụng quyền của group, chứ không phải quyền của người dùng hiện tại.</p>
<p>Sử dụng chmod để đặt quyền SGID cho tệp như các ví dụ sau: <code>chmod g+s file1.txt</code> hoặc <code>chmod 2750 file1.txt</code></p>
<p>Bỏ quyền SGID, như ví dụ sau: <code>chmod g-s file1.txt</code></p>
<p>Để tìm các tệp có quyền SGID, chạy lệnh: <code>find / -perm +2000</code></p>
<p>Kiểm tra bit SGID được bật hay không bằng cách chạy: <code>ls -l files.txt</code></p>
<p>Khi SGID được bật, bit x của group được hiển thị là s nếu group có quyền thực thi. Nếu group không có quyền thực thi, bit x của group được hiển thị là S. Ví dụ, -rwxrwSr-- có nghĩa là bit SGID đã được bật nhưng bit x của group không được bật, -rwxrwsr-- có nghĩa là bit SGID đã được bật và bit x của group được bật, rwxrwxr-- nghĩa là bit SGID không được bật và owner có quyền thực thi.</p>
<h2 id="_sticky-bit-7">Sticky bit</h2>
<p>Sticky bit áp dụng cho thư mục. Nếu bit này được bật, chỉ owner và root có thể xóa nội dung của thư mục. Sử dụng bit này để thiết lập cấu hình ngăn người dùng xóa dữ liệu của người khác.</p>
<p>Ví dụ:</p>
<ul>
<li>
<p>Bật sticky bit trên thư mục /important: <code>chmod o+t /important</code> hoặc <code>chmod +t /important</code> hoặc <code>chmod 1757 /important</code></p>
</li>
<li>
<p>Tắt sticky bit trên thư mục /lab: <code>chmod o-t /important</code></p>
</li>
<li>
<p>Để tìm các tệp có quyền sticky, chạy lệnh: <code>find / -perm +1000</code></p>
</li>
</ul>
<p>Kiểm tra bit sticky được bật hay không bằng cách chạy: <code>ls -l files.txt</code></p>
<p>Khi sticky được bật, bit x của other được hiển thị là t nếu other có quyền thực thi. Nếu other không có quyền thực thi, bit x của other được hiển thị là T. Ví dụ, -rwxrw-r-T có nghĩa là sticky đã được bật nhưng bit x của other không được bật.</p>
<h1 id="_6-access-control-list-8">6. Access Control List</h1>
<p>ACLs là cách khác để xác định quyên trên tệp và thư mục. Chúng cho phép gán quyền cho một người dùng hoặc một nhóm bất kỳ, thậm chí không tương ứng với owner hoặc owning group. ACLs hỗ trợ các hệ thống file ReiserFS, Ext2, Ext3, JFS, XFS. Một tệp hoặc thư mục có thể có nhiều ACL.</p>
<p>Dùng ls -dl để kiểm tra quyền:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-bash" tabindex="0" data-filename=""><code class=" language-bash">$ <span class="token function">ls</span> -dl mydir/

<span class="token operator">&gt;</span> drwxr-xr-x <span class="token number">2</span> quanta quanta <span class="token number">4096</span> <span class="token number">2007</span>-12-29 <span class="token number">22</span>:53 mydir/
</code></pre>
<button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="$ ls -dl mydir/

&gt; drwxr-xr-x 2 quanta quanta 4096 2007-12-29 22:53 mydir/
"></button></div>
<p>Kiểm tra trạng thái khởi đầu của ACL:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-bash" tabindex="0" data-filename=""><code class=" language-bash">$ getfacl mydir/
<span class="token comment"># file: mydir</span>
<span class="token comment"># owner: quanta</span>
<span class="token comment"># group: quanta</span>
user::rwx
group::r-x
other::---
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ getfacl mydir/
# file: mydir
# owner: quanta
# group: quanta
user::rwx
group::r-x
other::---
"></button></div>
<p>Gán quyền đọc, ghi, thi hành cho user kitty và group friends:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-bash" tabindex="0" data-filename=""><code class=" language-bash">$ setfacl -m user:kitty:rwx,group:friends:rwx mydir/
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ setfacl -m user:kitty:rwx,group:friends:rwx mydir/
"></button></div>
<p>Tuỳ chọn <strong>-m</strong> sẽ nhắc <strong>setfacl</strong> chỉnh sửa một ACL đã tồn tại.</p>
<p>Xem lại ACL với lệnh <strong>getfacl</strong>:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-bash" tabindex="0" data-filename=""><code class=" language-bash">$ getfacl mydir/
<span class="token comment"># file: mydir</span>
<span class="token comment"># owner: quanta</span>
<span class="token comment"># group: quanta</span>
user::rwx
user:kitty:rwx
group::r-x
group:friends:rwx
mask::rwx
other::---
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ getfacl mydir/
# file: mydir
# owner: quanta
# group: quanta
user::rwx
user:kitty:rwx
group::r-x
group:friends:rwx
mask::rwx
other::---
"></button></div>
<p>Ngoài các mục (entries) cho user kitty và group friends, mask entry cũng được tạo ra. mask định nghĩa quyền truy cập có hiệu lực lớn nhất cho tất cả các entries của group.</p>
<p>Bây giờ thử dùng <strong>chmod</strong> để bỏ quyền write của group, output của lệnh ls cho thấy mask bits đã được điều chỉnh với chmod:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">$ sudo chmod g-w mydir/
$ getfacl mydir/
# file: mydir
# owner: quanta
# group: quanta
user::rwx
user:kitty:rwx                  #effective:r-x
group::r-x
group:friends:rwx               #effective:r-x
mask::r-x
other::---
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ sudo chmod g-w mydir/
$ getfacl mydir/
# file: mydir
# owner: quanta
# group: quanta
user::rwx
user:kitty:rwx                  #effective:r-x
group::r-x
group:friends:rwx               #effective:r-x
mask::r-x
other::---
"></button></div>
<p><strong>Default ACLs</strong> Default ACL ảnh hưởng đến các thư mục con cũng như là các files. Nói cách khác, các thư mục con và tệp kế thừa default ACL của thư mục cha.</p>
<p>Xét ví dụ sau:</p>
<p>Thêm một default ACLs vào một thư mục mydir:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">$ setfacl -d -m group:friends:r-x mydir/
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ setfacl -d -m group:friends:r-x mydir/
"></button></div>
<p>Tuỳ chọn <strong>-d</strong> sẽ nhắc setfacl thực hiện một "chỉnh sửa" trên <strong>default ACLs</strong></p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">$ getfacl mydir/
# file: mydir
# owner: quanta
# group: quanta
user::rwx
user:kitty:rwx                  #effective:r-x
group::r-x
group:friends:rwx               #effective:r-x
mask::r-x
other::---
default:user::rwx
default:group::r-x
default:group:friends:r-x
default:mask::r-x
default:other::---
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ getfacl mydir/
# file: mydir
# owner: quanta
# group: quanta
user::rwx
user:kitty:rwx                  #effective:r-x
group::r-x
group:friends:rwx               #effective:r-x
mask::r-x
other::---
default:user::rwx
default:group::r-x
default:group:friends:r-x
default:mask::r-x
default:other::---
"></button>
<div class="v-content-flex-center"> </div>
</div>
<p><strong>getfacl</strong> sẽ trả về cả <strong>access ACL</strong> và <strong>default ACL</strong>.</p>
<p>Nếu tạo một thư mục con trong mydir, thư mục con này kế thừa <strong>default ACL</strong> từ <strong>mydir</strong>:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">$ mkdir mydir/mysubdir
$ getfacl mydir/mysubdir/
# file: mydir/mysubdir
# owner: quanta
# group: quanta
user::rwx
group::r-x
group:friends:r-x
mask::r-x
other::---
default:user::rwx
default:group::r-x
default:group:friends:r-x
default:mask::r-x
default:other::---
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ mkdir mydir/mysubdir
$ getfacl mydir/mysubdir/
# file: mydir/mysubdir
# owner: quanta
# group: quanta
user::rwx
group::r-x
group:friends:r-x
mask::r-x
other::---
default:user::rwx
default:group::r-x
default:group:friends:r-x
default:mask::r-x
default:other::---
"></button>
<div class="v-content-flex-center"> </div>
</div>
<p><strong>access ACL</strong> của <strong>mysubdir</strong> phản ánh chính xác d<strong>efault ACL</strong> của mydir.</p>
<p>Nếu tạo một tệp trong mydir, tệp này kế thừa default ACL từ mydir:</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">$ touch mydir/myfile
$ ls -l mydir/myfile
-rw-r-----+ 1 quanta quanta 0 2008-01-07 00:59 mydir/myfile
$ getfacl mydir/myfile
# file: mydir/myfile
# owner: quanta
# group: quanta
user::rw-
group::r-x                      #effective:r--
group:friends:r-x               #effective:r--
mask::r--
other::---
</code></pre>
<button class="v-markdown-it-code-copy" title="Sao chép" data-clipboard-text="$ touch mydir/myfile
$ ls -l mydir/myfile
-rw-r-----+ 1 quanta quanta 0 2008-01-07 00:59 mydir/myfile
$ getfacl mydir/myfile
# file: mydir/myfile
# owner: quanta
# group: quanta
user::rw-
group::r-x                      #effective:r--
group:friends:r-x               #effective:r--
mask::r--
other::---
"></button></div>
<p>Ví dụ khác, giả sử /public là thư mục dùng chung cho mọi người trong công ty, hãy thiết lập để sao cho bất kỳ ai thuộc bất kỳ nhóm nào cũng có khả năng đọc file va chuyển vào trong thư mục này nhưng chỉ có người dùng trong nhóm quantri mới có thể ghi vào các file trong thư mục này.</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">mkdir /public
chmod 777 /public
groupadd quantri
setfacl -d --set u::rx,g::rx,o::rx,g:quantri:rwx,m:rwx /public
getfacl /public
useradd user1; useradd user2; usermod -G quantri user1
su user2
cd /public
touch user2_file.txt
echo "Them noi dung" &gt; user2_file.tx
 exit
su user1
cd /public
echo "Them noi dung" &gt; user2_file.txt  -&gt; permit denie
</code></pre>
<button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="mkdir /public
chmod 777 /public
groupadd quantri
setfacl -d --set u::rx,g::rx,o::rx,g:quantri:rwx,m:rwx /public
getfacl /public
useradd user1; useradd user2; usermod -G quantri user1
su user2
cd /public
touch user2_file.txt
echo &quot;Them noi dung&quot; &gt; user2_file.tx
 exit
su user1
cd /public
echo &quot;Them noi dung&quot; &gt; user2_file.txt  -&gt; permit denie
"></button>
<div class="v-content-flex-center"> </div>
</div>
<p>Ví dụ khác, giả sử file mark.doc nằm trong thư mục /data đã được thiết lập quyền truy xuất chuẩn nhưng người quản trị cần thêm hai quyền ACL nữa cho file này (người dùng dev có quyền đọc ghi và nhóm qa có quyền đọc). Hãy thiết lập chính xác hai quyền trên cho file mark.doc. Nếu muốn việc thiết lập quyền ACL luôn sẵn sàng khi khởi động máy trên phân vùng /dev/hda1 thì phải làm gì?</p>
<div style="box-sizing: border-box; color: #1b1b1b; font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 18px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; position: relative;">
<pre class=" language-none" tabindex="0" data-filename=""><code class=" language-none">useradd dev
useradd qa
setfacl -m u:dev:rw,g:qa:r,m:rwx /public/mark.doc
getfacl /public/mark.doc
su k50
echo "Them noi dung" &gt; /public/mark.doc
exit
su k50d
cat /public/mark.doc
echo "Them noi dung" &gt; /public/mark.doc
</code></pre>
<button class="v-markdown-it-code-copy" style="box-sizing: border-box; border-radius: 5px; margin: 0px; font-family: inherit; font-size: inherit; line-height: inherit; overflow: visible; text-transform: none; appearance: button; position: absolute; display: flex; align-items: center; justify-content: center; top: 7.5px; right: 6px; cursor: pointer; outline: none; border: none; background: #655454; height: 25px; opacity: 0.5;" title="Sao chép" data-clipboard-text="useradd dev
useradd qa
setfacl -m u:dev:rw,g:qa:r,m:rwx /public/mark.doc
getfacl /public/mark.doc
su k50
echo &quot;Them noi dung&quot; &gt; /public/mark.doc
exit
su k50d
cat /public/mark.doc
echo &quot;Them noi dung&quot; &gt; /public/mark.doc
"></button></div>
<h1 id="_6-quyen-truy-cap-tren-file-duoc-tao-boi-mot-so-lenh-pho-bien-9">6. Quyền truy cập trên file được tạo bởi một số lệnh phổ biến</h1>
<ul>
<li>
<p>Lệnh cp: Khi được sao chép sang vị trí mới, quyền truy cập chính thức của file được tính theo công thức trình bày ở trên với giá trị mask tại vị trí đích. Trong trường hợp trùng tên file và bạn quyết định ghi đè thì quyền truy cập của file ở vị trí đích sẽ được bảo lưu. Sử dụng tùy chọn –p trong lệnh cp để lấy quyền truy cập của file nguồn.</p>
</li>
<li>
<p>Lệnh tar: Khi giải nén các file, lệnh tar lấy quyền truy cập của từng file làm quyền truy nhập cơ sở cho file đó.</p>
</li>
</ul>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Sử dụng Ansible thông qua Bastion Host</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/su-dung-ansible-thong-qua-bastion-host/index.html"/>
        <id>https://ddtrungit.github.io/su-dung-ansible-thong-qua-bastion-host/index.html</id>
            <category term="Ansible"/>

        <updated>2022-06-13T14:24:17+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/110/Screenshot-2021-05-22-at-9.24.14-PM-1024x368-1.png" alt="" />
                    Bastion host là gì? Bastion dịch theo nghĩa đen là một nơi được tăng cường. Về thuật ngữ máy tính,&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/110/Screenshot-2021-05-22-at-9.24.14-PM-1024x368-1.png" alt="" />
                <ul>
<li>Bastion host là gì?</li>
</ul>
<p style="text-align: left;">Bastion dịch theo nghĩa đen là một nơi được tăng cường. Về thuật ngữ máy tính, đó là một máy trên mạng có thể là gatekeeper cho các kết nối đến và đi. Wikipedia định nghĩa: Máy chủ pháo đài (bastion host) là một máy tính có mục đích đặc biệt trên mạng, được thiết kế và cấu hình riêng để chịu được các cuộc tấn công. Máy chủ pháo đài thường chỉ lưu trữ một ứng dụng duy nhất, ví dụ như máy chủ proxy, các dịch vụ khác sẽ bị xóa hoặc giới hạn để giảm thiểu mối đe dọa cho máy tính. Sở dĩ, bastion host được thiết lập cứng như vậy là do vị trí và mục đích đặc biệt của nó, thường được đặt bên ngoài tường lửa hoặc trong vùng DMZ (một vùng mạng trung lập giữa mạng nội bộ và mạng Internet) và thường liên quan đến những truy cập từ các mạng hoặc máy tính không đáng tin cậy. Bạn có thể thiết lập bastion host làm máy duy nhất chấp nhận kết nối từ Internet. Sau đó, lần lượt, thiết lập tất cả các máy khác trong mạng để chỉ nhận các kết nối đến từ máy bastion host này.</p>
<figure class="alignnone wp-image-504"><img loading="lazy"  src="https://ddtrungit.github.io/media/posts/110/Screenshot-2021-05-22-at-9.24.14-PM-1024x368-1-300x108.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/110/responsive/Screenshot-2021-05-22-at-9.24.14-PM-1024x368-1-300x108-xs.png 300w ,https://ddtrungit.github.io/media/posts/110/responsive/Screenshot-2021-05-22-at-9.24.14-PM-1024x368-1-300x108-sm.png 480w ,https://ddtrungit.github.io/media/posts/110/responsive/Screenshot-2021-05-22-at-9.24.14-PM-1024x368-1-300x108-md.png 768w"  alt="" width="719" height="259"></figure>
<p>Khai báo các máy chủ vào :</p>
<blockquote><em>/etc/ansible/hosts</em></blockquote>
<p style="padding-left: 160px;"><em>[proxy]</em> <em>3.115.75.133</em></p>
<p style="padding-left: 160px;"><em>[web]</em> <em>10.1.0.48</em> <em>10.1.0.29</em></p>
<blockquote><em>/etc/ansible/ansible.cfg</em></blockquote>
<p style="padding-left: 40px;">[ssh_connection]</p>
<p style="padding-left: 40px;"><em>ssh_args = -F ~/.ssh/config -o ControlMaster=auto -o ControlPersist=30m -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o ForwardAgent=yes</em> <em>control_path = ~/.ansible/cp/ansible-%%r@%%h:%%p</em></p>
<blockquote><em>/home/<strong>username</strong>/.ssh/config</em></blockquote>
<p style="padding-left: 160px;"><em>Host proxy</em> <em>Hostname 3.115.75.133</em> <em>IdentityFile ~/bastion_ssh_key</em> <em>User ec2-user</em></p>
<p style="padding-left: 160px;"><em>Host 3.115.75.130</em> <em>Hostname 3.115.75.133</em> <em>IdentityFile ~/bastion_ssh_key</em> <em>User ec2-user</em></p>
<p style="padding-left: 160px;"><em>Host api</em> <em>Hostname 10.1.0.48</em> <em>User ec2-user</em> <em>IdentityFile ~/web_ssh_key</em> <em>ProxyCommand ssh -W %h:%p proxy</em></p>
<p style="padding-left: 160px;"><em>Host admin</em> <em>Hostname 10.1.0.29</em> <em>User ec2-user</em> <em>IdentityFile ~/web_ssh_key</em> <em>ProxyCommand ssh -W %h:%p proxy</em> <em>Host 10.1.*</em> <em>User ec2-user</em> <em>IdentityFile ~/api_ssh_key</em> <em>ProxyCommand ssh -W %h:%p proxy</em></p>
<p>Như vậy khi chỉ định ansible group proxy hay web thì sẽ kết nối  ssh bình thường.</p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Ansible Là Gì? Hướng Dẫn Cài Đặt Ansible</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/ansible-la-gi-huong-dan-cai-dat-ansible/index.html"/>
        <id>https://ddtrungit.github.io/ansible-la-gi-huong-dan-cai-dat-ansible/index.html</id>
            <category term="Ansible"/>

        <updated>2022-06-13T14:24:26+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/109/Ansible-la-gi-1.png" alt="" />
                    Trong một môi trường với nhiều server thì ta sẽ có vô vàn thứ phải lo. Từ setup crontab, update&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/109/Ansible-la-gi-1.png" alt="" />
                <p>Trong một môi trường với nhiều server thì ta sẽ có vô vàn thứ phải lo. Từ setup crontab, update các gói phần mềm mới, deploy ứng dụng mới, chỉnh sửa file cấu hình…. Những công việc này tuy không khó, nhưng rất mất thời gian của những người quản trị (SysAdmin/SysEngineer/DevOps). Vậy có cách nào để tự động hóa những thao tác nhàm chán, lặp đi lặp lại này không?</p>
<p><em>“Cùng một việc mà làm quá 2 lần thì có gì đó không ổn rồi”</em><em> </em><em>Từ một giảng viên cũ từng dạy mình</em></p>
<p>Câu trả lời chính là ứng dụng những tool automation để quản trị hệ thống. Hiện nay có rất nhiều tool như vậy trên thị trường cụ thể như: <strong>Chef</strong>, <strong>Puppet</strong>, <strong>CFEngine</strong>, <strong>StackStorm</strong>, <strong>Ansible</strong>, <strong>SaltStack</strong>… Trong bài này, mình sẽ giới thiệu đến các bạn một công cụ rất mạnh mẽ trong việc quản trị hệ thống, đó chính là <strong>Ansible</strong>.</p>
<h2><span id="1_Gioi_thieu_Ansible"><strong>1. Giới thiệu Ansible</strong></span></h2>
<p>Như đã nói ở trên, <strong>Ansible</strong> là một công cụ dùng để tự động hóa việc cấu hình trên nhiều server. So với các công cụ khác với tính năng tương đương thì Ansible dễ học và dễ tiếp cận hơn rất nhiều. Cộng đồng người dùng cũng nhiều hơn so với các công cụ khác.</p>
<p>So sánh một vài thông số về <strong>Ansible, SaltStack, Chef, Puppet</strong> trên <strong>GitHub (11/2018)</strong></p>
<table width="100%">
<tbody>
<tr>
<td width="20%"> </td>
<td width="20%"><strong>Ansible</strong></td>
<td width="20%"><strong>SaltStack</strong></td>
<td width="20%"><strong>Chef</strong></td>
<td width="20%"><strong>Puppet</strong></td>
</tr>
<tr>
<td width="20%"><strong>Số sao trên GitHub</strong></td>
<td width="20%">33,500</td>
<td width="20%">9,341</td>
<td width="20%">5,543</td>
<td width="20%">5,125</td>
</tr>
<tr>
<td width="20%"><strong>Số lượt fork</strong></td>
<td width="20%">13,338</td>
<td width="20%">4,366</td>
<td width="20%">2,268</td>
<td width="20%">2,049</td>
</tr>
<tr>
<td width="20%"><strong>Ngôn ngữ lâp trình</strong></td>
<td width="20%">Python</td>
<td width="20%">Python</td>
<td width="20%">Ruby</td>
<td width="20%">Ruby</td>
</tr>
<tr>
<td width="20%"><strong>Ngôn ngữ cấu hình</strong></td>
<td width="20%">YAML</td>
<td width="20%">YAML</td>
<td width="20%">Ruby DSL</td>
<td width="20%">Puppet DSL</td>
</tr>
</tbody>
</table>
<p>Có thể thấy Ansible là công cụ tự động hóa phổ biến nhất trên GitHub với số sao được người dùng bình chọn cho project này là 33,500 sao. <strong>Ansible</strong> cũng là tool dễ tiếp cận và làm quen do được build bằng Python và sử dụng file cấu hình theo dạng YAML (<strong>Y</strong>AML <strong>A</strong>in’t <strong>M</strong>arkup <strong>L</strong>anguage) dễ đọc và dễ hiểu.</p>
<h3><span id="Kien_truc"><a name="_Toc70061298"></a><strong>Kiến trúc</strong></span></h3>
<p>Ansible sử dụng kiến trúc agentless để giao tiếp với các máy khác mà không cần agent. Cơ bản nhất là giao tiếp thông qua giao thức SSH trên Linux, WinRM trên Windows hoặc giao tiếp qua chính API của thiết bị đó cung cấp.</p>
<figure class="alignnone  wp-image-3598"><img loading="lazy"  src="https://ddtrungit.github.io/media/posts/109/Ansible-1.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/109/responsive/Ansible-1-xs.png 300w ,https://ddtrungit.github.io/media/posts/109/responsive/Ansible-1-sm.png 480w ,https://ddtrungit.github.io/media/posts/109/responsive/Ansible-1-md.png 768w"  sizes="(max-width: 825px) 100vw, 825px" srcset="https://ddtrungit.github.io/media/posts/109/Ansible-1.png 1024w, https://blog.vinahost.vn/wp-content/uploads/2021/05/Ansible-1-300x169.png 300w, https://blog.vinahost.vn/wp-content/uploads/2021/05/Ansible-1-768x434.png 768w" alt="" width="825" height="466"></figure>
<p>Ansible có thể giao tiếp với rất nhiều platform, OS và loại thiết bị khác nhau. Từ Ubuntu, CentOS, VMware, Windows cho tới AWS, Azure, các thiết bị mạng Cisco và Juniper….vân vân và mây mây….(hoàn toàn không cần agent khi giao tiếp).</p>
<p>Chính cách thiết kế này làm tăng tính tiện dụng của Ansible do không cần phải setup bảo trì agent trên nhiều host. Có thể coi đây là một thế mạnh của Ansible so với các công cụ có cùng chức năng như Chef, Puppet, SaltStack (Salt thì hỗ trợ cả 2 mode là agent và agentless, có thời gian thì mình sẽ viết 1 bài về Salt).</p>
<h3><span id="Ung_dung"><a name="_Toc70061299"></a><strong>Ứng dụng</strong></span></h3>
<p>Ansible có rất nhiều ứng dụng trong triển khai phần mềm và quản trị hệ thống.</p>
<ul>
<li><strong>Provisioning:</strong> Khởi tạo VM, container hàng loạt trong môi trường cloud dựa trên API (OpenStack, AWS, Google Cloud, Azure…)</li>
<li><strong>Configuration Management: </strong>Quản lý cấu hình tập trung các dịch vụ tập trung, không cần phải tốn công chỉnh sửa cấu hình trên từng server.</li>
<li><strong>Application Deployment:</strong> Deploy ứng dụng hàng loạt, quản lý hiệu quả vòng đời của ứng dụng từ giai đoạn dev cho tới production.</li>
<li><strong>Security &amp; Compliance:</strong> Quản lý các chính sách về an toàn thông tinmột cách đồng bộ trên nhiều môi trường và sản phẩm khác nhau (deploy policy, cấu hình firewall hàng loạt trên nhiều server…).</li>
</ul>
<h3><span id="Mot_so_thuat_ngu_co_ban"><a name="_Toc70061300"></a><strong>Một số thuật ngữ cơ bản</strong></span></h3>
<ul>
<li><strong>Controller Machine</strong>: Là máy cài Ansible, chịu trách nhiệm quản lý, điều khiển và gởi task tới các máy con cần quản lý.</li>
<li><strong>Inventory</strong>: Là file chứa thông tin các server cần quản lý. File này thường nằm tại đường dẫn /etc/ansible/hosts.</li>
<li><strong>Playbook</strong>: Là file chứa các task của Ansible được ghi dưới định dạng YAML. Máy controller sẽ đọc các task trong Playbook và đẩy các lệnh thực thi tương ứng bằng Python xuống các máy con.</li>
<li><strong>Task</strong>: Một block ghi tác vụ cần thực hiện trong playbook và các thông số liên quan. Ví dụ 1 playbook có thể chứa 2 task là: yum update và yum install vim.</li>
<li><strong>Module</strong>: Ansible có rất nhiều module, ví dụ như moduel yum là module dùng để cài đặt các gói phần mềm qua yum. Ansible hiện có hơn ….2000 module để thực hiện nhiều tác vụ khác nhau, bạn cũng có thể tự viết thêm các module của mình nếu muốn.</li>
<li><strong>Role</strong>: Là một tập playbook được định nghĩa sẵn để thực thi 1 tác vụ nhất định (ví dụ cài đặt LAMP stack).</li>
<li><strong>Play</strong>: là quá trình thực thi của 1 playbook</li>
<li><strong>Facts</strong>: Thông tin của những máy được Ansible điều khiển, cụ thể là thông tin về OS, network, system…</li>
<li><strong>Handlers</strong>: Dùng để kích hoạt các thay đổi của dịch vụ như start, stop service.</li>
</ul>
<h2><span id="2_Huong_dan_cai_dat"><a name="_Toc70061301"></a><strong>2. Hướng dẫn cài đặt</strong></span></h2>
<h3><span id="Cau_hinh_yeu_cau"><a name="_Toc70061302"></a><strong>Cấu hình yêu cầu</strong></span></h3>
<ul>
<li>Python 2.7 trở lên, Python 3.x thì càng tốt</li>
<li>Đối với các host Linux thì cần hỗ trợ SSH.</li>
<li>Đối với những host chạy Windows thì cần hỗ trợ WinRM.</li>
</ul>
<h3><span id="Cach_thuc_hoat_dong"><a name="_Toc70061303"></a><strong>Cách thức hoạt động</strong></span></h3>
<p>Giống như đa phần các phần mềm quản lý cấu hình tập trung khác. <strong>Ansible</strong> có 2 loại server là control machine và node. Control machine là máy có trách nhiệm quản lý các node con trong hệ thống. Đây cũng là máy lưu trữ các thông tin về các node, playbook và các script cần dùng để deploy trên các node khác qua giao thức SSH.</p>
<p>Để quản lý các node, <strong>Ansible</strong> sẽ gởi các module lệnh tới các node con qua SSH. Các module lệnh này sẽ được lưu trữ tạm thời trên các node con và giao tiếp với máy chủ <strong>Ansible</strong> bằng JSON. Khi đã thực thi xong tác vụ trên các máy này, các module đó sẽ được xóa đi. Các module này thường được lưu ở folder <strong>/root/.ansible</strong> hoặc <strong>/home/&lt;user&gt;/.ansible</strong>, tùy theo user mà <strong>Ansible</strong> dùng để quản lý các node con.</p>
<p>Khi <strong>Ansible</strong> ở chế độ rảnh, không có task để thực hiện máy chủ <strong>Ansible</strong> sẽ không chiếm dụng tài nguyên do <strong>Ansible</strong> không sử dụng trình daemon hoặc program chạy ở chế độ background. Chỉ khi nào thực thi lệnh thì <strong>Ansible</strong> mới sử dụng tài nguyên của hệ thống.</p>
<h2><span id="Cai_dat_Ansible">Cài <a name="_Toc70061304"></a><strong>đặt Ansible</strong></span></h2>
<h3><span id="Ansible_Server_Control_Machine"><strong>Ansible Server – Control Machine</strong></span></h3>
<p>Ansible Server sẽ là nơi người quản trị chạy lệnh (ad-hoc/playbooks), Ansible engine sẽ xử lý các lệnh này và đẩy xuống các server slave tương ứng.</p>
<table>
<tbody>
<tr>
<td width="638">
<pre># Install on CentOS$ sudo yum update$ sudo yum install epel-release$ sudo yum install ansible# Install on Ubuntu$ sudo apt update$ sudo apt install software-properties-common$ sudo apt-add-repository ppa:ansible/ansible$ sudo apt update$ sudo apt install ansible</pre>
</td>
</tr>
</tbody>
</table>
<p>Tạo file inventory chứa thông tin về các node cần quản lý:</p>
<table>
<tbody>
<tr>
<td width="638">
<pre># vi /etc/ansible/hosts[group1]10.0.0.510.0.0.6</pre>
</td>
</tr>
</tbody>
</table>
<p><strong>Trên các Nodes con</strong></p>
<p>Cài đặt Python 2.7 trở lên và mở port SSH.</p>
<p>Chạy lệnh sau trên <strong>Control machine</strong> để kiểm tra các thông tin trên server:</p>
<table>
<tbody>
<tr>
<td width="638">
<pre>#Kiem tra ket noi den cac nodes# ansible group1 -m ping#Kiem tra luong RAM trong tren cac nodes# ansible group1 -a "free -m" -u &lt;username&gt;#Kiem tra nhanh o cung tren cac nodes# ansible group1 -a "df -lh" -u &lt;username&gt;</pre>
</td>
</tr>
</tbody>
</table>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Install and Configure OpenVPN Server on Ubuntu Linux</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/install-and-configure-openvpn-server-on-ubuntu-linux/index.html"/>
        <id>https://ddtrungit.github.io/install-and-configure-openvpn-server-on-ubuntu-linux/index.html</id>
            <category term="Linux"/>

        <updated>2022-06-13T14:24:56+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/108/what_is_openvpn_thumb800.jpg" alt="" />
                    Download openvpn-install.sh script to set up OpenVPN server in 5 minutes on Ubuntu Type the following wget command or curl&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/108/what_is_openvpn_thumb800.jpg" alt="" />
                <h2>Download openvpn-install.sh script to set up OpenVPN server in 5 minutes on Ubuntu</h2>
<p>Type the following wget command or curl command: <code>$ wget https://git.io/vpn -O openvpn-install.sh</code> wget grabbing the script:</p>
<pre>--2020-12-09 09:15:57--  https://git.io/vpnResolving git.io (git.io)... 34.195.187.253, 52.87.143.234, 34.205.238.171, ...Connecting to git.io (git.io)|34.195.187.253|:443... connected.HTTP request sent, awaiting response... 302 FoundLocation: https://raw.github.com/Nyr/openvpn-install/master/openvpn-install.sh [following]--2020-12-09 09:15:57--  https://raw.github.com/Nyr/openvpn-install/master/openvpn-install.shResolving raw.github.com (raw.github.com)... 151.101.124.133Connecting to raw.github.com (raw.github.com)|151.101.124.133|:443... connected.HTTP request sent, awaiting response... 301 Moved PermanentlyLocation: https://raw.githubusercontent.com/Nyr/openvpn-install/master/openvpn-install.sh [following]--2020-12-09 09:15:57--  https://raw.githubusercontent.com/Nyr/openvpn-install/master/openvpn-install.shResolving raw.githubusercontent.com (raw.githubusercontent.com)... 151.101.124.133Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|151.101.124.133|:443... connected.HTTP request sent, awaiting response... 200 OKLength: 23079 (23K) [text/plain]Saving to: 'openvpn-install.sh'openvpn-install.sh  100%[==================&gt;]  22.54K  --.-KB/s    in 0.001s  2020-12-09 09:15:57 (36.9 MB/s) - 'openvpn-install.sh saved [23079/23079]</pre>
<p>We can verify script using a text editor such as nano command or vim command: <code>$ nano openvpn-install.sh</code></p>
<h2>Running openvpn-install.sh to install OpenVPN server</h2>
<p>Type the following command: <code>$ sudo chmod +x openvpn-install.sh
$ sudo bash openvpn-install.sh</code> Make sure you provide needed information:</p>
<pre>Welcome to this OpenVPN road warrior installer!Which protocol should OpenVPN use?   1) UDP (recommended)   2) TCPProtocol [1]: <strong>1</strong>What port should OpenVPN listen to?Port [1194]: Select a DNS server for the clients:   1) Current system resolvers   2) Google   3) 1.1.1.1   4) OpenDNS   5) Quad9   6) AdGuardDNS server [1]: <strong>2</strong>Enter a name for the first client:Name [client]: <strong>iphone</strong>OpenVPN installation is ready to begin.Press any key to continue...</pre>
<p>Once you press any key such as [Enter] key, you will see:</p>
<pre>writing new private key to '/etc/openvpn/server/easy-rsa/pki/easy-rsa-1768.FjG9Gr/tmp.vQL9q8'-----Using configuration from /etc/openvpn/server/easy-rsa/pki/easy-rsa-1768.FjG9Gr/tmp.FiauWWCheck that the request matches the signatureSignature okThe Subject's Distinguished Name is as followscommonName            :ASN.1 12:'server'Certificate is to be certified until Dec  7 09:22:17 2030 GMT (3650 days)Write out database with 1 new entriesData Base UpdatedUsing SSL: openssl OpenSSL 1.1.1f  31 Mar 2020Generating a RSA private key....................................+++++...................+++++writing new private key to '/etc/openvpn/server/easy-rsa/pki/easy-rsa-1843.4USwJm/tmp.lOecLW'-----Using configuration from /etc/openvpn/server/easy-rsa/pki/easy-rsa-1843.4USwJm/tmp.5j0n6qCheck that the request matches the signatureSignature okThe Subject's Distinguished Name is as followscommonName            :ASN.1 12:'iphone'Certificate is to be certified until Dec  7 09:22:17 2030 GMT (3650 days)Write out database with 1 new entriesData Base UpdatedUsing SSL: openssl OpenSSL 1.1.1f  31 Mar 2020Using configuration from /etc/openvpn/server/easy-rsa/pki/easy-rsa-1899.k6zZtP/tmp.riZi2RAn updated CRL has been created.CRL file: /etc/openvpn/server/easy-rsa/pki/crl.pemCreated symlink /etc/systemd/system/multi-user.target.wants/openvpn-iptables.service → /etc/systemd/system/openvpn-iptables.service.Created symlink /etc/systemd/system/multi-user.target.wants/openvpn-server@server.service → /lib/systemd/system/openvpn-server@.service.Finished!The client configuration is available in: /root/iphone.ovpnNew clients can be added by running this script again.</pre>
<h3>Viewing and Seting up OpenVPN Server In 5 Minutes on Ubuntu Firewall Rules</h3>
<p>That is all. Your OpenVPN server has been configured and ready to use. You can see added firewall rules <kbd>/etc/systemd/system/openvpn-iptables.service</kbd> file: <code>$ sudo systemctl cat openvpn-iptables.service</code> Sample rules. Please do not edit them:</p>
<div class="wp-geshi-highlight-wrap5">
<div class="wp-geshi-highlight-wrap4">
<div class="wp-geshi-highlight-wrap3">
<div class="wp-geshi-highlight-wrap2">
<div class="wp-geshi-highlight-wrap">
<div class="wp-geshi-highlight">
<div class="bash">
<pre class="de1"><span class="br0">[</span>Unit<span class="br0">]</span><span class="re2">Before</span>=network.target<span class="br0">[</span>Service<span class="br0">]</span><span class="re2">Type</span>=oneshot<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-t</span> nat <span class="re5">-A</span> POSTROUTING <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="sy0">!</span> <span class="re5">-d</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> 172.105.102.90<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-I</span> INPUT <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">1194</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-I</span> FORWARD <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-I</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-t</span> nat <span class="re5">-D</span> POSTROUTING <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="sy0">!</span> <span class="re5">-d</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> 172.105.102.90<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-D</span> INPUT <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">1194</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-D</span> FORWARD <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-D</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-t</span> nat <span class="re5">-A</span> POSTROUTING <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="sy0">!</span> <span class="re5">-d</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> <span class="nu0">2600</span>:3c04::f03c:92ff:fe42:3d72<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-I</span> FORWARD <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-I</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-t</span> nat <span class="re5">-D</span> POSTROUTING <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="sy0">!</span> <span class="re5">-d</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> <span class="nu0">2600</span>:3c04::f03c:92ff:fe42:3d72<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-D</span> FORWARD <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-D</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">RemainAfterExit</span>=<span class="kw2">yes</span><span class="br0">[</span>Install<span class="br0">]</span><span class="re2">WantedBy</span>=multi-user.target</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>You can view your openvpn server config file generated by the script as follows (agin do not edit this file by hand as it will break things for you): <code>$ sudo more /etc/openvpn/server/server.conf</code> Sample openvpn config:</p>
<div class="wp-geshi-highlight-wrap5">
<div class="wp-geshi-highlight-wrap4">
<div class="wp-geshi-highlight-wrap3">
<div class="wp-geshi-highlight-wrap2">
<div class="wp-geshi-highlight-wrap">
<div class="wp-geshi-highlight">
<div class="bash">
<pre class="de1"><span class="kw3">local</span> 172.105.102.90port <span class="nu0">1194</span>proto udpdev tunca ca.crtcert server.crtkey server.key<span class="kw2">dh</span> dh.pemauth SHA512tls-crypt tc.keytopology subnetserver 10.8.0.0 255.255.255.0server-ipv6 fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span>push <span class="st0">"redirect-gateway def1 ipv6 bypass-dhcp"</span>ifconfig-pool-persist ipp.txtpush <span class="st0">"dhcp-option DNS 8.8.8.8"</span>push <span class="st0">"dhcp-option DNS 8.8.4.4"</span>keepalive <span class="nu0">10</span> <span class="nu0">120</span>cipher AES-<span class="nu0">256</span>-CBCuser nobodygroup nogrouppersist-keypersist-tunstatus openvpn-status.logverb <span class="nu0">3</span>crl-verify crl.pemexplicit-exit-notify</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h3>How do I start/stop/restart OpenVPN server on Ubuntu Linux 18.04/20.04 LTS and 20.10?</h3>
<p>Run the following systemctl command to stop the OpenVPN service: <code>$ sudo systemctl stop openvpn-server@server.service</code> Want to start it again? Try: <code>$ sudo systemctl start openvpn-server@server.service</code> The command to restart the OpenVPN service: <code>$ sudo systemctl restart openvpn-server@server.service</code> View status of your OpenVPN systemd based service: <code>$ sudo systemctl status openvpn-server@server.service</code></p>
<pre><strong>●</strong> openvpn-server@server.service - OpenVPN service for server     Loaded: loaded (/lib/systemd/system/openvpn-server@.service; enabled; vendor preset: enabled)     Active: <strong>active (running)</strong> since Wed 2020-12-09 09:22:18 UTC; 7min ago       Docs: man:openvpn(8)             https://community.openvpn.net/openvpn/wiki/Openvpn24ManPage             https://community.openvpn.net/openvpn/wiki/HOWTO   Main PID: 2017 (openvpn)     Status: "Initialization Sequence Completed"      Tasks: 1 (limit: 4610)     Memory: 1.2M     CGroup: /system.slice/system-openvpn\x2dserver.slice/openvpn-server@server.service             └─2017 /usr/sbin/openvpn --status /run/openvpn-server/status-server.log --status-version 2 --suppress-timestamps --config server.confDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: Socket Buffers: R=[212992-&gt;212992] S=[212992-&gt;212992]Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: UDPv4 link local (bound): [AF_INET]172.105.102.90:1194Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: UDPv4 link remote: [AF_UNSPEC]Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: GID set to nogroupDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: UID set to nobodyDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: MULTI: multi_init called, r=256 v=256Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: IFCONFIG POOL IPv6: (IPv4) size=252, size_ipv6=65536, netbits=64, base_ipv6=fddd:1194:1194:1194::1000Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: IFCONFIG POOL: base=10.8.0.2 size=252, ipv6=1Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: IFCONFIG POOL LISTDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: Initialization Sequence Completed</pre>
<h2>OpenVPN client configuration</h2>
<p>On server your will find a client configuration file called ~/iphone.ovpn. Use the find command to locate OpenVPN config file: <code>$ sudo find / -type f -name "iphone.ovpn"
$ sudo find / -type f -name "*.ovpn"</code> Now, all you have to do is copy this file to your local desktop using the scp and provide this file to your OpenVPN client to connect: <code>$ scp root@172.105.102.90:~/iphone.ovpn .</code> Next, you need to download OpenVPN client as per your operating system or mobile device:</p>
<ul>
<li>Client for <a href="https://itunes.apple.com/us/app/openvpn-connect/id590379981?mt=8" target="_blank" rel="noopener">Apple iOS</a> version 6.x or above</li>
<li><a href="https://play.google.com/store/apps/details?id=net.openvpn.openvpn&amp;hl=en" target="_blank" rel="noopener">Android</a> client</li>
<li><a href="https://tunnelblick.net/" target="_blank" rel="noopener">Apple MacOS (OS X)</a></li>
<li><a href="https://openvpn.net/community-downloads-2/" target="_blank" rel="noopener">Windows 8/10 OpenVPN</a> client</li>
</ul>
<h3>MacOS/OS X OpenVPN client configuration</h3>
<p>Just double click on iphone.ovpn file and it will open in your tunnelblick client &gt; Click on the “Only me” to install it:</p>
<div id="attachment_145487" class="wp-caption aligncenter">
<figure class="size-full wp-image-145487 lazyloaded"><img loading="lazy"  src="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/108/responsive/openvpn-macos-xs.jpg 300w ,https://ddtrungit.github.io/media/posts/108/responsive/openvpn-macos-sm.jpg 480w ,https://ddtrungit.github.io/media/posts/108/responsive/openvpn-macos-md.jpg 768w"  sizes="(max-width: 599px) 100vw, 599px" srcset="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/openvpn-macos-300x139.jpg 300w" alt="Fig.03: MacOS / OS X openvpn client configuration" width="599" height="278" aria-describedby="caption-attachment-145487" data-src="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg" data-srcset="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/openvpn-macos-300x139.jpg 300w" data-sizes="(max-width: 599px) 100vw, 599px"></figure>
<p id="caption-attachment-145487" class="wp-caption-text">Fig.03: MacOS / OS X openvpn client configuration</p>
</div>
<p>Once installed click on Connect button and you will be online. Use the following command on MacOS client to verify that your public IP changed to the VPN server IP: <code>$ dig TXT +short o-o.myaddr.l.google.com @ns1.google.com</code> You can ping to OpenVPN server private IP: <code>$ ping 10.8.0.1</code></p>
<p> </p>
<h3>Linux OpenVPN client configuration</h3>
<p>First, install the openvpn client, enter: <code>$ sudo yum install openvpn</code> OR <code>$ sudo apt install openvpn</code> Next, copy iphone.ovpn as follows: <code>$ sudo cp iphone.ovpn /etc/openvpn/client.conf</code> Test connectivity from the CLI: <code>$ sudo openvpn --client --config /etc/openvpn/client.conf</code> Your Linux system will automatically connect when computer restart using /etc/init.d/openvpn script: <code>$ sudo /etc/init.d/openvpn start</code> For systemd based system, use the following command: <code>$ sudo systemctl start openvpn@client</code> Test the OpenVPN connectivity on Linux desktop: <code>$ <strong>ping 10.8.0.1</strong> #Ping to OpenVPN server gateway using the <a title="See Linux/Unix ping command examples for more info" href="https://www.cyberciti.biz/faq/unix-ping-command-examples/">ping command</a>
$ <strong>ip route</strong> #Make sure routing setup using the <a title="See Linux/Unix ip command examples for more info" href="https://www.cyberciti.biz/faq/linux-ip-command-examples-usage-syntax/">ip command</a> $ ip route get 10.8.0.1
#Make sure your public IP set to OpenVPN server
$ <strong>dig TXT +short o-o.myaddr.l.google.com @ns1.google.com</strong></code> <figure class="aligncenter size-full wp-image-149227 lazyloaded"><img loading="lazy"  src="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/108/responsive/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-xs.jpg 300w ,https://ddtrungit.github.io/media/posts/108/responsive/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-sm.jpg 480w ,https://ddtrungit.github.io/media/posts/108/responsive/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-md.jpg 768w"  sizes="(max-width: 599px) 100vw, 599px" srcset="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-300x128.jpg 300w" alt="Set up and Verify OpenVPN Server In 5 Minutes on Ubuntu Linux" width="599" height="255" data-src="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg" data-srcset="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-300x128.jpg 300w" data-sizes="(max-width: 599px) 100vw, 599px"></figure>
<h3>FreeBSD OpenVPN client configuration</h3>
<p>First, install the openvpn client using the pkg command: <code>$ sudo pkg install openvpn</code> Next, copy iphone.ovpn as follows: <code>$ mkdir -p /usr/local/etc/openvpn/
$ sudo cp iphone.ovpn /usr/local/etc/openvpn/client.conf</code> Edit /etc/rc.conf and add the following:</p>
<pre>openvpn_enable="YES"openvpn_configfile="/usr/local/etc/openvpn/client.conf"</pre>
<p>Start the OpenVPN service: <code>$ sudo /usr/local/etc/rc.d/openvpn start</code> Verify it: <code>#Ping to OpenVPN server gateway from BSD
$ ping 10.8.0.1
#Make sure routing setup
$ netstat -nr
#Make sure your public IP set to OpenVPN server
$ drill myip.opendns.com @resolver1.opendns.com</code></p>
<h2>How do I add a new client?</h2>
<p>For demo purpose I added a new device called googlephone. Let us add one more device called googlephone by running the script again: <code>$ sudo bash openvpn-install.sh</code></p>
<pre>Looks like OpenVPN is already installedWhat do you want to do?   1) Add a cert for a new user   2) Revoke existing user cert   3) Remove OpenVPN   4) ExitSelect an option [1-4]:</pre>
<p>Select option 1 and type googlephone as a client name:</p>
<div class="wp-geshi-highlight-wrap5">
<div class="wp-geshi-highlight-wrap4">
<div class="wp-geshi-highlight-wrap3">
<div class="wp-geshi-highlight-wrap2">
<div class="wp-geshi-highlight-wrap">
<div class="wp-geshi-highlight">
<div class="ini">
<pre class="de1">Tell me a name for the client certPlease, use one word only, no special charactersClient name: googlephoneGenerating a <span class="nu0">2048</span> bit RSA private key.........+++.................................................................................................+++writing new private key to <span class="st0">'/etc/openvpn/easy-rsa/pki/private/googlephone.key.FNaDMaP56c'</span>-----Using configuration from /etc/openvpn/easy-rsa/openssl-<span class="nu0">1.0</span>.cnfCheck that the request matches the signatureSignature okThe Subject<span class="st0">'s Distinguished Name is as followscommonName            :ASN.1 12:'</span>googlephone<span class="st0">'Certificate is to be certified until Sep 25 07:31:46 2027 GMT (3650 days) Write out database with 1 new entriesData Base Updated Client googlephone added, certs available at ~/googlephone.ovpn</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Now you can use googlephone.ovpn with Google Android phone. You can add as many users you want using this method.</p>
<h2>How do I delete/revoke existing user certificate?</h2>
<p>Run the script: <code>$ sudo bash openvpn-install.sh</code> Here is how it looks:</p>
<pre>Looks like OpenVPN is already installedWhat do you want to do?   1) Add a cert for a new user   2) Revoke existing user cert   3) Remove OpenVPN   4) ExitSelect an option [1-4]:</pre>
<p>Type 2 option and you will see a list of all the existing client certificate you want to revoke:</p>
<pre>Select the existing client certificate you want to revoke     1) iphone6     2) googlephone     3) delllaptop     4) macbookSelect one client [1-4]: 2</pre>
<p>Sample outputs when I revoked googlephone certificate:</p>
<pre>Using configuration from /etc/openvpn/easy-rsa/openssl-1.0.cnfRevoking Certificate 09.Data Base UpdatedUsing configuration from /etc/openvpn/easy-rsa/openssl-1.0.cnfAn updated CRL has been created.CRL file: /etc/openvpn/easy-rsa/pki/crl.pemCertificate for client googlephone revoked</pre>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Install and Configure Redis on AMAZON LINUX 2</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/install-and-configure-redis-on-amazon-linux-2/index.html"/>
        <id>https://ddtrungit.github.io/install-and-configure-redis-on-amazon-linux-2/index.html</id>
            <category term="Linux"/>
            <category term="Aws"/>

        <updated>2022-06-13T14:25:29+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/107/Redis-1.png" alt="" />
                    Install Redis In this section you’ll add the EPEL repository, and then use it to install Redis. sudo yum install epel-releasesudo yum&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/107/Redis-1.png" alt="" />
                <h2 id="install-redis">Install Redis</h2>
<p>In this section you’ll add the <a href="https://fedoraproject.org/wiki/EPEL" target="_blank" rel="noopener">EPEL</a> repository, and then use it to install Redis.</p>
<ol>
<li>Add the EPEL repository, and update YUM to confirm your change:
<pre><code data-wg-notranslate="manual">sudo yum install epel-releasesudo yum update</code></pre>
</li>
<li>Install Redis:
<pre><code data-wg-notranslate="manual">sudo yum install redis</code></pre>
</li>
<li>Start Redis:
<pre><code data-wg-notranslate="manual">sudo systemctl start redis</code></pre>
<p><strong>Optional</strong>: To automatically start Redis on boot:</p>
<pre><code data-wg-notranslate="manual">sudo systemctl enable redis</code></pre>
</li>
</ol>
<h3 id="verify-the-installation">Verify the Installation</h3>
<p>Verify that Redis is running with <code data-wg-notranslate="manual">redis-cli</code>:</p>
<pre><code data-wg-notranslate="manual">redis-cli ping</code></pre>
<p>If Redis is running, it will return:</p>
<pre><code data-wg-notranslate="manual">PONG</code></pre>
<h2 id="configure-redis">Configure Redis</h2>
<p>In this section, you’ll configure some basic persistence and tuning options for Redis.</p>
<h3 id="persistence-options">Persistence Options</h3>
<p>Redis provides two options for disk persistence:</p>
<ul>
<li>Point-in-time snapshots of the dataset, made at specified intervals (RDB).</li>
<li>Append-only logs of all the write operations performed by the server (AOF).</li>
</ul>
<p>Each option has its own pros and cons which are detailed in the Redis documentation. For the greatest level of data safety, consider running both persistence methods.</p>
<p>Because the Point-in-time snapshot persistence is enabled by default, you only need to set up AOF persistence:</p>
<ol>
<li>Make sure that the following values are set for the <code data-wg-notranslate="manual">appendonly</code> and <code data-wg-notranslate="manual">appendfsync</code> settings in <code data-wg-notranslate="manual">redis.conf</code>:
<dl class="file font-mono text-xs pull-out" data-wg-notranslate="manual">
<dt class="relative px-8 py-3 bg-titlecolor sm:rounded-t-md text-white">File: /etc/redis.conf
<div class="absolute right-0 top-0 pt-3 pr-2"> </div>
</dt>
<dd class="overflow-x-scroll">
<div>
<div class="highlight">
<div class="chroma">
<table class="lntable">
<tbody>
<tr>
<td class="lntd">
<pre class="chroma"><code data-wg-notranslate="manual"><span class="lnt">1</span><span class="lnt">2</span></code></pre>
</td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash" data-wg-notranslate="manual">appendonly yesappendfsync everysec</code></pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</dd>
</dl>
</li>
<li>Restart Redis:
<pre><code data-wg-notranslate="manual">sudo systemctl restart redis</code></pre>
</li>
</ol>
<h3 id="basic-system-tuning">Basic System Tuning</h3>
<p>To improve Redis performance, set the Linux kernel overcommit memory setting to 1:</p>
<pre><code data-wg-notranslate="manual">sudo sysctl vm.overcommit_memory=1</code></pre>
<p>This immediately changes the overcommit memory setting, but the change will not persist across reboots. To make it permanent, add <code data-wg-notranslate="manual">vm.overcommit_memory = 1</code> to <code data-wg-notranslate="manual">/etc/sysctl.conf</code>:</p>
<dl class="file font-mono text-xs pull-out" data-wg-notranslate="manual">
<dt class="relative px-8 py-3 bg-titlecolor sm:rounded-t-md text-white">File: /etc/sysctl.conf
<div class="absolute right-0 top-0 pt-3 pr-2"> </div>
</dt>
<dd class="overflow-x-scroll">
<div>
<div class="highlight">
<div class="chroma">
<table class="lntable">
<tbody>
<tr>
<td class="lntd">
<pre class="chroma"><code data-wg-notranslate="manual"><span class="lnt">1</span></code></pre>
</td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash" data-wg-notranslate="manual">vm.overcommit_memory <span class="o">=</span> <span class="m">1</span></code></pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</dd>
</dl>
<h3 id="additional-swap">Additional Swap</h3>
<p>Depending upon your usage, you may find it necessary to add extra swap disk space. You can add swap by <a href="https://www.linode.com/docs/platform/disk-images/disk-images-and-configuration-profiles/#resizing-a-disk" data-turbolinks="false">resizing your disk</a> in the Linode Manager. The <a href="https://redis.io/topics/admin" target="_blank" rel="noopener">Redis documentation</a> recommends the size of your swap disk match the amount of memory available to your system.</p>
<h2 id="distributed-redis">Distributed Redis</h2>
<p>Redis provides several options for setting up distributed data stores. The simplest option, covered below, is <em>master/slave replication</em>, which creates copies of data. It will also allow distribution of reads among groups of slave copies as long as all write operations are handled by the master server.</p>
<p>The master/slave setup described above can be made highly available with <a href="https://redis.io/topics/sentinel" target="_blank" rel="noopener">Redis Sentinel</a>. Sentinel can be configured to monitor both master and slave instances, and will perform automatic failover if the master node is not working as expected. That means that one of the slave nodes will be elected master and all other slave nodes will be configured to use the new master.</p>
<p>With Redis version 3.0 and above, you can use <a href="https://redis.io/topics/cluster-tutorial" target="_blank" rel="noopener">Redis Cluster</a>, a data sharding solution that automatically manages replication and failover. With Redis Cluster, you are able to automatically split your dataset among multiple nodes, which is useful when your dataset is larger than a single server’s RAM. It also gives you the ability to continue operations when a subset of the nodes are experiencing failures or are unable to communicate with the rest of the cluster.</p>
<p>The following steps will guide you through master/slave replication, with the slaves set to read-only mode.</p>
<h2 id="set-up-redis-masterslave-replication">Set Up Redis Master/Slave Replication</h2>
<p>For this section, you will use two Linodes, a master and a slave.</p>
<blockquote class="callout border-brand"><strong class="callout-title">Note</strong>
<div class="leading-tight callout-body">To communicate over the private network, your master and slave Linodes must reside in the same data center.</div>
</blockquote>
<h3 id="prepare-your-linodes">Prepare Your Linodes</h3>
<ol>
<li>Set up both Linodes with a Redis instance, using the <a href="https://www.linode.com/docs/guides/install-and-configure-redis-on-centos-7/#install-redis">Installation</a> and <a href="https://www.linode.com/docs/guides/install-and-configure-redis-on-centos-7/#configure-redis">Configuration</a> steps from this guide. You can also copy your initially configured disk to another Linode using the <a href="https://www.linode.com/docs/platform/disk-images/disk-images-and-configuration-profiles/#cloning-disks-and-configuration-profiles" data-turbolinks="false">Clone</a> option in the Linode Manager.</li>
<li>Configure <a href="https://www.linode.com/docs/networking/remote-access/#adding-private-ip-addresses" data-turbolinks="false">Private IP Addresses</a> on both Linodes, and make sure you can access the master Linode’s private IP address from the slave. You will use only private addresses for replication traffic for security reasons.</li>
</ol>
<h3 id="configure-the-master-linode">Configure the Master Linode</h3>
<ol>
<li>Configure the master Redis instance to listen on a private IP address by updating the <code data-wg-notranslate="manual">bind</code> configuration option in <code data-wg-notranslate="manual">redis.conf</code>. Replace <code data-wg-notranslate="manual">192.0.2.100</code> with the master Linode’s private IP address:
<dl class="file font-mono text-xs pull-out" data-wg-notranslate="manual">
<dt class="relative px-8 py-3 bg-titlecolor sm:rounded-t-md text-white">File: /etc/redis.conf
<div class="absolute right-0 top-0 pt-3 pr-2"> </div>
</dt>
<dd class="overflow-x-scroll">
<div>
<div class="highlight">
<div class="chroma">
<table class="lntable">
<tbody>
<tr>
<td class="lntd">
<pre class="chroma"><code data-wg-notranslate="manual"><span class="lnt">1</span></code></pre>
</td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash" data-wg-notranslate="manual"><span class="nb">bind</span> 127.0.0.1 192.0.2.100</code></pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</dd>
</dl>
</li>
<li>Restart Redis to apply the changes:
<pre><code data-wg-notranslate="manual">sudo systemctl restart redis</code></pre>
</li>
</ol>
<h3 id="configure-the-slave-linode">Configure the Slave Linode</h3>
<ol>
<li>Configure a slave instance by adding the <code data-wg-notranslate="manual">slaveof</code> directive into <code data-wg-notranslate="manual">redis.conf</code> to setup the replication. Again replace <code data-wg-notranslate="manual">192.0.2.100</code> with the master Linode’s private IP address:
<dl class="file font-mono text-xs pull-out" data-wg-notranslate="manual">
<dt class="relative px-8 py-3 bg-titlecolor sm:rounded-t-md text-white">File: /etc/redis.conf
<div class="absolute right-0 top-0 pt-3 pr-2"> </div>
</dt>
<dd class="overflow-x-scroll">
<div>
<div class="highlight">
<div class="chroma">
<table class="lntable">
<tbody>
<tr>
<td class="lntd">
<pre class="chroma"><code data-wg-notranslate="manual"><span class="lnt">1</span></code></pre>
</td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash" data-wg-notranslate="manual">slaveof 192.0.2.100 <span class="m">6379</span></code></pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</dd>
</dl>
<p>The <code data-wg-notranslate="manual">slaveof</code> directive takes two arguments: the first is the IP address of the master node; the second is the Redis port specified in the master’s configuration.</p>
</li>
<li>Restart the slave Redis instance:
<pre><code data-wg-notranslate="manual">sudo systemctl restart redis</code></pre>
<p>After restarting, the slave Linode will attempt to synchronize its data set to master and then propagate the changes.</p>
</li>
</ol>
<h3 id="confirm-replication">Confirm Replication</h3>
<p>Test that the replication works. On your master Linode, run <code data-wg-notranslate="manual">redis-cli</code> and execute command <code data-wg-notranslate="manual">set 'a' 1</code></p>
<pre><code data-wg-notranslate="manual">redis-cli127.0.0.1:6379&gt; set 'a' 1OK</code></pre>
<p>Type <code data-wg-notranslate="manual">exit</code> or press <strong>Ctrl-C</strong> to exit from <code data-wg-notranslate="manual">redis-cli</code> prompt.</p>
<p>Next, run <code data-wg-notranslate="manual">redis-cli</code> on the slave Linode and execute <code data-wg-notranslate="manual">get 'a'</code>, which should return the same value as that on the master:</p>
<pre><code data-wg-notranslate="manual">redis-cli127.0.0.1:6379&gt; get 'a'"1"</code></pre>
<p>Your master/slave replication setup is working properly.</p>
<h2 id="secure-the-redis-installation">Secure the Redis Installation</h2>
<blockquote class="callout border-brand"><strong class="callout-title">Note</strong>
<div class="leading-tight callout-body">
<p><a href="https://www.linode.com/products/cloud-firewall/" target="_blank" rel="noopener">Linode Cloud Firewall</a> is now in beta! For more information on Cloud Firewall, see our <a href="https://www.linode.com/docs/guides/getting-started-with-cloud-firewall/">Tutorial for Adding and Configuring Linode Cloud Firewalls</a>.</p>
<p>For help with solving general firewall issues, see our guide on <a href="https://www.linode.com/docs/guides/troubleshooting-firewalls/">Troubleshooting Firewalls</a>.</p>
</div>
</blockquote>
<p>Since Redis is designed to work in trusted environments and with trusted clients, you should control access to the Redis instance. Some recommended security steps include:</p>
<ul>
<li>Set up a firewall using <a href="https://www.linode.com/docs/security/securing-your-server/#configure-a-firewall" data-turbolinks="false">your tool of choice</a>.</li>
<li>Encrypt Redis traffic using an SSH tunnel, or the methods described in the <a href="http://redis.io/topics/security" target="_blank" rel="noopener">Redis Security documentation</a>.</li>
</ul>
<p>Additionally, to ensure that no outside traffic accesses your Redis instance, we suggest that you only listen for connections on the localhost interface or your Linode’s private IP address.</p>
<h3 id="use-password-authentication">Use Password Authentication</h3>
<p>For an added layer of security, use password authentication to secure the connection between your master and slave Linodes.</p>
<ol>
<li>On your master Linode, uncomment the <code data-wg-notranslate="manual">requirepass</code> line in your Redis configuration and replace <code data-wg-notranslate="manual">master_password</code> with a secure password:
<dl class="file font-mono text-xs pull-out" data-wg-notranslate="manual">
<dt class="relative px-8 py-3 bg-titlecolor sm:rounded-t-md text-white">File: /etc/redis.conf
<div class="absolute right-0 top-0 pt-3 pr-2"> </div>
</dt>
<dd class="overflow-x-scroll">
<div>
<div class="highlight">
<div class="chroma">
<table class="lntable">
<tbody>
<tr>
<td class="lntd">
<pre class="chroma"><code data-wg-notranslate="manual"><span class="lnt">1</span></code></pre>
</td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash" data-wg-notranslate="manual">requirepass master_password</code></pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</dd>
</dl>
</li>
<li>Save your changes, and apply them by restarting Redis on the master Linode:
<pre><code data-wg-notranslate="manual">sudo systemctl restart redis</code></pre>
</li>
<li>On your slave Linode, add the master password to your Redis configuration under <code data-wg-notranslate="manual">masterpass</code>, and then create a unique password for the slave Linode with <code data-wg-notranslate="manual">requirepass</code>:
<dl class="file font-mono text-xs pull-out" data-wg-notranslate="manual">
<dt class="relative px-8 py-3 bg-titlecolor sm:rounded-t-md text-white">File: /etc/redis.conf
<div class="absolute right-0 top-0 pt-3 pr-2"> </div>
</dt>
<dd class="overflow-x-scroll">
<div>
<div class="highlight">
<div class="chroma">
<table class="lntable">
<tbody>
<tr>
<td class="lntd">
<pre class="chroma"><code data-wg-notranslate="manual"><span class="lnt">1</span><span class="lnt">2</span></code></pre>
</td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash" data-wg-notranslate="manual">masterpass  master_passwordrequirepass slave_password</code></pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</dd>
</dl>
<p>Replace <code data-wg-notranslate="manual">master_password</code> with the password you configured on your master, and replace <code data-wg-notranslate="manual">slave_password</code> with the password to use for your slave Linode.</p>
</li>
<li>Save your changes, and restart Redis on your slave Linode:
<pre><code data-wg-notranslate="manual">sudo systemctl restart redis</code></pre>
</li>
<li>Connect to <code data-wg-notranslate="manual">redis-cli</code> on your master Linode, and use <code data-wg-notranslate="manual">AUTH</code> to authenticate with your master password:
<pre><code data-wg-notranslate="manual">redis-cli127.0.0.1:6379&gt; AUTH master_password</code></pre>
</li>
<li>Once you’ve authenticated, you can view details about your Redis configuration by running <code data-wg-notranslate="manual">INFO</code>. This provides a lot of information, so you can specifically request the “Replication” section in your command:
<pre><code data-wg-notranslate="manual">127.0.0.1:6379&gt; INFO replication</code></pre>
<p>Output should be similar to the following:</p>
<pre><code data-wg-notranslate="manual"># Replicationrole:masterconnected_slaves:1slave0:ip=192.0.2.105,port=6379,state=online,offset=1093,lag=1</code></pre>
<p>It should confirm the master role of your Linode, as well as how many slave Linodes are connected to it.</p>
</li>
<li>From your slave Linode, connect to <code data-wg-notranslate="manual">redis-cli</code> and authenticate using your slave password:
<pre><code data-wg-notranslate="manual">redis-cli127.0.0.1:6379&gt; AUTH slave_password</code></pre>
</li>
<li>Once you’ve authenticated, use <code data-wg-notranslate="manual">INFO</code> to confirm your slave Linode’s role, and its connection to the master server:
<pre><code data-wg-notranslate="manual">127.0.0.1:6379&gt; INFO replication# Replicationrole:slavemaster_host:192.0.2.100master_port:6379master_link_status:up</code></pre>
</li>
</ol>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Creat user admin MongoDB</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/creat-user-admin-mongodb/index.html"/>
        <id>https://ddtrungit.github.io/creat-user-admin-mongodb/index.html</id>
            <category term="Linux"/>

        <updated>2022-06-13T14:25:37+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/106/images.png" alt="" />
                    https://www.howtoforge.com/tutorial/how-to-install-and-configure-mongodb-on-centos-7/ #sudo mongo &gt; use admin db.createUser( { user: "admin", pwd: "admin123", roles: [ { role: "userAdminAnyDatabase", db: "admin" }&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/106/images.png" alt="" />
                <div style="direction: ltr; border-width: 100%;">
<div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 6.6451in;">
<div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 6.6451in;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"><a href="https://www.howtoforge.com/tutorial/how-to-install-and-configure-mongodb-on-centos-7/">https://www.howtoforge.com/tutorial/how-to-install-and-configure-mongodb-on-centos-7/</a></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">#sudo mongo</p>
<p style="margin: 0in; margin-left: .375in;"><span style="font-family: Calibri; font-size: 11.0pt;">&gt; </span><span style="font-style: italic; font-family: 'Courier New'; font-size: 12.0pt; background: #F9F9F9;">use admin</span></p>
<p style="margin: 0in; margin-left: .375in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">db.createUser(</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">  {</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">    user: "admin",</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">    pwd: "admin123",</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">  }</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">)</span></p>
<p style="margin-left: .375in; margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">&gt; show users</span></p>
<p style="margin-top: 0pt; margin-bottom: 7pt; font-family: Tahoma; font-size: 15.75pt; color: #314d7c;"><span style="font-weight: bold; background: white;">Step 5 - Enable User Authentication in MongoDB</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">In this step, we will enable authentication for users to prevent that another user without sufficient privileges is able to see the data on the database.</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">On our CentOS 7 server, MongoDB is running under systemd with an init script in the '/etc/init.d/' dirctory. We will edit that script to force the mongodb service to run with the '--auth' option.</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Go to the '/etc/init.d/' directory and edit the "mongod" file:</span></p>
<p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">sudo vi /usr/lib/systemd/system/mongod.servicevim mongod</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">On line 15 you will find the "OPTION" variable, there we will add the "mongod" option.</span></p>
<p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: whitesmoke;">OPTIONS=" --auth -f $CONFIGFILE"</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Save the file.</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Reload the systemd service and restart MongoDB.</span></p>
<p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">$sudo systemctl daemon-reload</span></p>
<p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">$sudo systemctl restart mongod</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Next, we have to test the configuration by logging into the mongo shell and switch to the admin database, then try to see the admin users.</span></p>
<p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">$mongo</span></p>
<p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">&gt;use admin</span></p>
<p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">&gt;show users</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">You will see an error about the unauthorized execution of the command in the database admin. Now we need to use the command 'db.auth()' for the authentication.</span></p>
<p style="margin: 0in; font-family: 'Courier New'; font-size: 12.0pt; color: black;"><span style="font-style: italic; background: #F9F9F9;">db.auth('admin', 'admin123')</span></p>
<p style="margin: 0in; font-family: Tahoma; font-size: 10.5pt; color: #474b51;"><span style="background: white;">Now you can see the users with their roles and the privileges.</span></p>
<p style="margin-top: 7pt; margin-bottom: 7pt; font-family: 'Courier New'; font-size: 12.0pt; color: black;"> </p>
</div>
</div>
</div>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Install MongoDB Community Edition on Amazon Linux</title>
        <author>
            <name>Duong Dinh Trung</name>
        </author>
        <link href="https://ddtrungit.github.io/install-mongodb-community-edition-on-amazon-linux/index.html"/>
        <id>https://ddtrungit.github.io/install-mongodb-community-edition-on-amazon-linux/index.html</id>
            <category term="Linux"/>

        <updated>2022-06-13T14:25:49+07:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://ddtrungit.github.io/media/posts/105/images.png" alt="" />
                    https://docs.mongodb.com/manual/tutorial/install-mongodb-on-amazon/ Configure the package management system (yum). Create a /etc/yum.repos.d/mongodb-org-4.4.repo file so that you can install MongoDB directly using yum: [mongodb-org-4.4] name=MongoDB Repository&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <img src="https://ddtrungit.github.io/media/posts/105/images.png" alt="" />
                <div style="direction: ltr; border-width: 100%;">
<div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 7.6791in;">
<div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 7.6791in;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-amazon/">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-amazon/</a></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt;"><span style="font-weight: bold; font-family: Akzidenz; font-size: 13.5pt; color: #313030;">Configure the package management system (</span><span style="font-weight: bold; font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">yum</span><span style="font-weight: bold; font-family: Akzidenz; font-size: 13.5pt; color: #313030;">).</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">Create a </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">/etc/yum.repos.d/mongodb-org-4.4.repo</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;"> file so that you can install MongoDB directly using </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">yum</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">:</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </p>
<div style="direction: ltr;">
<table style="direction: ltr; border-collapse: collapse; border: 0pt solid #A3A3A3;" title="" border="0" summary="" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="border-width: 0pt; vertical-align: top; width: 5.102in; padding: 2.0pt 3.0pt 2.0pt 3.0pt;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">[mongodb-org-4.4]</p>
</td>
</tr>
<tr>
<td style="border-width: 0pt; vertical-align: top; width: 5.102in; padding: 2.0pt 3.0pt 2.0pt 3.0pt;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">name=MongoDB Repository</p>
</td>
</tr>
<tr>
<td style="border-width: 0pt; vertical-align: top; width: 5.1715in; padding: 2.0pt 3.0pt 2.0pt 3.0pt;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">baseurl=https://repo.mongodb.org/yum/amazon/2/mongodb-org/4.4/x86_64/</p>
</td>
</tr>
<tr>
<td style="border-width: 0pt; vertical-align: top; width: 5.102in; padding: 2.0pt 3.0pt 2.0pt 3.0pt;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">gpgcheck=1</p>
</td>
</tr>
<tr>
<td style="border-width: 0pt; vertical-align: top; width: 5.102in; padding: 2.0pt 3.0pt 2.0pt 3.0pt;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">enabled=1</p>
</td>
</tr>
<tr>
<td style="border-width: 0pt; vertical-align: top; width: 5.102in; padding: 2.0pt 3.0pt 2.0pt 3.0pt;">
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">gpgkey=https://www.mongodb.org/static/pgp/server-4.4.asc</p>
</td>
</tr>
</tbody>
</table>
</div>
<p style="margin-top: 18pt; margin-bottom: 18pt;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">You can also download the </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">.rpm</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;"> files directly from the </span><a href="https://repo.mongodb.org/yum/amazon/"><span style="font-family: Akzidenz; font-size: 12.0pt;">MongoDB repository</span></a><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">. Downloads are organized by Amazon Linux version (e.g. </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">2</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">), then MongoDB </span><a href="https://docs.mongodb.com/manual/reference/versioning/"><span style="font-family: Akzidenz; font-size: 12.0pt;">release version</span></a><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;"> (e.g. </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">4.4</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">), then architecture (e.g. </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">x86_64</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">). Odd-numbered MongoDB release versions, such as </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">4.3</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747;">, are development versions and are unsuitable for production deployment.</span></p>
<p style="margin: 0in; font-family: Akzidenz; font-size: 12.0pt; color: #979797;"><span style="font-weight: bold;">2</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 13.5pt; color: #313030;"><span style="font-weight: bold;">Install the MongoDB packages.</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt; font-family: Akzidenz; font-size: 12.0pt; color: #494747;">To install the latest stable version of MongoDB, issue the following command:</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo yum install -y mongodb-org</p>
<p style="margin-top: 18pt; margin-bottom: 18pt; font-family: Akzidenz; font-size: 18.0pt; color: #313030;"><span style="background: white;">Run MongoDB Community Edition</span></p>
<p style="margin: 0in; margin-left: .375in; font-family: Akzidenz; font-size: 12.0pt; color: #494747;"><span style="font-weight: bold; background: white;">ulimit Considerations</span></p>
<p style="margin-left: .75in; margin-top: 2pt; margin-bottom: 7pt;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">Most Unix-like operating systems limit the system resources that a process may use. These limits may negatively impact MongoDB operation, and should be adjusted. See </span><a href="https://docs.mongodb.com/manual/reference/ulimit/"><span style="font-family: Akzidenz; font-size: 12.0pt; background: white;">UNIX </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; background: white;">ulimit</span><span style="font-family: Akzidenz; font-size: 12.0pt; background: white;"> Settings</span></a><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> for the recommended settings for your platform.</span></p>
<p style="margin: 0in; margin-left: .75in; line-height: 12pt; font-family: Akzidenz; font-size: 9.0pt; color: #1a567e;"><span style="font-weight: bold; background: white;">NOTE</span></p>
<p style="margin: 0in; margin-left: .75in; line-height: 18pt;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #0d324f; background: white;">Starting in MongoDB 4.4, a startup error is generated if the </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">ulimit</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #0d324f; background: white;"> value for number of open files is under </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">64000</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #0d324f; background: white;">.</span></p>
<p style="margin: 0in; margin-left: .375in; font-family: Akzidenz; font-size: 12.0pt; color: #494747;"><span style="font-weight: bold; background: white;">Directories</span></p>
<p style="margin-left: .75in; margin-top: 2pt; margin-bottom: 7pt; font-family: Akzidenz; font-size: 12.0pt; color: #494747;"><span style="background: white;">By default, MongoDB instance stores:</span></p>
<ul style="margin-left: 1.125in; direction: ltr; unicode-bidi: embed; margin-top: 0in; margin-bottom: 0in;" type="disc">
<li style="margin-top: 0; margin-bottom: 0; vertical-align: middle; color: #494747;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">its data files in </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">/var/lib/mongo</span></li>
<li style="margin-top: 0; margin-bottom: 0; vertical-align: middle; color: #494747;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">its log files in </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">/var/log/mongodb</span></li>
</ul>
<p style="margin-left: .75in; margin-top: 2pt; margin-bottom: 7pt;"><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">If you installed via the package manager, these default directories are created during the installation.If you installed manually by downloading the tarballs, you can create the directories using </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">mkdir -p &lt;directory&gt;</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> or </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">sudo mkdir -p &lt;directory&gt;</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> depending on the user that will run MongoDB. (See your linux man pages for information on </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">mkdir</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> and </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">sudo</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">.)By default, MongoDB runs using the </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">mongod</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> user account. If you change the user that runs the MongoDB process, you </span><span style="font-weight: bold; font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">must</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> also modify the permission to the </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">/var/lib/mongo</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> and </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">/var/log/mongodb</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> directories to give this user access to these directories.To specify a different log file directory and data file directory, edit the </span><a href="https://docs.mongodb.com/manual/reference/configuration-options/#mongodb-setting-systemLog.path"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; background: white;">systemLog.path</span></a><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> and </span><a href="https://docs.mongodb.com/manual/reference/configuration-options/#mongodb-setting-storage.dbPath"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; background: white;">storage.dbPath</span></a><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;"> settings in the </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt; color: black; background: white;">/etc/mongod.conf</span><span style="font-family: Akzidenz; font-size: 12.0pt; color: #494747; background: white;">. Ensure that the user running MongoDB has access to these directories.</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 13.5pt; color: #313030;"><span style="font-weight: bold;">Procedure</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt; font-family: Calibri; font-size: 11.0pt;">Follow these steps to run MongoDB Community Edition. These instructions assume that you are using the default settings.</p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 12.0pt; color: #313030;"><span style="font-weight: bold;">Start MongoDB.</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">You can start the </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> process by issuing the following command:</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo systemctl start mongod</p>
<p style="margin-top: 18pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">If you receive an error similar to the following when starting </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;">:</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; font-family: 'Source Code Pro'; font-size: 10.0pt; color: black;">Failed to start mongod.service: Unit mongod.service not found.</p>
<p style="margin-top: 18pt; margin-bottom: 18pt; font-family: Calibri; font-size: 11.0pt;">Run the following command first:</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo systemctl daemon-reload</p>
<p style="margin-top: 18pt; margin-bottom: 18pt; font-family: Calibri; font-size: 11.0pt;">Then run the start command above again.</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: #979797;"><span style="font-weight: bold;">2</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 12.0pt; color: #313030;"><span style="font-weight: bold;">Verify that MongoDB has started successfully.</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">You can verify that the </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> process has started successfully by issuing the following command:</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo systemctl status mongod</p>
<p style="margin-top: 18pt; margin-bottom: 18pt; font-family: Calibri; font-size: 11.0pt;">You can optionally ensure that MongoDB will start following a system reboot by issuing the following command:</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo systemctl enable mongod</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: #979797;"><span style="font-weight: bold;">3</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 12.0pt; color: #313030;"><span style="font-weight: bold;">Stop MongoDB.</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">As needed, you can stop the </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> process by issuing the following command:</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo systemctl stop mongod</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: #979797;"><span style="font-weight: bold;">4</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 12.0pt; color: #313030;"><span style="font-weight: bold;">Restart MongoDB.</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">You can restart the </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> process by issuing the following command:</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">sudo systemctl restart mongod</p>
<p style="margin-top: 18pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">You can follow the state of the process for errors or important messages by watching the output in the </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">/var/log/mongodb/mongod.log</span><span style="font-family: Calibri; font-size: 11.0pt;"> file.</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: #979797;"><span style="font-weight: bold;">5</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; line-height: 18pt; font-family: Akzidenz; font-size: 12.0pt; color: #313030;"><span style="font-weight: bold;">Begin using MongoDB.</span></p>
<p style="margin-top: 0pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">Start a </span><a href="https://docs.mongodb.com/manual/reference/program/mongo/#mongodb-binary-bin.mongo"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongo</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> shell on the same host machine as the </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;">. You can run the </span><a href="https://docs.mongodb.com/manual/reference/program/mongo/#mongodb-binary-bin.mongo"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongo</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> shell without any command-line options to connect to a </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> that is running on your localhost with default port 27017:</span></p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">mongo</p>
<p style="margin-top: 18pt; margin-bottom: 18pt;"><span style="font-family: Calibri; font-size: 11.0pt;">For more information on connecting using the </span><a href="https://docs.mongodb.com/manual/reference/program/mongo/#mongodb-binary-bin.mongo"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongo</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> shell, such as to connect to a </span><a href="https://docs.mongodb.com/manual/reference/program/mongod/#mongodb-binary-bin.mongod"><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongod</span></a><span style="font-family: Calibri; font-size: 11.0pt;"> instance running on a different host and/or port, see </span><a href="https://docs.mongodb.com/manual/mongo/"><span style="font-family: Calibri; font-size: 11.0pt;">The </span><span style="font-family: 'Source Code Pro'; font-size: 10.0pt;">mongo</span><span style="font-family: Calibri; font-size: 11.0pt;"> Shell</span></a><span style="font-family: Calibri; font-size: 11.0pt;">.</span></p>
<p style="margin-top: 18pt; margin-bottom: 18pt; font-family: Calibri; font-size: 11.0pt;">To help you start using MongoDB, MongoDB provides <a href="https://docs.mongodb.com/manual/tutorial/getting-started/#std-label-getting-started">Getting Started Guides</a> in various driver editions. For the driver documentation, see <a href="https://api.mongodb.com/">Start Developing with MongoDB</a>.</p>
<p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </p>
</div>
<hr>
<div style="direction: ltr; border-width: 100%;">
<div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 2.8118in;">
<div style="direction: ltr; margin-top: 0in; margin-left: 0in; width: 2.8118in;">
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;"> $mongo – -version</span></p>
<p style="margin-top: 0pt; margin-bottom: 10pt; font-family: inherit; font-size: 10.0pt; color: #444444;"><span style="background: white;">Some Basic Commands for MongoDB</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">1) To show all databases in MongoDB</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;">   &gt; show dbs ;</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">2)  create a database or switch to already created databases</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;">  &gt; use my-db;</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">  Note: This DB will not show in show dbs; command until we do not insert any data in this. </span></p>
<p style="margin: 0in; font-family: 'Source Sans Pro'; font-size: 19.9pt; color: black;"><span style="background: white;"> </span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">3) Insert data into the newly created database.</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">$ db.Any data that represents your collection .insert({“data you want “:”value of the data”})</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;">  &gt; db.names.insert({“username_name”:”chandan”})</span></p>
<p style="margin: 0in; font-family: 'Source Sans Pro'; font-size: 19.9pt; color: black;"><span style="background: white;"> </span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">4) show your collections</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;"> &gt; show collections;</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">5) Delete your collections</span></p>
<p style="margin: 0in; font-family: 'Source Sans Pro'; font-size: 19.9pt; color: black;"><span style="background: white;">db.name of your collection.drop();</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;"> &gt; db.”names”.drop() ;</span></p>
<p style="margin: 0in; font-family: 'Source Sans Pro'; font-size: 19.9pt; color: black;"><span style="background: white;"> </span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">6) Drop the database</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: black;"><span style="background: white;">Make sure to switch to the database you want to delete and run the following command.</span></p>
<p style="margin: 0in; font-family: inherit; font-size: 19.9pt; color: navy;"><span style="background: white;"> &gt; db.dropDatabase() ;</span></p>
<hr>
<p> </p>
</div>
</div>
</div>
</div>
</div>
            ]]>
        </content>
    </entry>
</feed>
