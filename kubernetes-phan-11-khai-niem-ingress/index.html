<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>[Kubernetes] Phần 11: Khái niệm Ingress - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#D73A42" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#D73A42"><meta name="apple-mobile-web-app-status-bar-style" content="#D73A42"><link rel="alternate" type="application/atom+xml" href="http://blog.dtrungit.ga/feed.xml"><link rel="alternate" type="application/json" href="http://blog.dtrungit.ga/feed.json"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="stylesheet" href="http://blog.dtrungit.ga/assets/css/style.css?v=57332019283b097fa755d17b0d684374"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.dtrungit.ga/kubernetes-phan-11-khai-niem-ingress/index.html"},"headline":"[Kubernetes] Phần 11: Khái niệm Ingress","datePublished":"2022-06-15T15:28","dateModified":"2022-06-15T15:28","image":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/posts/126/k8s.png","height":458,"width":816},"description":"Tổng quan Trong K8s, Ingress là đối tượng sử dụng để expose service nằm bên trong Cluster ra bên ngoài&hellip;","author":{"@type":"Person","name":"Duong Dinh Trung","url":"http://blog.dtrungit.ga/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="http://blog.dtrungit.ga/index.html" class="logo"><img src="http://blog.dtrungit.ga/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="http://blog.dtrungit.ga/index.html" target="_self">Home</a></li><li><a href="http://blog.dtrungit.ga/lien-he/index.html" target="_self">Contact</a></li><li><a href="http://blog.dtrungit.ga/gioi-thieu/index.html" target="_self">About</a></li><li><a href="http://blog.dtrungit.ga/tags/aws/index.html" target="_self">AWS</a></li><li class="has-submenu"><a href="http://blog.dtrungit.ga/tags/linux/index.html" target="_self" aria-haspopup="true">Linux</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="http://blog.dtrungit.ga/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="http://blog.dtrungit.ga/tags/k8s/index.html" target="_self">Kubernetes</a></li><li><a href="http://blog.dtrungit.ga/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="http://blog.dtrungit.ga/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="http://blog.dtrungit.ga/tags/tip/index.html" target="_self">TIP</a></li></ul></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><h1 class="post__title">[Kubernetes] Phần 11: Khái niệm Ingress</h1><div class="post__meta"><div class="post__author">By <a href="http://blog.dtrungit.ga/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div><div class="post__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-11-khai-niem-ingress/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></div></header><figure class="post__featured-image"><img src="http://blog.dtrungit.ga/media/posts/126/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/126/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/126/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/126/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/126/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="458" width="816" alt=""></figure><div class="post__inner"><div class="post__entry"><h2>Tổng quan</h2><p>Trong K8s, Ingress là đối tượng sử dụng để expose service nằm bên trong Cluster ra bên ngoài Internet. Với Ingress, ta có thể tạo ra nhiều rule khác nhau để điều tiết traffic tới các services. Sử dụng Ingress để expose service sẽ đơn giản hơn sử dụng Load Balancer và expose service trên từng Node</p><p>Ví dụ:</p><ul><li>Khi có request tới domain <code>example.com/api/v1/</code> sẽ tới <code>api-v1 service</code>,</li><li>Khi có request tới domain <code>example.com/api/v2/</code> sẽ tới <code>api-v2 service</code>,</li></ul><h2><a href="https://github.com/lacoski/kubernetes-note/blob/main/docs/2.9-ingress-k8s.md#th%E1%BA%BF-n%C3%A0o-l%C3%A0-ingress-controller"></a>Thế nào là Ingress Controller?</h2><p>Ingress Controller là một ứng dụng chạy trong một cluster và sử dụng cấu hình LoadBalancer HTTP theo tài nguyên Ingress. Loadbalancer này có thể là chạy bằng phần mềm trong cluster (MetalLB), Loadbalancer phần cứng hoặc là Loadbalancer dịch vụ cloud bên ngoài. Với mỗi LoadBalancer khác nhau đòi hỏi phải thực hiện Ingress Controller khác nhau.</p><h2><a href="https://github.com/lacoski/kubernetes-note/blob/main/docs/2.9-ingress-k8s.md#kubernetes-ingress-vs-loadbalancer-vs-nodeport"></a>Kubernetes Ingress vs LoadBalancer vs NodePort</h2><p>Các option trên đều sử dụng với mục đích Expose service từ nội bộ Cluster ra bên ngoài internet.</p><h3><a href="https://github.com/lacoski/kubernetes-note/blob/main/docs/2.9-ingress-k8s.md#nodeport"></a>NodePort</h3><p>Đánh giá:</p><ul><li>Phương pháp cấu hình đơn giản, service được chọn dạng NodePort. Sau đó K8s sẽ cấp 1 Port xác định trên mỗi node thuộc Cluster cho service.</li><li>Tất cả traffic tới Port sẽ được forward vào bên trong Service và tới các Pod bên trong</li><li>Phương pháp có nhược điểm, quản lý Port cấp phát không rõ ràng, đôi khi cấp phát port chồng chéo</li></ul><figure class="wp-block-image size-full"><figure class="wp-image-515"><img loading="lazy" src="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-8.png" data-is-external-image="true" sizes="(max-width: 878px) 100vw, 878px" srcset="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-8.png 878w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-8-300x246.png 300w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-8-768x630.png 768w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic1-8-816x669.png 816w" alt="" width="878" height="720" loading="lazy"></figure></figure><h3>LoadBalancer</h3><p>Đánh giá:</p><ul><li>Phương pháp cấu hình LoadBalancer khá giống NodePort – Sử dụng file YAML</li><li>Tuy nhiên phương pháp yêu cầu External Loadblancer, thường được cung cấp bởi các cloud providerm, không sẵn khi cài Kubernetes mặc định.</li><li>Với phương pháp cài thủ công, phải triển khai thêm thành phần LB khá phức tạp</li><li>Khi có thành phần LB, mỗi khi tạo mới 1 service, thành phần LB sẽ cấp cho Service 1 IP External để người dùng truy cập. Đây cũng là IP để expose service k8s ra ngoài Internet.</li></ul><figure class="wp-block-image size-full"><figure class="wp-image-516"><img loading="lazy" src="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-5.png" data-is-external-image="true" sizes="(max-width: 800px) 100vw, 800px" srcset="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-5.png 800w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-5-262x300.png 262w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic2-5-768x880.png 768w" alt="" width="800" height="917" loading="lazy"></figure></figure><h3>Ingress</h3><p>Đánh giá:</p><ul><li>NodePort và LoadBalancer expose service bằng cách chỉ định service type. Ingress tiếp cập theo phương pháp khác</li><li>Với Ingress, tập trung vào điều phối HTTP và HTTPs Request từ bên ngoài vào trong Cluster</li><li>Có thể sử dụng kết hợp Ingress + LB hoặc Ingress + NodePort.</li><li>Nếu sử dụng Ingress + NodePort thì ta sẽ không cần triển khai thành phần LB. Nhược điểm, chỉ có thể Expose Port từ <code>30000-32767</code></li></ul><p>VD:</p><ul><li>Khi có request tới domain <code>example.com/api/v1/</code> sẽ tới <code>api-v1 service</code>,</li><li>Khi có request tới domain <code>example.com/api/v2/</code> sẽ tới <code>api-v2 service</code>,</li></ul><p>Các loại Ingress Controller thông dụng:</p><ul><li>NGINX Ingress Controller</li><li>HAProxy Ingress Controller</li><li> </li></ul><figure class="wp-block-image size-full"><figure class="wp-image-517"><img loading="lazy" src="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-5.png" data-is-external-image="true" sizes="(max-width: 805px) 100vw, 805px" srcset="https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-5.png 805w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-5-300x294.png 300w, https://blog.devopsviet.com/wp-content/uploads/2021/08/pic3-5-768x754.png 768w" alt="" width="805" height="790" loading="lazy"></figure></figure><h2>Nguồn</h2><p><a href="https://collabnix.github.io/kubelabs/Ingress101/">https://collabnix.github.io/kubelabs/Ingress101/</a></p><p><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">https://kubernetes.io/docs/concepts/services-networking/ingress/</a></p></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div><nav class="post__nav"><div class="post__nav__prev"><a class="post__nav__link" href="http://blog.dtrungit.ga/kubernetes-phan-10-khai-niem-job/index.html" rel="prev">Previous Post<h3 class="h6">[Kubernetes] Phần 10: Khái niệm Job</h3></a></div><div class="post__nav__next"><a class="post__nav__link" href="http://blog.dtrungit.ga/kubernetes-phan-12-khai-niem-helm/index.html" rel="prev">Next Post<h3 class="h6">[Kubernetes] Phần 12: Khái niệm Helm</h3></a></div></nav></footer></div></article><div class="comments-area post__inner" id="comments"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div class="fb-comments" data-href="http://blog.dtrungit.ga/kubernetes-phan-11-khai-niem-ingress/" data-width="100%" data-colorscheme="light" data-lazy="true" data-order-by="reverse_time" data-numposts="5"></div><noscript>Please enable JS to use the comments form.</noscript></div></div><div id="fb-root"></div><script type="text/javascript" async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v12.0">nonce="n4mWU9e7"</script></div></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-phan-7-khai-niem-services/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/122/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/122/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/122/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/122/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/122/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-7-khai-niem-services/index.html" class="invert">[Kubernetes] Phần 7: Khái niệm Services</a></h3></header><p class="c-card__text">1. Tổng quan Về mặt lý thuyết, ta có thể expose để người dùng kết nối trực tiếp tới Pod.</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-7-khai-niem-services/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/121/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/121/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/121/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/121/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/121/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html" class="invert">[Kubernetes] Phần 6: Khái niệm Scheduling</a></h3></header><p class="c-card__text">Tổng quan Kubernetes Scheduler (kube-scheduler) là thành phần core trong k8s. Thành phần này sẽ tính toán để tìm node&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-6-khai-niem-scheduling/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-5-khai-niem-deployment/index.html" class="invert">[Kubernetes] Phần 5: Khái niệm Deployment</a></h3></header><p class="c-card__text">Tổng quan Với ReplicateSet, ta chỉ có thể tăng giảm số lượng Pod, nhưng vấn để của RS là không&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-5-khai-niem-deployment/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article><article class="c-card"><a href="http://blog.dtrungit.ga/kubernetes-phan-4-khai-niem-replicateset/index.html" class="c-card__image"><img src="http://blog.dtrungit.ga/media/posts/119/k8s.png" srcset="http://blog.dtrungit.ga/media/posts/119/responsive/k8s-xs.png 300w, http://blog.dtrungit.ga/media/posts/119/responsive/k8s-sm.png 480w, http://blog.dtrungit.ga/media/posts/119/responsive/k8s-md.png 768w, http://blog.dtrungit.ga/media/posts/119/responsive/k8s-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="458" width="816" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="http://blog.dtrungit.ga/tags/k8s/index.html">K8s</a></div><h3 class="c-card__title"><a href="http://blog.dtrungit.ga/kubernetes-phan-4-khai-niem-replicateset/index.html" class="invert">[Kubernetes] Phần 4: Khái niệm ReplicateSet</a></h3></header><p class="c-card__text">Tổng quan ReplicateSet được sử dụng để duy trì một tập replicate các Pod ổn định theo thời gian ReplicateSet&hellip;</p><footer class="c-card__meta"><div class="c-card__comments"><a href="http://blog.dtrungit.ga/kubernetes-phan-4-khai-niem-replicateset/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></footer></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="http://blog.dtrungit.ga/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>