<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Thiết lập cảnh báo qua telegram - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#D73A42" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#D73A42"><meta name="apple-mobile-web-app-status-bar-style" content="#D73A42"><link rel="alternate" type="application/atom+xml" href="http://blog.dtrungit.ga/feed.xml"><link rel="alternate" type="application/json" href="http://blog.dtrungit.ga/feed.json"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="shortcut icon" href="http://blog.dtrungit.ga/media/website/cropped-2019-09-16-32x32.png" type="image/x-icon"><link rel="stylesheet" href="http://blog.dtrungit.ga/assets/css/style.css?v=4becd99c93342dd7c117b97188f052e6"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.dtrungit.ga/thiet-lap-canh-bao-qua-telegram/index.html"},"headline":"Thiết lập cảnh báo qua telegram","datePublished":"2021-01-27T08:29","dateModified":"2022-06-13T14:33","image":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/posts/81/tai-xuong-3.png","height":225,"width":225},"description":"Zabbix hỗ trợ cảnh báo qua nhiều kênh khác nhau để người quản trị có thể chủ động nhận được&hellip;","author":{"@type":"Person","name":"Duong Dinh Trung","url":"http://blog.dtrungit.ga/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"http://blog.dtrungit.ga/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="http://blog.dtrungit.ga/index.html" class="logo"><img src="http://blog.dtrungit.ga/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="http://blog.dtrungit.ga/index.html" target="_self">Home</a></li><li><a href="http://blog.dtrungit.ga/lien-he/index.html" target="_self">Contact</a></li><li><a href="http://blog.dtrungit.ga/gioi-thieu/index.html" target="_self">About</a></li><li><a href="http://blog.dtrungit.ga/tags/aws/index.html" target="_self">AWS</a></li><li><a href="http://blog.dtrungit.ga/tags/oracle/index.html" target="_self">Oracle</a></li><li class="has-submenu"><a href="http://blog.dtrungit.ga/tags/linux/index.html" target="_self" aria-haspopup="true">Linux</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="http://blog.dtrungit.ga/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="http://blog.dtrungit.ga/tags/k8s/index.html" target="_self">Kubernetes</a></li><li><a href="http://blog.dtrungit.ga/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="http://blog.dtrungit.ga/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="http://blog.dtrungit.ga/tags/tip/index.html" target="_self">TIP</a></li></ul></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><h1 class="post__title">Thiết lập cảnh báo qua telegram</h1><div class="post__meta"><div class="post__author">By <a href="http://blog.dtrungit.ga/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div><div class="post__comments"><a href="http://blog.dtrungit.ga/thiet-lap-canh-bao-qua-telegram/index.html#comments" rel="nofollow" aria-label="Comments"><svg aria-hidden="true"><title>Comments</title><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#comments"/></svg></a></div></div></header><figure class="post__featured-image"><img src="http://blog.dtrungit.ga/media/posts/81/tai-xuong-3.png" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/tai-xuong-3-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/tai-xuong-3-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/tai-xuong-3-md.png 768w, http://blog.dtrungit.ga/media/posts/81/responsive/tai-xuong-3-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="225" width="225" alt=""></figure><div class="post__inner"><div class="post__entry"><p></p><p>Zabbix hỗ trợ cảnh báo qua nhiều kênh khác nhau để người quản trị có thể chủ động nhận được thông tin cảnh báo, giúp xử lý kịp thời các sự cố hệ thống của mình. Ngoài email là kênh truyền thống phổ thông nhất hiện nay telegram cũng là một ứng dụng được dân kỹ thuật sử dụng, telegram gọn, nhẹ, nhanh, nhạy, có hỗ trợ app trên thiết bị di động. Ở bài hướng dẫn này sẽ hướng dẫn các bạn các bước cài đặt cảnh báo zabbix qua telegram.</p><p></p><p></p><p>Mục lục</p><p></p><p></p><p><a href="https://blogcloud365vn.github.io/monitor/zabbix4-thiet-lap-canh-bao-qua-telegram/#bot">1. Tạo bot telegram</a></p><p></p><p></p><p><a href="https://blogcloud365vn.github.io/monitor/zabbix4-thiet-lap-canh-bao-qua-telegram/#script">2. Cấu hình alert scripts telegram</a></p><p></p><p></p><p><a href="https://blogcloud365vn.github.io/monitor/zabbix4-thiet-lap-canh-bao-qua-telegram/#telegram">3. Cấu hình cảnh báo telegram trên Web Zabbix</a></p><p></p><p></p><p>Tạo bot hiểu cơ bản là tạo một room được bot API Telegram hỗ trợ lắng nghe và gửi các bản tin cảnh báo. Yêu cầu bạn phải cài đặt ứng dụng telegram và tạo tài khoản để sử dụng.</p><p></p><p></p><p>Truy cập link <a href="https://telegram.me/BotFather">https://telegram.me/BotFather</a> telegram sẽ yêu cầu bạn mở app telegram và vào channel Botfarther, ở đó có thể tạo bot cho riêng mình.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-190"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-7-1024x325.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-7-1024x325-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-7-1024x325-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-7-1024x325-md.png 768w" alt=""></figure></figure><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-191"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-8.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-8-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-8-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-8-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Thực hiện tạo bot</p><p></p><p></p><p>/newbot</p><p></p><p></p><p>Đặt tên cho bot telegram. Chú ý tên của bot phải là chữ thường và kết thúc bằng chuỗi bot</p><p></p><p></p><p>namebot</p><p></p><p></p><p>Đặt username cho bot</p><p></p><p></p><p>namebot</p><p></p><p></p><p>Khi tạo bot thành công telegram sẽ trả lại cho bạn thông tin của bot: kênh telegram vừa tạo, chuỗi token.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-192"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-9.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-9-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-9-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-9-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Bạn lưu lại chuỗi token để khai báo trong script gửi cảnh báo.</p><p></p><p></p><p>2. Cấu hình alert scripts telegram<a href="https://blogcloud365vn.github.io/monitor/zabbix4-thiet-lap-canh-bao-qua-telegram/#2-cau-hinh-alert-scripts-telegram">#</a></p><p></p><p></p><p>2.1. Download scripts alert telegram</p><p></p><p></p><p>Vào thưc mục để chứa scripts và download scripts về.</p><p></p><p></p><p>cd /usr/lib/zabbix/alertscripts<br>wget <a href="https://raw.githubusercontent.com/domanhduy/zabbix-monitor/master/Alert/TelegramV1/zabbix-telegram.sh">https://raw.githubusercontent.com/domanhduy/zabbix-monitor/master/Alert/TelegramV1/zabbix-telegram.sh</a><br>chmod +x zabbix-telegram.sh</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-193"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-10-1024x232.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-10-1024x232-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-10-1024x232-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-10-1024x232-md.png 768w" alt=""></figure></figure><p></p><p></p><p>2.2. Chỉnh sửa file scripts</p><p></p><p></p><p>Để người quản trị có thể nhận được các cảnh báo thông qua telegram, phải sửa tham số ZBX_URL là địa chỉ zabbix server, USERNAME, PASSWORD, BOT_TOKEN là chuỗi token telegram bot đã tạo ở trên nhận cảnh cáo.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-194"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-11.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-11-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-11-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-11-md.png 768w" alt=""></figure></figure><p></p><p></p><p>3. Cấu hình cảnh báo telegram trên Web Zabbix<a href="https://blogcloud365vn.github.io/monitor/zabbix4-thiet-lap-canh-bao-qua-telegram/#3-cau-hinh-canh-bao-telegram-tren-web-zabbix">#</a></p><p></p><p></p><p>3.1. Truy cập zabbix server</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-195"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-12-1024x445.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-12-1024x445-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-12-1024x445-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-12-1024x445-md.png 768w" alt=""></figure></figure><p></p><p></p><p>3.2. Tạo media type</p><p></p><p></p><p>Media type chính là các kênh kể zabbix server gửi cảnh báo có thể là Email, SMS hay một kênh được tạo ra bằng scripts.</p><p></p><p></p><p>Click Administrator -&gt; Media types -&gt; Create media type</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-196"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-13-1024x309.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-13-1024x309-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-13-1024x309-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-13-1024x309-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Nhập các thông tin về media type mới</p><p></p><p></p><p>Name: Telegram (Tên có thể tùy đặt)<br>Type: Script<br>Script name: Tên của script có trong thư mục alert script của server zabbix<br>Script parameter:<br>{ALERT.SENDTO}<br>{ALERT.SUBJECT}<br>{ALERT.MESSAGE}</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-197"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-14.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-14-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-14-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-14-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Tạo thành công Media type mới có tên là Telegram</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-198"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-15-1024x333.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-15-1024x333-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-15-1024x333-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-15-1024x333-md.png 768w" alt=""></figure></figure><p></p><p></p><p>3.3. Set user nhận alert qua Tetegram</p><p></p><p></p><p>Mỗi user muốn nhận cảnh báo zabbix gửi về telegram ta phải lấy được CHAT ID telegram của người dùng đó.</p><p></p><p></p><figure class="wp-block-embed"><div class="wp-block-embed__wrapper">https://api.telegram.org/bot${TOKEN}/getUpdates</div></figure><p></p><p></p><p>Với ${TOKEN} chính là cả chuỗi token API mà khi tạo bot telegram trả về ở trên.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-199"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-16.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-16-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-16-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-16-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Chat trên app ở kênh của mình vừa tạo và F5 trình duyệt sẽ thấy thông tin vừa chat, sẽ lấy được CHAT ID.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-200"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-17-1024x65.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-17-1024x65-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-17-1024x65-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-17-1024x65-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Thiết lập user nhận alert qua telegram</p><p></p><p></p><p>Click Administrator -&gt; User -&gt; Lựa chọn user nhận cảnh báo</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-201"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-18.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-18-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-18-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-18-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Click tab Media -&gt; Add</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-202"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-19.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-19-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-19-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-19-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Thiết lập telegram nhận cảnh báo</p><p></p><p></p><p>Type: Chính là type mà đã tạo ở trên<br>Sento: CHAT ID sẽ nhận được alert<br>Use of serverity: Các mức cảnh bảo<br>Enable: Tích chọn</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-203"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-20.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-20-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-20-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-20-md.png 768w" alt=""></figure></figure><p></p><p></p><p>User Admin đã được thiết lập nhận cảnh báo qua telegram.</p><p></p><p></p><p>Click Update</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-204"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-21.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-21-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-21-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-21-md.png 768w" alt=""></figure></figure><p></p><p></p><p>3.4. Tạo action</p><p></p><p></p><p>Tạo action để khi có sự bất thường đối với các thông số monitor sẽ có alert qua telegram.</p><p></p><p></p><p>Click Configuration -&gt; Action -&gt; Create action</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-205"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-22-1024x363.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-22-1024x363-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-22-1024x363-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-22-1024x363-md.png 768w" alt=""></figure></figure><p></p><p></p><p><strong>Tại tab action</strong></p><p></p><p></p><p>Nhập thông tin:</p><p></p><p></p><p>Name: Tên của action muốn tạo</p><p></p><p></p><p><strong>Tab operation</strong>: Thiết lập thông tin về bản tin cảnh báo gửi đi</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-206"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-23.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-23-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-23-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-23-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Default subject (Tiêu đề của thông báo)</p><p></p><p></p><p>Disaster {HOSTNAME}:{TRIGGER.NAME}-status-{TRIGGER.STATUS}</p><p></p><p></p><p>Default message (Nội dung của thông báo)</p><p></p><p></p><p>{TRIGGER.NAME} on {HOSTNAME}<br>Status:{TRIGGER.STATUS}<br>Severity:{TRIGGER.SEVERITY}<br>Values:{ITEM.VALUE1}</p><p></p><p></p><p>Item Graphic: [{ITEM.ID1}]</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-207"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-24.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-24-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-24-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-24-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Set group hoặc chỉ định user nhận được cảnh báo.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-208"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-25.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-25-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-25-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-25-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Set cho action gửi cảnh báo qua kênh nào. Có thể lựa chọn một hoặc nhiều kênh.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-209"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-26.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-26-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-26-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-26-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Click Add</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-210"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-27.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-27-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-27-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-27-md.png 768w" alt=""></figure></figure><p></p><p></p><p><strong>Tab Recovery operation</strong>: Thiết lập thông tin về bản tin cảnh báo gửi đi khi không vấn đề được giải quyết, dưới ngưỡng cảnh báo.</p><p></p><p></p><p>Default subject (Tiêu đề của thông báo recovery)</p><p></p><p></p><p>OK Resolved: {HOSTNAME}:{TRIGGER.NAME}-status-{TRIGGER.STATUS}</p><p></p><p></p><p>Default message (Nội dung của thông báo)</p><p></p><p></p><p>{TRIGGER.NAME} on {HOSTNAME}<br>Status: {TRIGGER.STATUS}<br>Severity: {TRIGGER.SEVERITY}<br>Values: {ITEM.VALUE1}</p><p></p><p></p><p>Item Graphic: [{ITEM.ID1}]</p><p></p><p></p><p>Sau khi nhập đủ thông tin click Add</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-211"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-28.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-28-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-28-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-28-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Vậy đã tạo thành công action mới.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-212"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-29-1024x309.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-29-1024x309-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-29-1024x309-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-29-1024x309-md.png 768w" alt=""></figure></figure><p></p><p></p><p>3.5. Test cảnh báo qua telegram</p><p></p><p></p><p>Sử dụng trigger (set up ngưỡng cảnh báo) sẵn có trong template để test gửi cảnh báo.</p><p></p><p></p><p>Click Configuration -&gt; Lựa chọn host -&gt; Trigger</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-213"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-30-1024x394.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-30-1024x394-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-30-1024x394-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-30-1024x394-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Trigger: {Host_Centos_10.10.10.119:system.cpu.load[percpu,avg1].avg(5m)}&gt;1 biểu thị giá trị CPU load average trung bình trong 5 phút &gt; 1 sẽ gửi cảnh báo.</p><p></p><p></p><p>Khi thỏa mãn điều kiện của trigger cảnh báo sẽ được tới telegram.</p><p></p><p></p><figure class="wp-block-image size-large"><figure class="wp-image-214"><img loading="lazy" src="http://blog.dtrungit.ga/media/posts/81/image-31.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="http://blog.dtrungit.ga/media/posts/81/responsive/image-31-xs.png 300w, http://blog.dtrungit.ga/media/posts/81/responsive/image-31-sm.png 480w, http://blog.dtrungit.ga/media/posts/81/responsive/image-31-md.png 768w" alt=""></figure></figure><p></p><p></p><p>Với những hướng dẫn cơ bản trên hy vọng sẽ giúp bạn thiết lập thành công cảnh báo zabbix qua telegram.</p><p></p></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div><nav class="post__nav"><div class="post__nav__prev"><a class="post__nav__link" href="http://blog.dtrungit.ga/cac-buoc-rebuild-zimbra-server-ng-backup/index.html" rel="prev">Previous Post<h3 class="h6">Các bước rebuild Zimbra server (NG Backup)</h3></a></div><div class="post__nav__next"><a class="post__nav__link" href="http://blog.dtrungit.ga/mot-so-thuat-ngu-tren-aws/index.html" rel="prev">Next Post<h3 class="h6">Một số thuật ngữ trên AWS</h3></a></div></nav></footer></div></article><div class="comments-area post__inner" id="comments"><div class="comments"><div class="comments-wrapper"><h2>Comments</h2><div class="fb-comments" data-href="http://blog.dtrungit.ga/thiet-lap-canh-bao-qua-telegram/" data-width="100%" data-colorscheme="light" data-lazy="true" data-order-by="reverse_time" data-numposts="5"></div><noscript>Please enable JS to use the comments form.</noscript></div></div><div id="fb-root"></div><script type="text/javascript" async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v12.0">nonce="n4mWU9e7"</script></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="http://blog.dtrungit.ga/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="http://blog.dtrungit.ga/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>