<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Install and Configure OpenVPN Server on Ubuntu Linux - TRUNG DUONG</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="alternate" type="application/atom+xml" href="https://ddtrungit.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://ddtrungit.github.io/feed.json"><link rel="stylesheet" href="https://ddtrungit.github.io/assets/css/style.css?v=6ddec22a33b6e591633ba53617c15038"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ddtrungit.github.io/install-and-configure-openvpn-server-on-ubuntu-linux/index.html"},"headline":"Install and Configure OpenVPN Server on Ubuntu Linux","datePublished":"2021-05-20T06:11","dateModified":"2022-06-13T14:24","image":{"@type":"ImageObject","url":"https://ddtrungit.github.io/media/posts/108/what_is_openvpn_thumb800.jpg","height":450,"width":800},"description":"Download openvpn-install.sh script to set up OpenVPN server in 5 minutes on Ubuntu Type the following wget command or curl&hellip;","author":{"@type":"Person","name":"Duong Dinh Trung","url":"https://ddtrungit.github.io/authors/dtrungit/"},"publisher":{"@type":"Organization","name":"Duong Dinh Trung","logo":{"@type":"ImageObject","url":"https://ddtrungit.github.io/media/website/Background_2.png","height":800,"width":834}}}</script></head><body><header class="header" id="js-header"><a href="https://ddtrungit.github.io/index.html" class="logo"><img src="https://ddtrungit.github.io/media/website/Background_2.png" alt="TRUNG DUONG"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ddtrungit.github.io/index.html" target="_self">Home</a></li><li><a href="https://ddtrungit.github.io/lien-he/index.html" target="_self">Contact</a></li><li><a href="https://ddtrungit.github.io/gioi-thieu/index.html" target="_self">About</a></li><li><a href="https://ddtrungit.github.io/tags/ansible/index.html" target="_self">Ansible</a></li><li><a href="https://ddtrungit.github.io/tags/aws/index.html" target="_self">AWS</a></li><li><a href="https://ddtrungit.github.io/tags/oracle/index.html" target="_self">Oracle</a></li><li><a href="https://ddtrungit.github.io/tags/linux/index.html" target="_self">Linux</a></li><li><a href="https://ddtrungit.github.io/tags/zimbra/index.html" target="_self">Zimbra</a></li><li><a href="https://ddtrungit.github.io/tags/tip/index.html" target="_self">TIP</a></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><a href="https://ddtrungit.github.io/tags/linux/index.html" class="post__maintag">Linux</a><h1 class="post__title">Install and Configure OpenVPN Server on Ubuntu Linux</h1><div class="post__meta"><div class="post__author">By <a href="https://ddtrungit.github.io/authors/dtrungit/index.html" class="invert" rel="author" title="Duong Dinh Trung">Duong Dinh Trung</a></div></div></header><figure class="post__featured-image"><img src="https://ddtrungit.github.io/media/posts/108/what_is_openvpn_thumb800.jpg" srcset="https://ddtrungit.github.io/media/posts/108/responsive/what_is_openvpn_thumb800-xs.jpg 300w, https://ddtrungit.github.io/media/posts/108/responsive/what_is_openvpn_thumb800-sm.jpg 480w, https://ddtrungit.github.io/media/posts/108/responsive/what_is_openvpn_thumb800-md.jpg 768w, https://ddtrungit.github.io/media/posts/108/responsive/what_is_openvpn_thumb800-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="450" width="800" alt=""></figure><div class="post__inner"><div class="post__entry"><h2>Download openvpn-install.sh script to set up OpenVPN server in 5 minutes on Ubuntu</h2><p>Type the following wget command or curl command: <code>$ wget https://git.io/vpn -O openvpn-install.sh</code> wget grabbing the script:</p><pre>--2020-12-09 09:15:57--  https://git.io/vpnResolving git.io (git.io)... 34.195.187.253, 52.87.143.234, 34.205.238.171, ...Connecting to git.io (git.io)|34.195.187.253|:443... connected.HTTP request sent, awaiting response... 302 FoundLocation: https://raw.github.com/Nyr/openvpn-install/master/openvpn-install.sh [following]--2020-12-09 09:15:57--  https://raw.github.com/Nyr/openvpn-install/master/openvpn-install.shResolving raw.github.com (raw.github.com)... 151.101.124.133Connecting to raw.github.com (raw.github.com)|151.101.124.133|:443... connected.HTTP request sent, awaiting response... 301 Moved PermanentlyLocation: https://raw.githubusercontent.com/Nyr/openvpn-install/master/openvpn-install.sh [following]--2020-12-09 09:15:57--  https://raw.githubusercontent.com/Nyr/openvpn-install/master/openvpn-install.shResolving raw.githubusercontent.com (raw.githubusercontent.com)... 151.101.124.133Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|151.101.124.133|:443... connected.HTTP request sent, awaiting response... 200 OKLength: 23079 (23K) [text/plain]Saving to: 'openvpn-install.sh'openvpn-install.sh  100%[==================&gt;]  22.54K  --.-KB/s    in 0.001s  2020-12-09 09:15:57 (36.9 MB/s) - 'openvpn-install.sh saved [23079/23079]</pre><p>We can verify script using a text editor such as nano command or vim command: <code>$ nano openvpn-install.sh</code></p><h2>Running openvpn-install.sh to install OpenVPN server</h2><p>Type the following command: <code>$ sudo chmod +x openvpn-install.sh $ sudo bash openvpn-install.sh</code> Make sure you provide needed information:</p><pre>Welcome to this OpenVPN road warrior installer!Which protocol should OpenVPN use?   1) UDP (recommended)   2) TCPProtocol [1]: <strong>1</strong>What port should OpenVPN listen to?Port [1194]: Select a DNS server for the clients:   1) Current system resolvers   2) Google   3) 1.1.1.1   4) OpenDNS   5) Quad9   6) AdGuardDNS server [1]: <strong>2</strong>Enter a name for the first client:Name [client]: <strong>iphone</strong>OpenVPN installation is ready to begin.Press any key to continue...</pre><p>Once you press any key such as [Enter] key, you will see:</p><pre>writing new private key to '/etc/openvpn/server/easy-rsa/pki/easy-rsa-1768.FjG9Gr/tmp.vQL9q8'-----Using configuration from /etc/openvpn/server/easy-rsa/pki/easy-rsa-1768.FjG9Gr/tmp.FiauWWCheck that the request matches the signatureSignature okThe Subject's Distinguished Name is as followscommonName            :ASN.1 12:'server'Certificate is to be certified until Dec  7 09:22:17 2030 GMT (3650 days)Write out database with 1 new entriesData Base UpdatedUsing SSL: openssl OpenSSL 1.1.1f  31 Mar 2020Generating a RSA private key....................................+++++...................+++++writing new private key to '/etc/openvpn/server/easy-rsa/pki/easy-rsa-1843.4USwJm/tmp.lOecLW'-----Using configuration from /etc/openvpn/server/easy-rsa/pki/easy-rsa-1843.4USwJm/tmp.5j0n6qCheck that the request matches the signatureSignature okThe Subject's Distinguished Name is as followscommonName            :ASN.1 12:'iphone'Certificate is to be certified until Dec  7 09:22:17 2030 GMT (3650 days)Write out database with 1 new entriesData Base UpdatedUsing SSL: openssl OpenSSL 1.1.1f  31 Mar 2020Using configuration from /etc/openvpn/server/easy-rsa/pki/easy-rsa-1899.k6zZtP/tmp.riZi2RAn updated CRL has been created.CRL file: /etc/openvpn/server/easy-rsa/pki/crl.pemCreated symlink /etc/systemd/system/multi-user.target.wants/openvpn-iptables.service → /etc/systemd/system/openvpn-iptables.service.Created symlink /etc/systemd/system/multi-user.target.wants/openvpn-server@server.service → /lib/systemd/system/openvpn-server@.service.Finished!The client configuration is available in: /root/iphone.ovpnNew clients can be added by running this script again.</pre><h3>Viewing and Seting up OpenVPN Server In 5 Minutes on Ubuntu Firewall Rules</h3><p>That is all. Your OpenVPN server has been configured and ready to use. You can see added firewall rules <kbd>/etc/systemd/system/openvpn-iptables.service</kbd> file: <code>$ sudo systemctl cat openvpn-iptables.service</code> Sample rules. Please do not edit them:</p><div class="wp-geshi-highlight-wrap5"><div class="wp-geshi-highlight-wrap4"><div class="wp-geshi-highlight-wrap3"><div class="wp-geshi-highlight-wrap2"><div class="wp-geshi-highlight-wrap"><div class="wp-geshi-highlight"><div class="bash"><pre class="de1"><span class="br0">[</span>Unit<span class="br0">]</span><span class="re2">Before</span>=network.target<span class="br0">[</span>Service<span class="br0">]</span><span class="re2">Type</span>=oneshot<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-t</span> nat <span class="re5">-A</span> POSTROUTING <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="sy0">!</span> <span class="re5">-d</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> 172.105.102.90<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-I</span> INPUT <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">1194</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-I</span> FORWARD <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-I</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-t</span> nat <span class="re5">-D</span> POSTROUTING <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="sy0">!</span> <span class="re5">-d</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> 172.105.102.90<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-D</span> INPUT <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">1194</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-D</span> FORWARD <span class="re5">-s</span> 10.8.0.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables <span class="re5">-D</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-t</span> nat <span class="re5">-A</span> POSTROUTING <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="sy0">!</span> <span class="re5">-d</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> <span class="nu0">2600</span>:3c04::f03c:92ff:fe42:3d72<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-I</span> FORWARD <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStart</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-I</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-t</span> nat <span class="re5">-D</span> POSTROUTING <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="sy0">!</span> <span class="re5">-d</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> SNAT <span class="re5">--to</span> <span class="nu0">2600</span>:3c04::f03c:92ff:fe42:3d72<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-D</span> FORWARD <span class="re5">-s</span> fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span> <span class="re5">-j</span> ACCEPT<span class="re2">ExecStop</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables <span class="re5">-D</span> FORWARD <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT<span class="re2">RemainAfterExit</span>=<span class="kw2">yes</span><span class="br0">[</span>Install<span class="br0">]</span><span class="re2">WantedBy</span>=multi-user.target</pre></div></div></div></div></div></div></div><p>You can view your openvpn server config file generated by the script as follows (agin do not edit this file by hand as it will break things for you): <code>$ sudo more /etc/openvpn/server/server.conf</code> Sample openvpn config:</p><div class="wp-geshi-highlight-wrap5"><div class="wp-geshi-highlight-wrap4"><div class="wp-geshi-highlight-wrap3"><div class="wp-geshi-highlight-wrap2"><div class="wp-geshi-highlight-wrap"><div class="wp-geshi-highlight"><div class="bash"><pre class="de1"><span class="kw3">local</span> 172.105.102.90port <span class="nu0">1194</span>proto udpdev tunca ca.crtcert server.crtkey server.key<span class="kw2">dh</span> dh.pemauth SHA512tls-crypt tc.keytopology subnetserver 10.8.0.0 255.255.255.0server-ipv6 fddd:<span class="nu0">1194</span>:<span class="nu0">1194</span>:<span class="nu0">1194</span>::<span class="sy0">/</span><span class="nu0">64</span>push <span class="st0">"redirect-gateway def1 ipv6 bypass-dhcp"</span>ifconfig-pool-persist ipp.txtpush <span class="st0">"dhcp-option DNS 8.8.8.8"</span>push <span class="st0">"dhcp-option DNS 8.8.4.4"</span>keepalive <span class="nu0">10</span> <span class="nu0">120</span>cipher AES-<span class="nu0">256</span>-CBCuser nobodygroup nogrouppersist-keypersist-tunstatus openvpn-status.logverb <span class="nu0">3</span>crl-verify crl.pemexplicit-exit-notify</pre></div></div></div></div></div></div></div><h3>How do I start/stop/restart OpenVPN server on Ubuntu Linux 18.04/20.04 LTS and 20.10?</h3><p>Run the following systemctl command to stop the OpenVPN service: <code>$ sudo systemctl stop openvpn-server@server.service</code> Want to start it again? Try: <code>$ sudo systemctl start openvpn-server@server.service</code> The command to restart the OpenVPN service: <code>$ sudo systemctl restart openvpn-server@server.service</code> View status of your OpenVPN systemd based service: <code>$ sudo systemctl status openvpn-server@server.service</code></p><pre><strong>●</strong> openvpn-server@server.service - OpenVPN service for server     Loaded: loaded (/lib/systemd/system/openvpn-server@.service; enabled; vendor preset: enabled)     Active: <strong>active (running)</strong> since Wed 2020-12-09 09:22:18 UTC; 7min ago       Docs: man:openvpn(8)             https://community.openvpn.net/openvpn/wiki/Openvpn24ManPage             https://community.openvpn.net/openvpn/wiki/HOWTO   Main PID: 2017 (openvpn)     Status: "Initialization Sequence Completed"      Tasks: 1 (limit: 4610)     Memory: 1.2M     CGroup: /system.slice/system-openvpn\x2dserver.slice/openvpn-server@server.service             └─2017 /usr/sbin/openvpn --status /run/openvpn-server/status-server.log --status-version 2 --suppress-timestamps --config server.confDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: Socket Buffers: R=[212992-&gt;212992] S=[212992-&gt;212992]Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: UDPv4 link local (bound): [AF_INET]172.105.102.90:1194Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: UDPv4 link remote: [AF_UNSPEC]Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: GID set to nogroupDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: UID set to nobodyDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: MULTI: multi_init called, r=256 v=256Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: IFCONFIG POOL IPv6: (IPv4) size=252, size_ipv6=65536, netbits=64, base_ipv6=fddd:1194:1194:1194::1000Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: IFCONFIG POOL: base=10.8.0.2 size=252, ipv6=1Dec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: IFCONFIG POOL LISTDec 09 09:22:18 nixcraft-ubuntu-vm openvpn[2017]: Initialization Sequence Completed</pre><h2>OpenVPN client configuration</h2><p>On server your will find a client configuration file called ~/iphone.ovpn. Use the find command to locate OpenVPN config file: <code>$ sudo find / -type f -name "iphone.ovpn" $ sudo find / -type f -name "*.ovpn"</code> Now, all you have to do is copy this file to your local desktop using the scp and provide this file to your OpenVPN client to connect: <code>$ scp root@172.105.102.90:~/iphone.ovpn .</code> Next, you need to download OpenVPN client as per your operating system or mobile device:</p><ul><li>Client for <a href="https://itunes.apple.com/us/app/openvpn-connect/id590379981?mt=8" target="_blank" rel="noopener">Apple iOS</a> version 6.x or above</li><li><a href="https://play.google.com/store/apps/details?id=net.openvpn.openvpn&amp;hl=en" target="_blank" rel="noopener">Android</a> client</li><li><a href="https://tunnelblick.net/" target="_blank" rel="noopener">Apple MacOS (OS X)</a></li><li><a href="https://openvpn.net/community-downloads-2/" target="_blank" rel="noopener">Windows 8/10 OpenVPN</a> client</li></ul><h3>MacOS/OS X OpenVPN client configuration</h3><p>Just double click on iphone.ovpn file and it will open in your tunnelblick client &gt; Click on the “Only me” to install it:</p><div id="attachment_145487" class="wp-caption aligncenter"><figure class="size-full wp-image-145487 lazyloaded"><img loading="lazy" src="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/108/responsive/openvpn-macos-xs.jpg 300w, https://ddtrungit.github.io/media/posts/108/responsive/openvpn-macos-sm.jpg 480w, https://ddtrungit.github.io/media/posts/108/responsive/openvpn-macos-md.jpg 768w" sizes="(max-width: 599px) 100vw, 599px" srcset="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/openvpn-macos-300x139.jpg 300w" alt="Fig.03: MacOS / OS X openvpn client configuration" width="599" height="278" aria-describedby="caption-attachment-145487" data-src="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg" data-srcset="https://ddtrungit.github.io/media/posts/108/openvpn-macos.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/openvpn-macos-300x139.jpg 300w" data-sizes="(max-width: 599px) 100vw, 599px"></figure><p id="caption-attachment-145487" class="wp-caption-text">Fig.03: MacOS / OS X openvpn client configuration</p></div><p>Once installed click on Connect button and you will be online. Use the following command on MacOS client to verify that your public IP changed to the VPN server IP: <code>$ dig TXT +short o-o.myaddr.l.google.com @ns1.google.com</code> You can ping to OpenVPN server private IP: <code>$ ping 10.8.0.1</code></p><p> </p><h3>Linux OpenVPN client configuration</h3><p>First, install the openvpn client, enter: <code>$ sudo yum install openvpn</code> OR <code>$ sudo apt install openvpn</code> Next, copy iphone.ovpn as follows: <code>$ sudo cp iphone.ovpn /etc/openvpn/client.conf</code> Test connectivity from the CLI: <code>$ sudo openvpn --client --config /etc/openvpn/client.conf</code> Your Linux system will automatically connect when computer restart using /etc/init.d/openvpn script: <code>$ sudo /etc/init.d/openvpn start</code> For systemd based system, use the following command: <code>$ sudo systemctl start openvpn@client</code> Test the OpenVPN connectivity on Linux desktop: <code>$ <strong>ping 10.8.0.1</strong> #Ping to OpenVPN server gateway using the <a title="See Linux/Unix ping command examples for more info" href="https://www.cyberciti.biz/faq/unix-ping-command-examples/">ping command</a> $ <strong>ip route</strong> #Make sure routing setup using the <a title="See Linux/Unix ip command examples for more info" href="https://www.cyberciti.biz/faq/linux-ip-command-examples-usage-syntax/">ip command</a> $ ip route get 10.8.0.1 #Make sure your public IP set to OpenVPN server $ <strong>dig TXT +short o-o.myaddr.l.google.com @ns1.google.com</strong></code></p><figure class="aligncenter size-full wp-image-149227 lazyloaded"><img loading="lazy" src="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://ddtrungit.github.io/media/posts/108/responsive/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-xs.jpg 300w, https://ddtrungit.github.io/media/posts/108/responsive/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-sm.jpg 480w, https://ddtrungit.github.io/media/posts/108/responsive/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-md.jpg 768w" sizes="(max-width: 599px) 100vw, 599px" srcset="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-300x128.jpg 300w" alt="Set up and Verify OpenVPN Server In 5 Minutes on Ubuntu Linux" width="599" height="255" data-src="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg" data-srcset="https://ddtrungit.github.io/media/posts/108/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux.jpg 599w, https://www.cyberciti.biz/media/new/faq/2016/06/Set-up-and-Verify-OpenVPN-Server-In-5-Minutes-on-Ubuntu-Linux-300x128.jpg 300w" data-sizes="(max-width: 599px) 100vw, 599px"></figure><h3>FreeBSD OpenVPN client configuration</h3><p>First, install the openvpn client using the pkg command: <code>$ sudo pkg install openvpn</code> Next, copy iphone.ovpn as follows: <code>$ mkdir -p /usr/local/etc/openvpn/ $ sudo cp iphone.ovpn /usr/local/etc/openvpn/client.conf</code> Edit /etc/rc.conf and add the following:</p><pre>openvpn_enable="YES"openvpn_configfile="/usr/local/etc/openvpn/client.conf"</pre><p>Start the OpenVPN service: <code>$ sudo /usr/local/etc/rc.d/openvpn start</code> Verify it: <code>#Ping to OpenVPN server gateway from BSD $ ping 10.8.0.1 #Make sure routing setup $ netstat -nr #Make sure your public IP set to OpenVPN server $ drill myip.opendns.com @resolver1.opendns.com</code></p><h2>How do I add a new client?</h2><p>For demo purpose I added a new device called googlephone. Let us add one more device called googlephone by running the script again: <code>$ sudo bash openvpn-install.sh</code></p><pre>Looks like OpenVPN is already installedWhat do you want to do?   1) Add a cert for a new user   2) Revoke existing user cert   3) Remove OpenVPN   4) ExitSelect an option [1-4]:</pre><p>Select option 1 and type googlephone as a client name:</p><div class="wp-geshi-highlight-wrap5"><div class="wp-geshi-highlight-wrap4"><div class="wp-geshi-highlight-wrap3"><div class="wp-geshi-highlight-wrap2"><div class="wp-geshi-highlight-wrap"><div class="wp-geshi-highlight"><div class="ini"><pre class="de1">Tell me a name for the client certPlease, use one word only, no special charactersClient name: googlephoneGenerating a <span class="nu0">2048</span> bit RSA private key.........+++.................................................................................................+++writing new private key to <span class="st0">'/etc/openvpn/easy-rsa/pki/private/googlephone.key.FNaDMaP56c'</span>-----Using configuration from /etc/openvpn/easy-rsa/openssl-<span class="nu0">1.0</span>.cnfCheck that the request matches the signatureSignature okThe Subject<span class="st0">'s Distinguished Name is as followscommonName            :ASN.1 12:'</span>googlephone<span class="st0">'Certificate is to be certified until Sep 25 07:31:46 2027 GMT (3650 days) Write out database with 1 new entriesData Base Updated Client googlephone added, certs available at ~/googlephone.ovpn</span></pre></div></div></div></div></div></div></div><p>Now you can use googlephone.ovpn with Google Android phone. You can add as many users you want using this method.</p><h2>How do I delete/revoke existing user certificate?</h2><p>Run the script: <code>$ sudo bash openvpn-install.sh</code> Here is how it looks:</p><pre>Looks like OpenVPN is already installedWhat do you want to do?   1) Add a cert for a new user   2) Revoke existing user cert   3) Remove OpenVPN   4) ExitSelect an option [1-4]:</pre><p>Type 2 option and you will see a list of all the existing client certificate you want to revoke:</p><pre>Select the existing client certificate you want to revoke     1) iphone6     2) googlephone     3) delllaptop     4) macbookSelect one client [1-4]: 2</pre><p>Sample outputs when I revoked googlephone certificate:</p><pre>Using configuration from /etc/openvpn/easy-rsa/openssl-1.0.cnfRevoking Certificate 09.Data Base UpdatedUsing configuration from /etc/openvpn/easy-rsa/openssl-1.0.cnfAn updated CRL has been created.CRL file: /etc/openvpn/easy-rsa/pki/crl.pemCertificate for client googlephone revoked</pre></div><footer><div class="post__tags-share"><aside class="post__share"></aside></div></footer></div></article></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="https://ddtrungit.github.io/install-mariadb-105-on-amazon-linux-2/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/104/mariadb-vector-logo.png" srcset="https://ddtrungit.github.io/media/posts/104/responsive/mariadb-vector-logo-xs.png 300w, https://ddtrungit.github.io/media/posts/104/responsive/mariadb-vector-logo-sm.png 480w, https://ddtrungit.github.io/media/posts/104/responsive/mariadb-vector-logo-md.png 768w, https://ddtrungit.github.io/media/posts/104/responsive/mariadb-vector-logo-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="500" width="900" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/linux/index.html">Linux</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/install-mariadb-105-on-amazon-linux-2/index.html" class="invert">Install MariaDB 10.5 on Amazon Linux 2</a></h3></header></div></article><article class="c-card"><a href="https://ddtrungit.github.io/install-nginx-on-amazon-linux-2/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/103/tai-xuong-1-1.png" srcset="https://ddtrungit.github.io/media/posts/103/responsive/tai-xuong-1-1-xs.png 300w, https://ddtrungit.github.io/media/posts/103/responsive/tai-xuong-1-1-sm.png 480w, https://ddtrungit.github.io/media/posts/103/responsive/tai-xuong-1-1-md.png 768w, https://ddtrungit.github.io/media/posts/103/responsive/tai-xuong-1-1-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="153" width="330" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/aws/index.html">Aws</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/install-nginx-on-amazon-linux-2/index.html" class="invert">Install Nginx on Amazon Linux 2</a></h3></header></div></article><article class="c-card"><a href="https://ddtrungit.github.io/tuned-automatic-performance-tuning-of-centosrhel-servers/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/101/centos-la-gi.jpg" srcset="https://ddtrungit.github.io/media/posts/101/responsive/centos-la-gi-xs.jpg 300w, https://ddtrungit.github.io/media/posts/101/responsive/centos-la-gi-sm.jpg 480w, https://ddtrungit.github.io/media/posts/101/responsive/centos-la-gi-md.jpg 768w, https://ddtrungit.github.io/media/posts/101/responsive/centos-la-gi-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="276" width="540" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/tip/index.html">Tip</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/tuned-automatic-performance-tuning-of-centosrhel-servers/index.html" class="invert">Tuned – Automatic Performance Tuning of CentOS/RHEL Servers</a></h3></header></div></article><article class="c-card"><a href="https://ddtrungit.github.io/install-mysql-cluster-4-node/index.html" class="c-card__image"><img src="https://ddtrungit.github.io/media/posts/97/Cluster-2Bsimple-2Bsetup.png" srcset="https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-xs.png 300w, https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-sm.png 480w, https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-md.png 768w, https://ddtrungit.github.io/media/posts/97/responsive/Cluster-2Bsimple-2Bsetup-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="551" width="860" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://ddtrungit.github.io/tags/linux/index.html">Linux</a></div><h3 class="c-card__title"><a href="https://ddtrungit.github.io/install-mysql-cluster-4-node/index.html" class="invert">Install mysql cluster 4 node</a></h3></header></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/duongtrung2103" aria-label="Facebook" class="facebook"><svg><use xlink:href="https://ddtrungit.github.io/assets/svg/svg-map.svg#facebook"/></svg></a></div><div class="footer__copyright">"DO THE THINGS YOU LOVE!"</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://ddtrungit.github.io/assets/js/scripts.min.js?v=d78591855e0ce96bf51239b499260e20"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>